{"id":"arcology-03c","title":"Right-click to remove blocks","description":"\nImplement block removal:\n- Right-click removes block at cursor position\n- Emits block_removed signal\n- Updates renderer\nAcceptance: Can right-click to remove placed blocks.","acceptance_criteria":"I TYPED IN HERE!","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T15:05:34.647775-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:42:12.368378-06:00","closed_at":"2026-01-25T15:16:48.027196-06:00","close_reason":"Duplicate of arcology-x0d.6 (includes removal)","comments":[{"id":42,"issue_id":"arcology-03c","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid \u0026 Blocks\n2. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n3. [core-concepts.md](documentation/game-design/core-concepts.md) - Block types\n","created_at":"2026-01-25T22:05:22Z"}]}
{"id":"arcology-072","title":"Create Godot project structure","description":"\nCreate project.godot with proper settings.\nCreate folder structure: src/, scenes/, assets/, data/.\nCreate main.tscn as entry scene.\nAcceptance: Project opens in Godot 4 without errors.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T15:04:56.511479-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:13:47.308756-06:00","closed_at":"2026-01-25T15:13:47.308756-06:00","close_reason":"Duplicate - completed as arcology-4ct.1","comments":[{"id":34,"issue_id":"arcology-072","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-0-skeleton.md](documentation/architecture/milestones/milestone-0-skeleton.md) - Project setup\n2. [tech-stack.md](documentation/quick-reference/tech-stack.md) - Godot 4.x setup\n","created_at":"2026-01-25T22:05:21Z"}]}
{"id":"arcology-1ql","title":"Render blocks isometrically","description":"\nCreate BlockRenderer (src/core/block_renderer.gd):\n- Iterates Grid, creates Sprite2D for each block\n- Uses grid_to_screen() for positioning\n- Y-sorting for proper depth\n- Z-level offset for floors\nAcceptance: Blocks render at correct isometric positions.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T15:05:34.387082-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:47.814707-06:00","closed_at":"2026-01-25T15:16:47.814707-06:00","close_reason":"Duplicate of arcology-x0d.5","comments":[{"id":39,"issue_id":"arcology-1ql","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid \u0026 Blocks\n2. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n3. [core-concepts.md](documentation/game-design/core-concepts.md) - Block types\n","created_at":"2026-01-25T22:05:22Z"}]}
{"id":"arcology-242","title":"Stairs block for vertical connectivity","description":"\nAdd stairs block type:\n- Connects Z to Z+1 (spans two floors)\n- Flood-fill traverses stairs vertically\n- Visual shows connection between floors\nAcceptance: Stairs allow vertical connectivity in flood-fill.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T15:04:59.04017-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:48.916954-06:00","closed_at":"2026-01-25T15:16:48.916954-06:00","close_reason":"Duplicate of arcology-itx.5","dependencies":[{"issue_id":"arcology-242","depends_on_id":"arcology-gmu","type":"blocks","created_at":"2026-01-25T15:05:04.074656-06:00","created_by":"danielbarrett"}],"comments":[{"id":49,"issue_id":"arcology-242","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-3-connectivity.md](documentation/architecture/milestones/milestone-3-connectivity.md) - Connectivity\n2. [transit/pathfinding.md](documentation/game-design/transit/pathfinding.md) - Pathfinding\n3. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit blocks\n","created_at":"2026-01-25T22:05:23Z"}]}
{"id":"arcology-2pw","title":"Camera controls like Cities Skylines","description":"**Feature: Enhanced Camera Controls**\n\nImplement intuitive camera controls similar to Cities Skylines.\n\n## Required Controls\n\n### Zoom\n- Mouse scroll wheel: zoom in/out\n- Smooth zoom with easing\n- Min/max zoom limits\n\n### Pan\n- WASD / Arrow keys: pan camera\n- Middle-mouse drag: pan camera\n- Edge scrolling (optional): move mouse to screen edge\n\n### Center\n- Double-click: center camera on clicked position\n- Smooth pan to target\n\n### Camera Angle (Rotation)\n- Shift + scroll: rotate camera angle\n- Or: Q/E keys to rotate\n- 4 or 8 fixed angles (isometric standard)\n\n### Current State\n- Basic WASD pan exists\n- Basic scroll zoom exists\n- Missing: double-click center, rotation, smooth movement\n\n## Reference\nCities Skylines camera feel: responsive, smooth, predictable\n\nðŸ“š Required Reading:\n- src/core/main.gd (current camera code)\n- documentation/ui/controls.md (if exists)","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T21:46:00.796216-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T21:46:00.796216-06:00"}
{"id":"arcology-31o","title":"Basic camera with pan/zoom","description":"\nImplement Camera2D with:\n- WASD/arrow keys for panning\n- Mouse wheel for zoom (0.5x to 3x)\n- Smooth movement with lerp\n- Camera bounds to prevent infinite scroll\nAcceptance: Camera pans and zooms smoothly with limits.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T15:05:33.684069-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:13:47.429324-06:00","closed_at":"2026-01-25T15:13:47.429324-06:00","close_reason":"Duplicate - completed as arcology-4ct.3","comments":[{"id":35,"issue_id":"arcology-31o","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-0-skeleton.md](documentation/architecture/milestones/milestone-0-skeleton.md) - Project setup\n2. [tech-stack.md](documentation/quick-reference/tech-stack.md) - Godot 4.x setup\n","created_at":"2026-01-25T22:05:21Z"}]}
{"id":"arcology-48z","title":"Simple block picker UI","description":"\nCreate UI for block selection:\n- HBoxContainer with 4 buttons (one per block type)\n- Visual feedback for selected type\n- Keyboard shortcuts 1-4\nAcceptance: Can select block type via UI or keyboard.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T15:05:34.764742-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:48.14335-06:00","closed_at":"2026-01-25T15:16:48.14335-06:00","close_reason":"Duplicate of arcology-x0d.7","comments":[{"id":43,"issue_id":"arcology-48z","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid \u0026 Blocks\n2. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n3. [core-concepts.md](documentation/game-design/core-concepts.md) - Block types\n","created_at":"2026-01-25T22:05:22Z"}]}
{"id":"arcology-4ct","title":"M0: Project Skeleton","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-25T14:55:08.230945-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T21:33:34.300356-06:00","closed_at":"2026-01-25T21:33:34.300356-06:00","close_reason":"All M0 tasks completed","comments":[{"id":51,"issue_id":"arcology-4ct","author":"danielbarrett","text":"## ðŸ“š Milestone Documentation\n\n**Primary doc:** [milestone-0-skeleton.md](documentation/architecture/milestones/milestone-0-skeleton.md)\n\nAll tasks in this epic MUST reference the milestone doc before starting work.\n","created_at":"2026-01-25T22:05:55Z"}]}
{"id":"arcology-4ct.1","title":"Create Godot 4 project structure","description":"Create project.godot, folder structure (src/core/, src/blocks/, src/environment/, src/agents/, src/transit/, src/economy/, src/ui/, scenes/, assets/sprites/blocks/, data/), and main.tscn entry scene. Acceptance: Opens in Godot 4 without errors.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T14:55:42.722208-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:09:37.763992-06:00","closed_at":"2026-01-25T15:09:37.763992-06:00","close_reason":"Implemented and committed","dependencies":[{"issue_id":"arcology-4ct.1","depends_on_id":"arcology-4ct","type":"parent-child","created_at":"2026-01-25T14:55:42.733056-06:00","created_by":"danielbarrett"}],"comments":[{"id":31,"issue_id":"arcology-4ct.1","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-0-skeleton.md](documentation/architecture/milestones/milestone-0-skeleton.md) - Project setup\n2. [tech-stack.md](documentation/quick-reference/tech-stack.md) - Godot 4.x setup\n","created_at":"2026-01-25T22:05:20Z"}]}
{"id":"arcology-4ct.2","title":"Add placeholder sprite","description":"Create a simple 64x32 isometric placeholder sprite and display it in main scene. Acceptance: Sprite visible when running game.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T14:55:48.548436-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:11:25.883487-06:00","closed_at":"2026-01-25T15:11:25.883487-06:00","close_reason":"Implemented and committed","dependencies":[{"issue_id":"arcology-4ct.2","depends_on_id":"arcology-4ct","type":"parent-child","created_at":"2026-01-25T14:55:48.557681-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-4ct.2","depends_on_id":"arcology-4ct.1","type":"blocks","created_at":"2026-01-25T14:58:19.63757-06:00","created_by":"danielbarrett"}],"comments":[{"id":32,"issue_id":"arcology-4ct.2","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-0-skeleton.md](documentation/architecture/milestones/milestone-0-skeleton.md) - Project setup\n2. [tech-stack.md](documentation/quick-reference/tech-stack.md) - Godot 4.x setup\n","created_at":"2026-01-25T22:05:20Z"}]}
{"id":"arcology-4ct.3","title":"Implement camera pan and zoom","description":"Camera2D with WASD/arrow pan and mouse wheel zoom. Acceptance: Can navigate around the game world smoothly.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T14:55:54.580917-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:10:24.410211-06:00","closed_at":"2026-01-25T15:10:24.410211-06:00","close_reason":"Already implemented in arcology-4ct.1","dependencies":[{"issue_id":"arcology-4ct.3","depends_on_id":"arcology-4ct","type":"parent-child","created_at":"2026-01-25T14:55:54.589241-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-4ct.3","depends_on_id":"arcology-4ct.1","type":"blocks","created_at":"2026-01-25T14:58:23.907839-06:00","created_by":"danielbarrett"}],"comments":[{"id":33,"issue_id":"arcology-4ct.3","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-0-skeleton.md](documentation/architecture/milestones/milestone-0-skeleton.md) - Project setup\n2. [tech-stack.md](documentation/quick-reference/tech-stack.md) - Godot 4.x setup\n","created_at":"2026-01-25T22:05:21Z"}]}
{"id":"arcology-4cz","title":"Floor visibility system","description":"\nImplement floor rendering rules:\n- Current floor: 100% opacity\n- Floor below (Z-1): 50% opacity\n- Two below (Z-2): 25% opacity\n- Floors above current: hidden\n- Update when floor changes\nAcceptance: Floors fade by depth, above floors hidden.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:58.502174-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:48.460434-06:00","closed_at":"2026-01-25T15:16:48.460434-06:00","close_reason":"Duplicate of arcology-y6e.2","comments":[{"id":46,"issue_id":"arcology-4cz","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-2-floor-navigation.md](documentation/architecture/milestones/milestone-2-floor-navigation.md) - Floor nav\n2. [ui/views.md](documentation/ui/views.md) - View modes\n","created_at":"2026-01-25T22:05:23Z"}]}
{"id":"arcology-4lj","title":"Milestone 3 - Connectivity","description":"Block adjacency and path connectivity","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-25T15:04:56.347699-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T21:33:34.544829-06:00","closed_at":"2026-01-25T21:33:34.544829-06:00","close_reason":"Duplicate of itx (closed)","comments":[{"id":58,"issue_id":"arcology-4lj","author":"danielbarrett","text":"## ðŸ“š Milestone Documentation\n\n**Primary doc:** [milestone-3-connectivity.md](documentation/architecture/milestones/milestone-3-connectivity.md)\n\n**Supporting docs:**\n- [transit/pathfinding.md](documentation/game-design/transit/pathfinding.md) - Pathfinding graph\n- [transit/elevators.md](documentation/game-design/transit/elevators.md) - Vertical transit\n- [transit/corridors.md](documentation/game-design/transit/corridors.md) - Horizontal transit\n- [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit block catalog\n\nAll tasks in this epic MUST reference the milestone doc before starting work.\n","created_at":"2026-01-25T22:05:57Z"}]}
{"id":"arcology-534","title":"Placeholder block sprites","description":"\nCreate 64x64 isometric placeholder sprites:\n- corridor: gray\n- residential: blue\n- commercial: green  \n- industrial: orange\nSave to assets/sprites/blocks/{type}.png\nAcceptance: 4 colored placeholder sprites exist.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:57.191437-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:47.709244-06:00","closed_at":"2026-01-25T15:16:47.709244-06:00","close_reason":"Duplicate of arcology-x0d.8","comments":[{"id":41,"issue_id":"arcology-534","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid \u0026 Blocks\n2. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n3. [core-concepts.md](documentation/game-design/core-concepts.md) - Block types\n","created_at":"2026-01-25T22:05:22Z"}]}
{"id":"arcology-5ea","title":"Adjacency detection","description":"\nAdd Grid.get_neighbors(pos: Vector3i) -\u003e Array[Vector3i]:\n- Returns 6 directions: +X, -X, +Y, -Y, +Z, -Z\n- Only returns positions that have blocks\nAcceptance: Can query adjacent blocks in 6 directions.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T15:05:35.293013-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:48.25214-06:00","closed_at":"2026-01-25T15:16:48.25214-06:00","close_reason":"Duplicate of arcology-itx.1","comments":[{"id":47,"issue_id":"arcology-5ea","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-3-connectivity.md](documentation/architecture/milestones/milestone-3-connectivity.md) - Connectivity\n2. [transit/pathfinding.md](documentation/game-design/transit/pathfinding.md) - Pathfinding\n3. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit blocks\n","created_at":"2026-01-25T22:05:23Z"}]}
{"id":"arcology-7ns","title":"Block base class","description":"\nCreate Block class (src/core/block.gd) with:\n- grid_position: Vector3i\n- block_type: String\n- Signals: block_placed, block_removed\nAcceptance: Block instances can be created with position and type.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T15:05:33.926385-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:47.461076-06:00","closed_at":"2026-01-25T15:16:47.461076-06:00","close_reason":"Duplicate of arcology-x0d.2","comments":[{"id":37,"issue_id":"arcology-7ns","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid \u0026 Blocks\n2. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n3. [core-concepts.md](documentation/game-design/core-concepts.md) - Block types\n","created_at":"2026-01-25T22:05:21Z"}]}
{"id":"arcology-7oj","title":"Visual indicator for unconnected blocks","description":"\nShow disconnected blocks visually:\n- Red tint or warning icon on unconnected blocks\n- Toggle overlay on/off with key (C for connectivity)\nAcceptance: Can see which blocks are not connected.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T15:05:35.558302-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:49.043451-06:00","closed_at":"2026-01-25T15:16:49.043451-06:00","close_reason":"Duplicate of arcology-itx.4","comments":[{"id":50,"issue_id":"arcology-7oj","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-3-connectivity.md](documentation/architecture/milestones/milestone-3-connectivity.md) - Connectivity\n2. [transit/pathfinding.md](documentation/game-design/transit/pathfinding.md) - Pathfinding\n3. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit blocks\n","created_at":"2026-01-25T22:05:23Z"}]}
{"id":"arcology-7s2","title":"Grid data structure","description":"\nCreate Grid class (src/core/grid.gd) with:\n- Sparse Dictionary[Vector3i, Block]\n- get_block(pos), set_block(pos, block), remove_block(pos)\n- grid_to_screen(Vector3i) -\u003e Vector2 conversion\n- TILE_WIDTH=64, TILE_HEIGHT=32, FLOOR_HEIGHT=24\nAcceptance: Can store/retrieve blocks by 3D position.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T15:04:56.789296-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:47.340162-06:00","closed_at":"2026-01-25T15:16:47.340162-06:00","close_reason":"Duplicate of arcology-x0d.1","comments":[{"id":36,"issue_id":"arcology-7s2","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid \u0026 Blocks\n2. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n3. [core-concepts.md](documentation/game-design/core-concepts.md) - Block types\n","created_at":"2026-01-25T22:05:21Z"}]}
{"id":"arcology-9gm","title":"Milestone 2 - Floor Navigation","description":"Vertical floor switching and visibility","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-25T15:04:56.009816-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T21:33:34.428878-06:00","closed_at":"2026-01-25T21:33:34.428878-06:00","close_reason":"Duplicate of y6e (closed)","comments":[{"id":56,"issue_id":"arcology-9gm","author":"danielbarrett","text":"## ðŸ“š Milestone Documentation\n\n**Primary doc:** [milestone-2-floor-navigation.md](documentation/architecture/milestones/milestone-2-floor-navigation.md)\n\n**Supporting docs:**\n- [ui/views.md](documentation/ui/views.md) - View modes\n- [isometric-math.md](documentation/quick-reference/isometric-math.md) - Z-level handling\n\nAll tasks in this epic MUST reference the milestone doc before starting work.\n","created_at":"2026-01-25T22:05:56Z"}]}
{"id":"arcology-ak9","title":"Terrain System - Base map layer with scenario themes","description":"The terrain is the visual base layer beneath the arcology grid at Z=0. It provides scenario-themed context (Earth green plains, Mars red rocks, Space starfield) and decorative elements (trees, rocks, rivers). Terrain is primarily visual - blocks placed on Z=0 replace terrain visuals.\n\nSee: documentation/game-design/environment/terrain.md\n\nComponents:\n1. Base plane - colored ground surface per theme\n2. Decoration sprites - scattered environmental objects (trees, rocks)\n3. Background layer - sky/stars behind everything\n4. River system - special terrain feature (Earth only)\n\nThemes: Earth (default), Mars, Space Station","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T18:34:08.405287-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T18:34:55.861582-06:00"}
{"id":"arcology-ak9.1","title":"Implement Terrain class with base plane rendering","description":"Create src/core/terrain.gd that renders a colored base plane at z_index -1000.\n\nRequirements:\n- Terrain extends Node2D\n- Configurable base color per theme\n- Renders beneath all grid blocks\n- Supports transparent mode (for space theme)\n- theme property: 'earth', 'mars', 'space'\n\nðŸ“š Required Reading:\n- documentation/game-design/environment/terrain.md\n- documentation/quick-reference/isometric-math.md\n\nAcceptance Criteria:\n- [ ] Terrain class exists in src/core/terrain.gd\n- [ ] Base plane renders at z_index -1000\n- [ ] Color configurable via theme property\n- [ ] Unit tests in test/test_terrain.gd","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T18:36:00.896741-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T20:05:03.611017-06:00","closed_at":"2026-01-25T20:05:03.611017-06:00","close_reason":"Implemented Terrain class with earth/mars/space themes, base plane at z_index -1000, and 12 unit tests","dependencies":[{"issue_id":"arcology-ak9.1","depends_on_id":"arcology-ak9","type":"parent-child","created_at":"2026-01-25T18:36:00.912051-06:00","created_by":"danielbarrett"}]}
{"id":"arcology-ak9.2","title":"Create terrain decoration sprites (Earth theme)","description":"Create isometric sprites for Earth terrain decorations.\n\nSprites needed (64x64 unless noted):\n- tree_oak.png - deciduous tree\n- tree_pine.png - conifer tree\n- rock_small.png - 1x1 boulder\n- rock_large.png - 2x2 boulder (128x96)\n- bush.png - shrub/bush\n- flowers.png - flower patch\n\nFile location: assets/sprites/terrain/earth/\n\nStyle: 16-bit pixel art, isometric perspective matching block sprites\n\nðŸ“š Required Reading:\n- documentation/game-design/environment/terrain.md\n- documentation/quick-reference/isometric-math.md (sprite dimensions)\n\nAcceptance Criteria:\n- [ ] 6 decoration sprites created\n- [ ] Consistent isometric style\n- [ ] Proper transparency for compositing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T18:36:12.680149-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T20:36:16.462587-06:00","closed_at":"2026-01-25T20:36:16.462587-06:00","close_reason":"Implemented and tested","dependencies":[{"issue_id":"arcology-ak9.2","depends_on_id":"arcology-ak9","type":"parent-child","created_at":"2026-01-25T18:36:12.684943-06:00","created_by":"danielbarrett"}],"comments":[{"id":59,"issue_id":"arcology-ak9.2","author":"danielbarrett","text":"## Completion Summary\n\n**Completed:** 2026-01-25T20:45:00Z\n\n### What Was Done\n- Created 6 Earth theme terrain decoration sprites:\n  - tree_oak.png (64x64) - deciduous tree with rounded foliage canopy\n  - tree_pine.png (64x64) - conifer with layered triangular branches\n  - rock_small.png (64x64) - irregular 1x1 boulder\n  - rock_large.png (128x96) - large 2x2 rock formation\n  - bush.png (64x64) - low rounded shrub\n  - flowers.png (64x64) - colorful flower patch on grass\n- Created generate_terrain_sprites.py script using Pillow\n- Created test_terrain_sprites.gd with 10 unit tests\n\nFiles created:\n- assets/sprites/terrain/earth/tree_oak.png\n- assets/sprites/terrain/earth/tree_pine.png\n- assets/sprites/terrain/earth/rock_small.png\n- assets/sprites/terrain/earth/rock_large.png\n- assets/sprites/terrain/earth/bush.png\n- assets/sprites/terrain/earth/flowers.png\n- scripts/generate_terrain_sprites.py\n- test/test_terrain_sprites.gd\n\n### What Was Left Undone / Deferred\n- None - full scope implemented\n\n### Gotchas / Notes for Future Work\n- Sprites are programmatically generated using Python/Pillow for easy regeneration\n- Need to run `godot --headless --import` before tests can load sprites\n- rock_large uses 128x96 dimensions for 2x2 grid cell footprint\n\n### Test Coverage\n- test_terrain_sprites.gd: 10 tests (all pass)\n  - Positive: sprite existence, loading, dimensions, alpha channel\n  - Negative: non-existent sprite returns null","created_at":"2026-01-26T02:36:09Z"}]}
{"id":"arcology-ak9.3","title":"Implement decoration scatter system","description":"Add procedural decoration placement to Terrain class.\n\nRequirements:\n- Scatter algorithm using world seed (deterministic)\n- Configurable density per theme\n- Weighted decoration type selection\n- Decorations at z_index -500 to -100 (above plane, below blocks)\n- Decorations hidden when block placed at same grid position\n\nImplementation:\n```gdscript\nfunc scatter_decorations(density: float, area: Rect2i):\n    var rng = RandomNumberGenerator.new()\n    rng.seed = world_seed\n    # ... place decorations based on density and weights\n```\n\nðŸ“š Required Reading:\n- documentation/game-design/environment/terrain.md#decoration-placement\n\nAcceptance Criteria:\n- [ ] Decorations placed procedurally\n- [ ] Same seed = same placement\n- [ ] Decorations respect block placement\n- [ ] Unit tests for scatter algorithm","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T18:36:24.735164-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T20:47:38.839024-06:00","closed_at":"2026-01-25T20:47:38.839024-06:00","close_reason":"Already implemented in commit fd65b56 - decoration scatter system complete","dependencies":[{"issue_id":"arcology-ak9.3","depends_on_id":"arcology-ak9","type":"parent-child","created_at":"2026-01-25T18:36:24.744523-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-ak9.3","depends_on_id":"arcology-ak9.1","type":"blocks","created_at":"2026-01-25T18:37:52.018617-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-ak9.3","depends_on_id":"arcology-ak9.2","type":"blocks","created_at":"2026-01-25T18:37:52.123426-06:00","created_by":"danielbarrett"}]}
{"id":"arcology-ak9.4","title":"Create terrain.json data file","description":"Create data/terrain.json with theme configurations.\n\nSchema per documentation/game-design/environment/terrain.md:\n```json\n{\n  \"themes\": {\n    \"earth\": {\n      \"base_color\": \"#4a7c4e\",\n      \"decorations\": [...],\n      \"decoration_density\": 0.08,\n      \"has_river\": true,\n      \"background\": \"earth_sky.png\"\n    },\n    \"mars\": { ... },\n    \"space\": { ... }\n  }\n}\n```\n\nðŸ“š Required Reading:\n- documentation/game-design/environment/terrain.md#data-schema\n- documentation/game-design/scenarios.md (theme parameters)\n\nAcceptance Criteria:\n- [ ] data/terrain.json exists\n- [ ] Contains earth, mars, space themes\n- [ ] Schema matches documentation\n- [ ] Terrain class loads from this file","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T18:36:36.308748-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T20:29:23.039634-06:00","closed_at":"2026-01-25T20:29:23.039634-06:00","close_reason":"Implemented terrain.json and integrated with Terrain class","dependencies":[{"issue_id":"arcology-ak9.4","depends_on_id":"arcology-ak9","type":"parent-child","created_at":"2026-01-25T18:36:36.314158-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-ak9.4","depends_on_id":"arcology-ak9.1","type":"blocks","created_at":"2026-01-25T18:37:51.892669-06:00","created_by":"danielbarrett"}]}
{"id":"arcology-ak9.5","title":"Integrate Terrain into main scene","description":"Add Terrain node to main scene and connect to Grid.\n\nRequirements:\n- Add Terrain as child of World node\n- Terrain loads theme from terrain.json\n- Connect to Grid signals:\n  - block_placed: hide decoration at position\n  - block_removed: optionally restore decoration\n- Render area matches visible grid bounds\n\nðŸ“š Required Reading:\n- documentation/game-design/environment/terrain.md#grid-interaction\n- documentation/architecture/milestones/milestone-1-grid-blocks.md\n\nAcceptance Criteria:\n- [ ] Terrain visible beneath blocks in main scene\n- [ ] Decorations hidden when blocks placed\n- [ ] Performance acceptable with 100+ decorations","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T18:36:48.017105-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T20:51:36.449432-06:00","closed_at":"2026-01-25T20:51:36.449432-06:00","close_reason":"Implemented","dependencies":[{"issue_id":"arcology-ak9.5","depends_on_id":"arcology-ak9","type":"parent-child","created_at":"2026-01-25T18:36:48.029426-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-ak9.5","depends_on_id":"arcology-ak9.3","type":"blocks","created_at":"2026-01-25T18:37:52.375434-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-ak9.5","depends_on_id":"arcology-ak9.4","type":"blocks","created_at":"2026-01-25T18:37:52.513423-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-ak9.5","depends_on_id":"arcology-ak9.7","type":"blocks","created_at":"2026-01-25T18:37:52.702405-06:00","created_by":"danielbarrett"}],"comments":[{"id":61,"issue_id":"arcology-ak9.5","author":"danielbarrett","text":"## Completion Summary\n\n**Completed:** 2026-01-25T02:58:00Z\n\n### What Was Done\n- Added Terrain integration to main.gd:\n  - New terrain instance variable\n  - _setup_terrain() function creates terrain as first child of World\n  - Connected Grid.block_added and Grid.block_removed signals\n  - Decorations hide when blocks placed at Z=0\n  - Decorations show when blocks removed from Z=0\n  - scatter_decorations() called on 40x40 area at startup\n- Files modified:\n  - src/core/main.gd\n  - test/test_terrain_integration.gd (new)\n\n### What Was Left Undone / Deferred\n- None - full scope implemented\n\n### Gotchas / Notes for Future Work\n- Terrain must be first child of World (move_child index 0) to render behind blocks\n- Grid.block_removed signal has only one parameter (pos), unlike block_added\n- Only hide decorations at Z=0 (decorations don't exist on other floors)\n\n### Test Coverage\n- Added 12 integration tests in test/test_terrain_integration.gd\n- All tests passing (z_index, scatter, determinism, visibility, themes)","created_at":"2026-01-26T02:51:28Z"}]}
{"id":"arcology-ak9.6","title":"Implement river system (Earth theme)","description":"Add river as special terrain feature for Earth theme.\n\nRequirements:\n- River path defined per world seed\n- River tiles: straight, corner, end pieces\n- Impassable at Z=0 (pathfinding obstacle)\n- Can be covered by blocks (becomes underground)\n- Width: 1-2 tiles\n- Crosses map edge-to-edge\n\nSprites needed:\n- assets/sprites/terrain/earth/river_tiles/straight.png\n- assets/sprites/terrain/earth/river_tiles/corner.png\n- assets/sprites/terrain/earth/river_tiles/end.png\n\nðŸ“š Required Reading:\n- documentation/game-design/environment/terrain.md#river-system\n\nAcceptance Criteria:\n- [ ] River renders across terrain\n- [ ] Pathfinding treats river as obstacle\n- [ ] Blocks can cover river\n- [ ] Optional: animated water effect","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T18:36:59.249269-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T21:01:32.33405-06:00","closed_at":"2026-01-25T21:01:32.33405-06:00","close_reason":"Implemented","dependencies":[{"issue_id":"arcology-ak9.6","depends_on_id":"arcology-ak9","type":"parent-child","created_at":"2026-01-25T18:36:59.256778-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-ak9.6","depends_on_id":"arcology-ak9.5","type":"blocks","created_at":"2026-01-25T18:37:52.818536-06:00","created_by":"danielbarrett"}],"comments":[{"id":62,"issue_id":"arcology-ak9.6","author":"danielbarrett","text":"## Completion Summary\n\n**Completed:** 2026-01-25T21:15:00Z\n\n### What Was Done\n- Created 10 river tile sprites (straight N/S and E/W, 4 corners, 4 ends)\n- Added river configuration to data/terrain.json with tile mappings\n- Implemented river path generation using deterministic RNG (world_seed based)\n- Added river tile selection logic based on path neighbors\n- Integrated river with Grid for pathfinding (is_river_obstacle checks)\n- Added river visibility toggle when blocks placed/removed\n- Created 23 unit tests covering all river functionality\n\nFiles modified:\n- src/core/terrain.gd: River system (~300 lines added)\n- src/core/grid.gd: River obstacle checking (~50 lines added)\n- src/core/main.gd: River integration with scene\n- data/terrain.json: River config\n- assets/sprites/terrain/earth/river_tiles/*.png: 10 sprite files\n- scripts/generate_river_sprites.py: Sprite generator\n- test/test_river.gd: Unit tests\n\n### What Was Left Undone / Deferred\n- Animated water effect (marked as optional in acceptance criteria)\n- River in visual rendering shows 0 tiles in headless mode (textures require renderer)\n- Bridge block type for crossing river (future feature)\n\n### Gotchas / Notes for Future Work\n- River tiles only render when Godot renderer is active (not in headless tests)\n- River path generation uses offset seed (world_seed + 999999) to differ from decoration scatter\n- Corner tiles need careful direction logic - \"from\" direction is prev_dir, \"to\" is next_dir\n- River positions stored as Array[Vector2i] for efficient path checking\n\n### Test Coverage\n- 23 unit tests in test/test_river.gd\n- All tests pass\n- Covers: config loading, path generation, tile selection, position tracking, visibility, obstacles, decorations, determinism","created_at":"2026-01-26T03:01:24Z"}]}
{"id":"arcology-ak9.7","title":"Add background layer (sky/starfield)","description":"Add background rendering behind terrain plane.\n\nRequirements:\n- Background at z_index -2000 (behind everything)\n- Per-theme backgrounds:\n  - Earth: blue sky gradient, optional distant mountains\n  - Mars: orange-pink sky\n  - Space: high-res starfield PNG\n- Background scrolls with camera (parallax optional)\n\nAssets needed:\n- assets/sprites/terrain/backgrounds/earth_sky.png\n- assets/sprites/terrain/backgrounds/mars_sky.png\n- assets/sprites/terrain/backgrounds/space_stars.png\n\nðŸ“š Required Reading:\n- documentation/game-design/environment/terrain.md#background-layer\n\nAcceptance Criteria:\n- [ ] Background visible behind terrain\n- [ ] Changes with theme selection\n- [ ] Performance acceptable (single large texture)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T18:37:11.072376-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T20:46:25.546638-06:00","closed_at":"2026-01-25T20:46:25.546638-06:00","close_reason":"Implemented","dependencies":[{"issue_id":"arcology-ak9.7","depends_on_id":"arcology-ak9","type":"parent-child","created_at":"2026-01-25T18:37:11.090527-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-ak9.7","depends_on_id":"arcology-ak9.1","type":"blocks","created_at":"2026-01-25T18:37:52.256921-06:00","created_by":"danielbarrett"}],"comments":[{"id":60,"issue_id":"arcology-ak9.7","author":"danielbarrett","text":"## Completion Summary\n\n**Completed:** 2026-01-25T02:46:00Z\n\n### What Was Done\n- Created 3 background sprite PNG assets (2048x1536):\n  - earth_sky.png: Blue sky gradient with distant mountain silhouettes\n  - mars_sky.png: Orange-pink Martian sky with dust haze effect\n  - space_stars.png: Starfield with varied star colors and subtle nebula\n- Modified Terrain class to support texture-based backgrounds:\n  - Changed _background from ColorRect to dual _background_color and _background_texture\n  - Added _update_background() method for dynamic theme switching\n  - Added has_background_texture() accessor\n  - Updated set_plane_size() to resize both background nodes\n- Implemented fallback to solid color when texture unavailable\n- Files modified:\n  - src/core/terrain.gd\n  - test/test_terrain.gd\n  - scripts/generate_background_sprites.py (new)\n  - assets/sprites/terrain/backgrounds/*.png (new)\n\n### What Was Left Undone / Deferred\n- Parallax scrolling (marked optional in requirements)\n- Distant planets for space theme (marked optional)\n\n### Gotchas / Notes for Future Work\n- TextureRect.EXPAND_IGNORE_SIZE + STRETCH_KEEP_ASPECT_COVERED fills viewport\n- Background color node renders behind texture node for fallback\n- ResourceLoader.exists() required before load() for graceful fallback\n- 2048x1536 dimensions cover most screen sizes with camera movement\n\n### Test Coverage\n- Added 7 new tests (Tests 20-26) for background functionality\n- Total 26 tests, all passing\n- Tests cover: sprite paths, file existence, texture loading, dimensions, has_background_texture()","created_at":"2026-01-26T02:46:18Z"}]}
{"id":"arcology-ak9.8","title":"Implement underground terrain (excavation visuals)","description":"Add underground terrain that must be excavated for below-grade blocks.\n\nRequirements:\n- Z \u003c 0 cells start as solid terrain (rock/earth)\n- Unexcavated cells render as earth/rock tiles\n- Excavated cells become empty (can place blocks)\n- Visual layers by depth:\n  - Z = -1: Brown soil / Red regolith (Mars)\n  - Z = -2: Clay/rock mix / Orange rock\n  - Z = -3+: Gray bedrock / Dark basalt\n- Cross-section view shows excavation state\n\nSprites needed:\n- assets/sprites/terrain/earth/soil.png\n- assets/sprites/terrain/earth/rock.png\n- assets/sprites/terrain/earth/bedrock.png\n- (Mars equivalents)\n\nðŸ“š Required Reading:\n- documentation/game-design/environment/terrain.md#underground-z--0\n- documentation/game-design/economy/permits.md#excavation\n\nAcceptance Criteria:\n- [ ] Underground cells render as solid by default\n- [ ] Excavation changes visual state\n- [ ] Different sprites per depth level\n- [ ] Grid tracks excavated vs unexcavated","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T18:37:38.953285-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T21:09:50.042369-06:00","closed_at":"2026-01-25T21:09:50.042369-06:00","close_reason":"Implemented and tested","dependencies":[{"issue_id":"arcology-ak9.8","depends_on_id":"arcology-ak9","type":"parent-child","created_at":"2026-01-25T18:37:38.961576-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-ak9.8","depends_on_id":"arcology-ak9.1","type":"blocks","created_at":"2026-01-25T18:37:52.923821-06:00","created_by":"danielbarrett"}],"comments":[{"id":63,"issue_id":"arcology-ak9.8","author":"danielbarrett","text":"## Completion Summary\n\n**Completed:** 2026-01-25T21:15:00Z\n\n### What Was Done\n- Created 6 underground terrain sprites (3 Earth, 3 Mars) with Pillow generator script\n- Extended Terrain class with underground tile rendering, visibility control, and excavation integration\n- Added excavation state tracking to Grid class with signals and auto-excavation\n- Updated terrain.json with underground layer configuration per theme\n- Added 40 unit tests covering excavation mechanics and underground terrain configuration\n\nFiles modified:\n- src/core/terrain.gd: +295 lines for underground system\n- src/core/grid.gd: +70 lines for excavation tracking\n- data/terrain.json: +21 lines for underground config\n- scripts/generate_underground_sprites.py: New 244 line generator\n- test/test_underground.gd: New 282 line test suite\n- assets/sprites/terrain/earth/underground/*.png: 3 new sprites\n- assets/sprites/terrain/mars/underground/*.png: 3 new sprites\n\n### What Was Left Undone / Deferred\n- Cross-section view rendering (mentioned in ticket but not core requirement)\n- Integration with InputHandler for excavation UI (future task)\n- Excavation cost deduction from treasury (requires economy system)\n\n### Gotchas / Notes for Future Work\n- Underground visibility uses alpha dimming (20% per level deeper, min 40%)\n- Space theme has underground:null in JSON (no underground in space station)\n- Block placement at Z\u003c0 auto-excavates (no separate excavation step needed yet)\n- Excavation state persists after block removal (realistic - can't un-dig)\n\n### Test Coverage\n- 40 unit tests covering excavation logic and terrain config\n- Positive: excavation succeeds, visibility updates, sprite paths correct\n- Negative: cannot excavate surface, cannot place without excavation","created_at":"2026-01-26T03:09:36Z"}]}
{"id":"arcology-d1f","title":"UI System - Core HUD and Menus","description":"# UI System - Core HUD and Menus\n\n## Overview\nImplement the core user interface for the game including HUD layout, build toolbar, sidebars, info panels, and menus. Based on comprehensive UI documentation in documentation/ui/.\n\n## Documentation\n- documentation/ui/hud-layout.md - Screen regions, element positioning\n- documentation/ui/build-toolbar.md - Block picker, categories, placement\n- documentation/ui/sidebars.md - Floating menus, overlay toggles\n- documentation/ui/info-panels.md - Block, resident, budget, AEI panels\n- documentation/ui/menus.md - Main menu, pause, settings, save/load\n- documentation/ui/controls.md - Keyboard/mouse reference\n\n## Key Components\n1. HUD Layout (screen regions, top/bottom bars)\n2. Build Toolbar (block categories, placement controls)\n3. Sidebars (tool selection, overlay toggles, floor navigator)\n4. Info Panels (block info, resident info, budget, AEI)\n5. Menus (main menu, pause menu, settings)\n6. Time/Speed Controls\n\n## Design Principles\n- Clarity first - information immediately understandable\n- Minimal viewport obstruction\n- Progressive disclosure - details on demand\n- Consistent feedback\n- Accessible (colorblind modes, scalable UI, rebindable keys)","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-25T19:19:57.714742-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:19:57.714742-06:00","dependencies":[{"issue_id":"arcology-d1f","depends_on_id":"arcology-x0d","type":"blocks","created_at":"2026-01-25T19:23:39.114081-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-d1f","depends_on_id":"arcology-y6e","type":"blocks","created_at":"2026-01-25T19:23:44.953056-06:00","created_by":"danielbarrett"}]}
{"id":"arcology-d1f.1","title":"Implement HUD Layout","description":"# Implement HUD Layout\n\n## Overview\nCreate the base HUD layout with screen regions: top bar, left sidebar, right panel, bottom bar, and central viewport.\n\n## Requirements\nBased on documentation/ui/hud-layout.md:\n\n### Screen Regions\n1. **Top Bar** (48px fixed height)\n   - Menu button (left)\n   - Resources display (money, population, AEI)\n   - Date/time display\n   - Speed controls\n   - Notification badge (right)\n\n2. **Left Sidebar** (64px collapsed / 240px expanded)\n   - Tool selection (Select, Build, Demolish, Info, Upgrade)\n   - Quick build (recent blocks)\n   - Favorites\n\n3. **Right Panel** (320px, contextual)\n   - Shows info panels when block/resident selected\n   - Hidden when nothing selected\n\n4. **Bottom Bar** (80px fixed height)\n   - Build toolbar\n   - Floor navigator\n   - View mode toggle\n   - Overlay buttons\n\n5. **Central Viewport**\n   - Game view fills remaining space\n   - All HUD elements overlay the viewport\n\n### Technical Implementation\n- Use Godot CanvasLayer for HUD\n- MarginContainer for screen edge padding\n- Panel collapse/expand animations (150-200ms)\n- Z-order: modals \u003e tooltips \u003e dropdowns \u003e HUD \u003e viewport\n\n## Acceptance Criteria\n- [ ] Top bar with placeholders for all elements\n- [ ] Left sidebar with collapse/expand\n- [ ] Right panel area that shows/hides\n- [ ] Bottom bar with placeholders\n- [ ] Viewport fills remaining space\n- [ ] Responsive to window resize\n- [ ] Color scheme matches documentation (#1a1a2e, #16213e, etc.)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T19:20:35.127383-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T21:47:10.167415-06:00","closed_at":"2026-01-25T21:47:10.167415-06:00","close_reason":"Implemented","dependencies":[{"issue_id":"arcology-d1f.1","depends_on_id":"arcology-d1f","type":"parent-child","created_at":"2026-01-25T19:20:35.163565-06:00","created_by":"danielbarrett"}],"comments":[{"id":64,"issue_id":"arcology-d1f.1","author":"danielbarrett","text":"## Completion Summary\n\n**Completed:** 2026-01-25T22:15:00Z\n\n### What Was Done\n- Created HUD class (src/ui/hud.gd) with full layout system\n- Implemented TopBar (48px): menu button, resources display, date/time, speed controls, notifications\n- Implemented LeftSidebar (64px collapsed / 240px expanded): tool selection, collapse animation\n- Implemented RightPanel (320px): contextual info panel with show/hide animations\n- Implemented BottomBar (80px): build categories, floor navigator, view mode toggle, overlays button\n- Applied color scheme from documentation (#1a1a2e, #16213e, #0f3460, #e94560)\n- Added collapse/expand animations (200ms)\n- Integrated HUD into main scene with floor change sync\n- Files modified: src/ui/hud.gd (new), src/core/main.gd, test/test_hud.gd (new), test/test_hud_integration.gd (new)\n\n### What Was Left Undone / Deferred\n- Button functionality for build categories (just placeholders)\n- Speed control button group behavior (toggle exclusivity)\n- Overlay dropdown menu\n- Connect build categories to actual block placement system\n- Auto-hide right panel after 5 seconds of inactivity\n\n### Gotchas / Notes for Future Work\n- All containers need explicit name assignments for get_node_or_null paths to work\n- Use mouse_filter = MOUSE_FILTER_IGNORE on HUD root to allow game viewport interaction\n- Viewport margin is transparent spacer between sidebars\n\n### Test Coverage\n- test/test_hud.gd: 62 unit tests (structure, constants, methods, formatting)\n- test/test_hud_integration.gd: 17 integration tests (components, window responsiveness)\n- All tests pass","created_at":"2026-01-26T03:47:02Z"}]}
{"id":"arcology-d1f.10","title":"Fix HUD anchoring for responsive screen sizes","description":"# Fix HUD anchoring for responsive screen sizes\n\n## Problem\nThe HUD elements are not properly anchored to screen edges. Need to use Godot's standard anchoring system for responsive UI.\n\n## Required Changes\n- Verify VBoxContainer fills viewport properly  \n- Ensure top bar pins to top edge\n- Ensure bottom bar pins to bottom edge\n\n## Acceptance Criteria\n- [ ] HUD fills viewport on any screen size\n- [ ] Works with window resizing","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T21:54:29.424851-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T21:54:29.424851-06:00","dependencies":[{"issue_id":"arcology-d1f.10","depends_on_id":"arcology-d1f","type":"parent-child","created_at":"2026-01-25T21:54:29.439427-06:00","created_by":"danielbarrett"}]}
{"id":"arcology-d1f.2","title":"Implement Build Toolbar","description":"# Implement Build Toolbar\n\n## Overview\nCreate the build toolbar UI for selecting and placing blocks. Located in the bottom bar.\n\n## Requirements\nBased on documentation/ui/build-toolbar.md:\n\n### Category Buttons\n7 category buttons with icons and keyboard shortcuts (1-7):\n- Residential (1) - Blue, house icon\n- Commercial (2) - Green, store icon\n- Industrial (3) - Orange, gear icon\n- Transit (4) - Gray, arrow icon\n- Green (5) - Dark green, leaf icon\n- Civic (6) - Purple, column icon\n- Infrastructure (7) - Yellow, bolt icon\n\n### Category Flyout\nWhen category clicked:\n- Flyout panel appears above toolbar\n- Shows all blocks in category\n- Each block tile shows: sprite preview, name, cost\n- Click to select, Esc to close\n\n### Placement Controls\n- Rotate button (R key)\n- Variant button (V key)\n- Demolish button (X key)\n\n### Block States\n- Available: normal\n- Selected: highlighted border\n- Locked: grayed + lock icon\n- Unaffordable: red tint\n\n### Ghost Preview\nWhen block selected:\n- Semi-transparent ghost follows cursor\n- Green tint = valid placement\n- Red tint = invalid placement\n\n## Acceptance Criteria\n- [ ] 7 category buttons in bottom bar\n- [ ] Flyout shows blocks in category\n- [ ] Block tiles show sprite, name, cost\n- [ ] Click selects block for placement\n- [ ] Keyboard shortcuts 1-7 open categories\n- [ ] R rotates selected block\n- [ ] Ghost preview shows at cursor\n- [ ] Green/red tint for valid/invalid placement\n- [ ] Esc cancels placement mode","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T19:20:52.266574-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:20:52.266574-06:00","dependencies":[{"issue_id":"arcology-d1f.2","depends_on_id":"arcology-d1f","type":"parent-child","created_at":"2026-01-25T19:20:52.277726-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-d1f.2","depends_on_id":"arcology-d1f.1","type":"blocks","created_at":"2026-01-25T19:24:00.752416-06:00","created_by":"danielbarrett"}]}
{"id":"arcology-d1f.3","title":"Implement Overlay Sidebar","description":"# Implement Overlay Sidebar\n\n## Overview\nCreate the right-side overlay toggle panel for data visualization layers.\n\n## Requirements\nBased on documentation/ui/sidebars.md:\n\n### Overlay Toggle Panel\nFloating panel with overlay buttons:\n- None (backtick/F1)\n- Light (F2)\n- Air Quality (F3)\n- Noise (F4)\n- Safety (F5)\n- Vibes (F6)\n- Connectivity (F7)\n- Block Type (F8)\n- Foot Traffic (F9)\n\n### Collapsed State\n- Icon strip on right edge\n- Single column of icons\n- Click to toggle overlay\n\n### Expanded State\n- Full labels shown\n- Radio selection (one at a time)\n- Dynamic legend based on active overlay\n- Color scale explanation\n\n### Legend\nWhen overlay active, show color scale:\n```\nâ–ˆâ–ˆâ–ˆâ–ˆ High (80%+)\nâ–ˆâ–ˆâ–ˆâ–ˆ Good (60-80%)\nâ–ˆâ–ˆâ–ˆâ–ˆ Fair (40-60%)\nâ–ˆâ–ˆâ–ˆâ–ˆ Poor (20-40%)\nâ–ˆâ–ˆâ–ˆâ–ˆ Low (\u003c20%)\n```\n\n### Behavior\n- Hover expands after 300ms\n- Click outside collapses\n- Remember last used overlay\n\n## Acceptance Criteria\n- [ ] Overlay panel on right side\n- [ ] 9 overlay buttons\n- [ ] Radio selection behavior\n- [ ] Keyboard shortcuts work\n- [ ] Legend shows for active overlay\n- [ ] Collapse/expand behavior\n- [ ] Integrates with existing overlay system","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T19:21:08.298214-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:21:08.298214-06:00","dependencies":[{"issue_id":"arcology-d1f.3","depends_on_id":"arcology-d1f","type":"parent-child","created_at":"2026-01-25T19:21:08.31195-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-d1f.3","depends_on_id":"arcology-d1f.1","type":"blocks","created_at":"2026-01-25T19:24:05.679154-06:00","created_by":"danielbarrett"}]}
{"id":"arcology-d1f.4","title":"Implement Info Panels","description":"# Implement Info Panels\n\n## Overview\nCreate contextual info panels that appear when clicking blocks, residents, or other game elements.\n\n## Requirements\nBased on documentation/ui/info-panels.md:\n\n### Block Info Panel\nShows when block selected:\n- Header: sprite, name, position, status\n- Occupants section (if residential)\n- Environment bars: light, air, noise, safety, vibes\n- Economics: rent, desirability, maintenance, net income\n- Actions: Upgrade, Demolish, Details\n\n### Resident Info Panel\nShows when resident selected:\n- Header: portrait, name, age, residence time\n- Flourishing score with progress bar\n- Needs breakdown: survival, safety, belonging, esteem, purpose\n- Current activity and next scheduled\n- Relationships list (expandable)\n- Employment info\n- Actions: Follow, History, Complaints\n\n### Budget Panel\nAccessed via $ key:\n- Balance and monthly net\n- Income breakdown by source\n- Expense breakdown by category\n- Trend sparklines (3M, 6M, 1Y)\n- Projections\n- Actions: Take Loan, View History\n\n### AEI Dashboard\nAccessed via Y key:\n- Overall AEI score with progress bar\n- Component breakdown (Individual, Community, Sustainability, Resilience)\n- Achievements list\n- Actions: Detailed Breakdown, History\n\n### Panel Behavior\n- Click object to open\n- Click X or Esc to close\n- Pin icon to keep open\n- Max 3 pinned panels\n- Sections collapsible\n\n## Acceptance Criteria\n- [ ] Block info panel with all sections\n- [ ] Resident info panel with needs bars\n- [ ] Budget panel with income/expenses\n- [ ] AEI dashboard with components\n- [ ] Panels open on selection\n- [ ] Pin/close behavior works\n- [ ] Environment bars show percentages","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T19:21:37.782846-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:21:37.782846-06:00","dependencies":[{"issue_id":"arcology-d1f.4","depends_on_id":"arcology-d1f","type":"parent-child","created_at":"2026-01-25T19:21:37.79263-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-d1f.4","depends_on_id":"arcology-d1f.1","type":"blocks","created_at":"2026-01-25T19:24:10.731358-06:00","created_by":"danielbarrett"}]}
{"id":"arcology-d1f.5","title":"Implement Game Menus","description":"# Implement Game Menus\n\n## Overview\nCreate main menu, pause menu, settings, and save/load functionality.\n\n## Requirements\nBased on documentation/ui/menus.md:\n\n### Main Menu\nDisplayed on game launch:\n- Title and tagline\n- New Game button\n- Continue (most recent save)\n- Load Game\n- Settings\n- Credits\n- Quit\n- Animated arcology background\n\n### New Game Flow\n1. Scenario selection (Fresh Start, Troubled Tower, Crisis Mode)\n2. Game settings (name, difficulty options, sandbox toggles)\n3. Start Game\n\n### Pause Menu\nAccessed via Esc during gameplay:\n- Resume\n- Save Game\n- Load Game\n- Settings\n- Help\n- Main Menu\n- Quit Game\n- Dimmed game background (50% overlay)\n\n### Save/Load System\n- Save game dialog with name input\n- Show existing saves with: thumbnail, name, date, stats\n- Overwrite/Delete options\n- Auto-save every 10 minutes\n- Keep last 3 auto-saves\n\n### Settings Menu (Tabbed)\n- Game: auto-save, edge scrolling, scroll speed, pause on focus loss\n- Graphics: resolution, fullscreen, vsync, quality settings, UI scale\n- Audio: master, music, SFX, ambient, UI volumes\n- Controls: rebindable keys, mouse sensitivity\n- Accessibility: colorblind mode, high contrast, font size\n\n### Confirmation Dialogs\n- Unsaved changes warning\n- Demolish confirmation\n- Error messages\n- Tutorial popups\n\n## Acceptance Criteria\n- [ ] Main menu with all buttons\n- [ ] New game scenario selection\n- [ ] Pause menu (Esc to open/close)\n- [ ] Save/load dialogs\n- [ ] Settings with all tabs\n- [ ] Confirmation dialogs\n- [ ] Auto-save system","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T19:21:55.130428-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:21:55.130428-06:00","dependencies":[{"issue_id":"arcology-d1f.5","depends_on_id":"arcology-d1f","type":"parent-child","created_at":"2026-01-25T19:21:55.14147-06:00","created_by":"danielbarrett"}]}
{"id":"arcology-d1f.6","title":"Implement Time Controls","description":"# Implement Time Controls\n\n## Overview\nCreate game speed controls in the top bar.\n\n## Requirements\nBased on documentation/ui/sidebars.md and documentation/ui/controls.md:\n\n### Speed Control Buttons\nLocated in top bar:\n- Pause button (Space)\n- Normal 1x (1 key)\n- Fast 2x (2 key)\n- Fastest 3x (3 key)\n\n### Visual Feedback\n- Current speed button highlighted\n- Clock icon animates faster at higher speeds\n- Paused shows pulsing pause icon\n- Date/time display shows current game date\n\n### Date/Time Display\nFormat: \"Y5 M3 D12\" (Year 5, Month 3, Day 12)\n- Updates as time passes\n- Shows time of day indicator (morning/afternoon/evening/night)\n\n### Keyboard Shortcuts\n- Space: Toggle pause\n- 1: Normal speed\n- 2: Fast speed\n- 3: Fastest speed\n\n## Acceptance Criteria\n- [ ] Speed control buttons in top bar\n- [ ] Pause/play toggle works\n- [ ] Speed 1x/2x/3x affects game time\n- [ ] Keyboard shortcuts work\n- [ ] Current speed visually indicated\n- [ ] Date/time display updates\n- [ ] Clock animation speed varies","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T19:22:14.957316-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:22:14.957316-06:00","dependencies":[{"issue_id":"arcology-d1f.6","depends_on_id":"arcology-d1f","type":"parent-child","created_at":"2026-01-25T19:22:14.969729-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-d1f.6","depends_on_id":"arcology-d1f.1","type":"blocks","created_at":"2026-01-25T19:24:15.748438-06:00","created_by":"danielbarrett"}]}
{"id":"arcology-d1f.7","title":"Implement Floor Navigator","description":"# Implement Floor Navigator\n\n## Overview\nCreate the floor navigation widget in the bottom bar for vertical floor switching.\n\n## Requirements\nBased on documentation/ui/sidebars.md:\n\n### Basic Navigator\nLocated in bottom bar center:\n- Up arrow button (Page Up)\n- Floor number display (e.g., \"Floor 12\")\n- Down arrow button (Page Down)\n\n### Extended Floor List\nClick floor number to show full list:\n- Scrollable list of all floors\n- Current floor highlighted\n- Floor indicators:\n  - â— Current floor\n  - â— Has activity\n  - âš  Has alerts\n  - âˆ… Empty (no blocks)\n- Click to jump to floor\n\n### Keyboard Shortcuts\n- Page Up / E: Floor up\n- Page Down / C: Floor down\n- Ctrl+Page Up: Top floor\n- Ctrl+Page Down: Ground floor\n\n### Visual Feedback\n- Current floor always visible\n- Smooth transition when changing floors\n- Floor indicator updates with floor state\n\n## Acceptance Criteria\n- [ ] Floor navigator in bottom bar\n- [ ] Up/down buttons work\n- [ ] Floor number displays current floor\n- [ ] Click opens extended floor list\n- [ ] Click floor in list jumps to it\n- [ ] Page Up/Down keyboard shortcuts\n- [ ] Floor indicators show state\n- [ ] Integrates with existing floor system","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T19:22:36.766417-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:22:36.766417-06:00","dependencies":[{"issue_id":"arcology-d1f.7","depends_on_id":"arcology-d1f","type":"parent-child","created_at":"2026-01-25T19:22:36.780672-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-d1f.7","depends_on_id":"arcology-d1f.1","type":"blocks","created_at":"2026-01-25T19:24:21.320371-06:00","created_by":"danielbarrett"}]}
{"id":"arcology-d1f.8","title":"Implement Tool Sidebar","description":"# Implement Tool Sidebar\n\n## Overview\nCreate the left sidebar with tool selection and quick access features.\n\n## Requirements\nBased on documentation/ui/sidebars.md:\n\n### Collapsed State (Default)\n64px width, icon-only:\n- Menu button\n- Select tool (Q)\n- Build tool (B)\n- Demolish tool (X)\n- Info tool (I)\n- Upgrade tool (U)\n- Separator\n- Quick Build section (recent blocks)\n- Favorites section\n\n### Expanded State\n240px width, icons + labels:\n- Full tool names with shortcuts\n- Quick Build: last 5 blocks placed\n- Favorites: player-pinned blocks (max 10)\n\n### Behavior\n- Hover expands after 300ms\n- Click pin icon to lock expanded\n- Click outside collapses (if unpinned)\n- Esc collapses\n\n### Tool States\n- Selected tool highlighted\n- Active tool shows in cursor\n- Tool shortcuts work globally\n\n### Quick Build\n- Shows last 5 unique blocks placed\n- Click to select immediately\n- Drag to reorder\n\n### Favorites\n- Right-click block in flyout â†’ \"Add to Favorites\"\n- Maximum 10 favorites\n- Persists between sessions\n\n## Acceptance Criteria\n- [ ] Left sidebar with tools\n- [ ] Collapse/expand behavior\n- [ ] Tool selection works\n- [ ] Keyboard shortcuts (Q, B, X, I, U)\n- [ ] Quick Build shows recent blocks\n- [ ] Favorites can be added/removed\n- [ ] Pin/unpin behavior","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T19:22:55.814862-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:22:55.814862-06:00","dependencies":[{"issue_id":"arcology-d1f.8","depends_on_id":"arcology-d1f","type":"parent-child","created_at":"2026-01-25T19:22:55.832867-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-d1f.8","depends_on_id":"arcology-d1f.1","type":"blocks","created_at":"2026-01-25T19:24:26.508046-06:00","created_by":"danielbarrett"}]}
{"id":"arcology-d1f.9","title":"Implement Notification System","description":"# Implement Notification System\n\n## Overview\nCreate the notification tray and toast system for alerts and events.\n\n## Requirements\nBased on documentation/ui/sidebars.md:\n\n### Notification Tray\nLocated in top-right of top bar:\n- Badge showing unread count\n- Click to expand notification list\n\n### Expanded View\n- List of notifications with:\n  - Icon (type indicator)\n  - Title\n  - Description\n  - Time ago\n  - Action buttons (View, Dismiss)\n- Scrollable if many notifications\n\n### Notification Types\n- Emergency (red, auto-pause): fires, critical failures\n- Warning (orange): capacity issues, declining stats\n- News (blue): new residents, events\n- Positive (green): achievements, milestones\n- Info (gray): tips, reminders\n\n### Toast Notifications\n- Slide in from top-right\n- Auto-dismiss after 5 seconds\n- Click to view details\n- High-priority notifications persist until dismissed\n\n### Behavior\n- New notifications add to badge count\n- Click notification opens relevant panel/location\n- Dismiss removes from list\n- Emergency notifications pause game\n\n## Acceptance Criteria\n- [ ] Notification badge in top bar\n- [ ] Click expands notification list\n- [ ] Different notification types with icons\n- [ ] Action buttons work (View, Dismiss)\n- [ ] Toast notifications appear for new events\n- [ ] Emergency notifications auto-pause\n- [ ] Badge count updates correctly","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T19:23:11.157856-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:23:11.157856-06:00","dependencies":[{"issue_id":"arcology-d1f.9","depends_on_id":"arcology-d1f","type":"parent-child","created_at":"2026-01-25T19:23:11.17518-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-d1f.9","depends_on_id":"arcology-d1f.1","type":"blocks","created_at":"2026-01-25T19:24:31.564687-06:00","created_by":"danielbarrett"}]}
{"id":"arcology-dao","title":"Floor level tracking","description":"\nAdd current_floor state:\n- Global or GameState singleton with current_floor: int\n- UI label showing current floor\n- Min floor 0, max floor 10 initially\nAcceptance: Game tracks and displays current floor.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T15:05:34.893607-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:48.643408-06:00","closed_at":"2026-01-25T15:16:48.643408-06:00","close_reason":"Duplicate of arcology-y6e.1","comments":[{"id":44,"issue_id":"arcology-dao","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-2-floor-navigation.md](documentation/architecture/milestones/milestone-2-floor-navigation.md) - Floor nav\n2. [ui/views.md](documentation/ui/views.md) - View modes\n","created_at":"2026-01-25T22:05:23Z"}]}
{"id":"arcology-edz","title":"Bug: Block placement stopped working","description":"**Bug Report**\n\nBlock placement no longer works after recent changes.\n\n**To Reproduce:**\n1. Run game: `/Applications/Godot.app/Contents/MacOS/Godot --path . scenes/main.tscn`\n2. Try to click to place blocks\n3. Nothing happens\n\n**Investigation:**\n- Check if InputHandler is connected\n- Check if ghost preview appears\n- Check console for errors\n- Recent changes to input_handler.gd for floor feedback/auto-stacking may have broken it\n\n**Files to check:**\n- src/core/input_handler.gd\n- src/core/main.gd\n- scenes/main.tscn\n\nðŸ“š Required Reading:\n- src/core/input_handler.gd\n- git log for recent changes to input handling","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T21:45:46.318918-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T21:54:33.022443-06:00","closed_at":"2026-01-25T21:54:33.022443-06:00","close_reason":"Investigated - likely already fixed or intermittent visual issue","comments":[{"id":65,"issue_id":"arcology-edz","author":"danielbarrett","text":"## Investigation Progress\n\n**Investigating:** 2026-01-25\n\n### Analysis\n- InputHandler uses `_unhandled_input` which should only receive events not consumed by UI\n- HUD root Control has `mouse_filter = MOUSE_FILTER_IGNORE`\n- Middle containers also have `MOUSE_FILTER_IGNORE`\n- However, PanelContainers (top_bar, left_sidebar, bottom_bar) have default `MOUSE_FILTER_STOP`\n- This is expected behavior - clicking on UI panels shouldn't place blocks\n\n### Potential Issues\n1. Viewport area click passthrough may not be working correctly\n2. Check if ghost sprite shows when hovering over game area\n3. May be issue with camera transform in `_get_grid_pos_at_mouse()`\n\n### Next Steps\n- Test manually in running game\n- Check console for error messages\n- Verify ghost preview is visible and following mouse","created_at":"2026-01-26T03:53:48Z"},{"id":66,"issue_id":"arcology-edz","author":"danielbarrett","text":"## Bug Investigation Report\n\n**Investigated:** 2026-01-25\n\n### Investigation Summary\nExtensive testing confirmed the block placement system is working correctly:\n1. InputHandler receives mouse events properly\n2. _try_place_block() successfully creates and places blocks\n3. Grid block count increases after placement (11 â†’ 12 in test)\n4. Placement signals fire correctly (\"Placed corridor at ...\")\n\n### Changes Made\n- Added mouse_filter = MOUSE_FILTER_IGNORE to DebugLabel in main.tscn\n- This ensures the debug label doesn't capture mouse clicks\n\n### Possible Causes of Original Bug\n1. DebugLabel was capturing clicks in top-left area (now fixed)\n2. Visual feedback issue - blocks placed but not rendered properly\n3. User clicking on HUD panels (expected behavior - UI should capture those)\n4. Bug was already fixed in a previous commit\n\n### Test Coverage\n- Created test_input_events.gd to verify InputHandler receives events\n- Verified block count increases after simulated click\n- Confirmed _is_ready() returns true in running game\n\n### Files Checked\n- src/core/input_handler.gd - Input handling logic works correctly\n- src/core/block_renderer.gd - Texture loading may fail in headless mode\n- src/ui/hud.gd - Mouse filters set correctly for viewport pass-through\n- scenes/main.tscn - Fixed DebugLabel mouse filter","created_at":"2026-01-26T03:54:25Z"}]}
{"id":"arcology-eip","title":"Milestone 0 - Project Skeleton","description":"Basic Godot project setup with camera controls","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-25T15:04:55.693492-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:13:47.637647-06:00","closed_at":"2026-01-25T15:13:47.637647-06:00","close_reason":"Duplicate epic","comments":[{"id":52,"issue_id":"arcology-eip","author":"danielbarrett","text":"## ðŸ“š Milestone Documentation\n\n**Primary doc:** [milestone-0-skeleton.md](documentation/architecture/milestones/milestone-0-skeleton.md)\n\nAll tasks in this epic MUST reference the milestone doc before starting work.\n","created_at":"2026-01-25T22:05:56Z"}]}
{"id":"arcology-gmu","title":"Entrance block and connectivity","description":"\nAdd entrance block type and connectivity:\n- New block type 'entrance' at Z=0 only\n- Add 'connected' boolean to Block class\n- Flood-fill from entrance marks reachable blocks\n- Recalculate on block add/remove\nAcceptance: Blocks reachable from entrance marked connected.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:58.762235-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:48.359979-06:00","closed_at":"2026-01-25T15:16:48.359979-06:00","close_reason":"Duplicate of arcology-itx.2 + arcology-itx.3","comments":[{"id":48,"issue_id":"arcology-gmu","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-3-connectivity.md](documentation/architecture/milestones/milestone-3-connectivity.md) - Connectivity\n2. [transit/pathfinding.md](documentation/game-design/transit/pathfinding.md) - Pathfinding\n3. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit blocks\n","created_at":"2026-01-25T22:05:23Z"}]}
{"id":"arcology-h49","title":"Floor navigation controls","description":"\nAdd floor switching:\n- Up/Down buttons in UI\n- Page Up/Page Down keyboard shortcuts\n- Clamp to valid range\nAcceptance: Can switch floors with UI and keyboard.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T15:05:35.022288-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:48.760722-06:00","closed_at":"2026-01-25T15:16:48.760722-06:00","close_reason":"Duplicate of arcology-y6e.1 (includes controls)","comments":[{"id":45,"issue_id":"arcology-h49","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-2-floor-navigation.md](documentation/architecture/milestones/milestone-2-floor-navigation.md) - Floor nav\n2. [ui/views.md](documentation/ui/views.md) - View modes\n","created_at":"2026-01-25T22:05:23Z"}]}
{"id":"arcology-itx","title":"M3: Connectivity \u0026 Paths","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-25T14:55:25.321388-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T21:33:10.199993-06:00","closed_at":"2026-01-25T21:33:10.199993-06:00","close_reason":"All tasks completed","comments":[{"id":57,"issue_id":"arcology-itx","author":"danielbarrett","text":"## ðŸ“š Milestone Documentation\n\n**Primary doc:** [milestone-3-connectivity.md](documentation/architecture/milestones/milestone-3-connectivity.md)\n\n**Supporting docs:**\n- [transit/pathfinding.md](documentation/game-design/transit/pathfinding.md) - Pathfinding graph\n- [transit/elevators.md](documentation/game-design/transit/elevators.md) - Vertical transit\n- [transit/corridors.md](documentation/game-design/transit/corridors.md) - Horizontal transit\n- [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit block catalog\n\nAll tasks in this epic MUST reference the milestone doc before starting work.\n","created_at":"2026-01-25T22:05:57Z"}]}
{"id":"arcology-itx.1","title":"Implement adjacency detection","description":"# Adjacency Detection\n\n## Overview\nBlocks need to know their neighbors in 6 directions (Â±X, Â±Y, Â±Z) to calculate connectivity. This is the foundation for the connectivity flood-fill system.\n\n## Requirements\n1. Grid.get_neighbors(pos) returns 6 orthogonal neighbor positions\n2. Grid.get_walkable_neighbors(pos) returns connected neighbors only\n3. Consider block traversability (public vs private)\n\n## The 6 Orthogonal Directions\n```\n+X = East  (1, 0, 0)\n-X = West  (-1, 0, 0)\n+Y = South (0, 1, 0)\n-Y = North (0, -1, 0)\n+Z = Up    (0, 0, 1)\n-Z = Down  (0, 0, -1)\n```\n\n## Implementation\nFrom `milestone-3-connectivity.md`:\n```gdscript\nfunc get_neighbors(pos: Vector3i) -\u003e Array[Vector3i]:\n    return [\n        pos + Vector3i(1, 0, 0),   # East\n        pos + Vector3i(-1, 0, 0),  # West\n        pos + Vector3i(0, 1, 0),   # South\n        pos + Vector3i(0, -1, 0),  # North\n        pos + Vector3i(0, 0, 1),   # Up\n        pos + Vector3i(0, 0, -1),  # Down\n    ]\n```\n\n## Connectivity Rules\nFrom `milestone-3-connectivity.md`:\n1. **Horizontal** (X/Y): Two blocks connect if both exist and at least one is traversable\n2. **Vertical** (Z): Only connects via stairs/elevator (see itx.5/6)\n3. Private blocks are destinations, not through-routes\n\n## ðŸ“š Required Reading\n- `documentation/architecture/milestones/milestone-3-connectivity.md` - Neighbor finding code\n- `documentation/game-design/core-concepts.md#public-vs-private-blocks` - Traversability rules\n\n## Acceptance Criteria\nFrom milestone-3-connectivity.md:\n- [ ] get_neighbors returns 6 adjacent positions\n- [ ] Can query which neighbors have blocks vs empty\n- [ ] Corridors connect horizontally to adjacent corridors\n- [ ] Corridor-to-residential connects (can reach destination)\n- [ ] Residential-to-residential does NOT connect through (private)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:34.736905-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:36:13.866748-06:00","closed_at":"2026-01-25T19:36:13.866748-06:00","close_reason":"Implemented adjacency detection with 12 unit tests","dependencies":[{"issue_id":"arcology-itx.1","depends_on_id":"arcology-itx","type":"parent-child","created_at":"2026-01-25T14:57:34.743955-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-itx.1","depends_on_id":"arcology-x0d.1","type":"blocks","created_at":"2026-01-25T14:59:16.491495-06:00","created_by":"danielbarrett"}],"comments":[{"id":5,"issue_id":"arcology-itx.1","author":"danielbarrett","text":"## Requirements Questions (from PRD Section 6)\n\n**PRD says adjacency is more complex than 6-direction grid neighbors:**\n\n1. **Corridors connect through faces:** A corridor at (0,0,0) facing East connects to a block at (1,0,0) facing West. Blocks have entry_points per face.\n\n2. **Diagonal connections:** Some blocks (like plazas) might allow diagonal movement. Current ticket assumes only 6 orthogonal directions.\n\n3. **Vertical connections are special:**\n   - Stairs: connect Z to Z+1 but require specific orientation\n   - Elevators: connect any floors in the shaft, but not horizontally\n   - Standard blocks: no vertical connection\n\n**Questions:**\n1. Should get_neighbors() return all 6 directions, or only directions where the block has an entry_point?\n2. How do we model stairs connecting Z to Z+1? Is it two calls (up and down) or a single \"vertical_neighbors\" concept?\n3. Should adjacency consider block traversability? (A private block can be reached FROM a corridor, but you can't pass THROUGH it)\n\n## Proposed implementation:\n```gdscript\n# Basic grid neighbors (6 directions)\nfunc get_grid_neighbors(pos: Vector3i) -\u003e Array[Vector3i]\n\n# Walkable connections (checks traversability + entry points)\nfunc get_connected_neighbors(pos: Vector3i) -\u003e Array[Vector3i]\n\n# Vertical connections (stairs/elevators)\nfunc get_vertical_neighbors(pos: Vector3i) -\u003e Array[Vector3i]\n```","created_at":"2026-01-25T21:20:45Z"},{"id":25,"issue_id":"arcology-itx.1","author":"danielbarrett","text":"## ðŸ“š Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-3-connectivity.md#neighbor-finding](documentation/architecture/milestones/milestone-3-connectivity.md) - Neighbor detection\n2. [isometric-math.md#neighbor-finding](documentation/quick-reference/isometric-math.md) - 6 neighbors in 3D\n3. [core-concepts.md#public-vs-private-blocks](documentation/game-design/core-concepts.md#public-vs-private-blocks) - Traversability\n\n**Key sections:**\n- get_neighbors(): milestone-3-connectivity.md#neighbor-finding\n- can_connect(): milestone-3-connectivity.md#connection-rules\n","created_at":"2026-01-25T22:04:47Z"}]}
{"id":"arcology-itx.2","title":"Implement connectivity flood-fill","description":"# Implement Connectivity Flood-Fill\n\n## User Stories (from PRD)\n- **US-015**: As a developer, I need a special entrance block and flood-fill connectivity check.\n\n## Overview\nConnectivity determines which blocks are reachable from the entrance. This is calculated using a breadth-first flood-fill algorithm starting from the entrance block.\n\n## Requirements\n1. `Grid.calculate_connectivity(entrance_pos: Vector3i)` method\n2. BFS flood-fill from entrance position\n3. Sets `block.connected = true` for reachable blocks\n4. Sets `block.connected = false` for isolated blocks\n5. Recalculates when blocks are added or removed\n\n## Algorithm\n```gdscript\nfunc calculate_connectivity(entrance_pos: Vector3i) -\u003e void:\n    # Reset all blocks to disconnected\n    for block in get_all_blocks():\n        block.connected = false\n    \n    # BFS from entrance\n    var queue: Array[Vector3i] = [entrance_pos]\n    var visited: Dictionary = {entrance_pos: true}\n    \n    while not queue.is_empty():\n        var pos = queue.pop_front()\n        var block = get_block(pos)\n        if block:\n            block.connected = true\n            \n            # Add walkable neighbors to queue\n            for neighbor_pos in get_walkable_neighbors(pos):\n                if not visited.has(neighbor_pos):\n                    visited[neighbor_pos] = true\n                    queue.append(neighbor_pos)\n```\n\n## Traversability Rules\n- **PUBLIC** blocks (corridor, stairs, elevator): Can route THROUGH\n- **PRIVATE** blocks (residential, commercial): Can route TO but not through\n- Horizontal connections: Both blocks exist, at least one is PUBLIC\n- Vertical connections: Only via stairs/elevator (see itx.5/itx.6)\n\n## Signals\n- Connect to `block_added` and `block_removed` signals\n- Recalculate connectivity on each change\n\n## ðŸ“š Required Reading\n- `documentation/architecture/milestones/milestone-3-connectivity.md`\n- `documentation/game-design/core-concepts.md#public-vs-private-blocks`\n\n## Acceptance Criteria\n- [ ] `calculate_connectivity()` exists on Grid\n- [ ] BFS visits all reachable blocks from entrance\n- [ ] Blocks have `connected` property (bool)\n- [ ] Connected blocks marked `connected = true`\n- [ ] Isolated blocks marked `connected = false`\n- [ ] Connectivity recalculates on block add/remove","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:39.516284-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:53:26.792367-06:00","closed_at":"2026-01-25T19:53:26.792367-06:00","close_reason":"Implemented connectivity flood-fill with BFS algorithm, traversability rules, auto-recalculation, and full test coverage (33 unit + 15 integration tests)","dependencies":[{"issue_id":"arcology-itx.2","depends_on_id":"arcology-itx","type":"parent-child","created_at":"2026-01-25T14:57:39.530857-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-itx.2","depends_on_id":"arcology-itx.1","type":"blocks","created_at":"2026-01-25T17:43:12.451441-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-itx.2","depends_on_id":"arcology-itx.3","type":"blocks","created_at":"2026-01-25T17:43:12.549048-06:00","created_by":"danielbarrett"}],"comments":[{"id":6,"issue_id":"arcology-itx.2","author":"danielbarrett","text":"## Requirements Questions (from PRD Section 6)\n\n**PRD has sophisticated pathfinding beyond boolean connectivity:**\n\n1. **Edge costs matter:** PRD defines traversal_speed and cost_modifier per block type. A Food Hall has cost 0.95 (preferred), a crowded corridor might have cost 1.5 (avoided).\n\n2. **Travel time calculation:**\n   ```\n   edge_cost = (distance / traversal_speed) Ã— cost_modifier\n   ```\n   This affects resident happiness, not just \"can I get there?\"\n\n3. **Pathfinding graph vs connectivity:**\n   - Connectivity = \"can I reach this block?\" (boolean)\n   - Pathfinding = \"what's the best route?\" (weighted)\n\n**Questions:**\n1. Is M3 just boolean connectivity (BFS flood-fill), or do we need weighted paths?\n2. When do we calculate connectivity? On every block change? Lazy on query?\n3. Should unconnected blocks be unbuildable, or just show warning?\n4. What happens when entrance is removed? All blocks become unconnected?\n\n## Proposed scope for M3:\n- Boolean connectivity only (BFS from entrance)\n- Recalculate on block add/remove (debounced)\n- Store `connected: bool` per block\n- Defer weighted pathfinding to M6 (when residents move)\n\n## Critical insight:\nConnectivity drives emergent gameplay: \"Why won't anyone move into my apartments?\" â†’ \"Because they're not connected to the entrance!\"","created_at":"2026-01-25T21:21:04Z"},{"id":9,"issue_id":"arcology-itx.2","author":"danielbarrett","text":"# Connectivity Flood-Fill\n\n## User Stories (from PRD Section 6.9, 19)\n- US-6.1: As a player, I want blocks to know if they're reachable from the entrance.\n- US-19.2: As a developer, I want the pathfinding graph to be separate from the voxel grid for performance.\n\n## Requirements\n\n### Core Algorithm\n1. `Grid.calculate_connectivity(entrance_pos: Vector3i) -\u003e void`\n   - BFS from entrance position\n   - Marks each reachable block with `connected = true`\n   - Unreachable blocks get `connected = false`\n\n2. **Traversability Rules:**\n   - PUBLIC blocks (corridor, entrance, atrium, lobby): can route THROUGH\n   - PRIVATE blocks (residential, office, restaurant): can route TO but not THROUGH\n   - Two adjacent PRIVATE blocks do NOT connect through each other\n\n3. **When to Recalculate:**\n   - On block placed\n   - On block removed\n   - Debounce: 100ms delay to batch rapid changes\n\n### Data Structure\n```gdscript\n# Each block stores:\nvar connected: bool = false\n\n# Grid maintains:\nvar entrance_position: Vector3i  # seed for BFS\n```\n\n### Neighbor Connectivity\n```\nFor BFS, a block connects to neighbor if:\n- Neighbor exists (not empty)\n- Current block is PUBLIC (can route through)\n  OR current block is entrance (always traversable)\n- Neighbor block is not VOID type\n```\n\n## Implementation Notes\n- Use Dictionary for visited set (Vector3i keys)\n- Queue-based BFS, not recursive\n- Store result on block.connected property\n- Emit signal `connectivity_changed` when recalculated\n\n## Acceptance Criteria\n- [ ] BFS correctly identifies all reachable blocks from entrance\n- [ ] Private blocks can be destinations but not waypoints\n- [ ] Recalculates on block add/remove with debounce\n- [ ] Performance: \u003c50ms for 1000 blocks\n\n## Out of Scope (M6)\n- Weighted pathfinding (edge costs, travel time)\n- Multiple path options\n- Congestion-aware routing","created_at":"2026-01-25T21:32:37Z"},{"id":26,"issue_id":"arcology-itx.2","author":"danielbarrett","text":"## ðŸ“š Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-3-connectivity.md#connectivity-calculation](documentation/architecture/milestones/milestone-3-connectivity.md) - BFS algorithm\n2. [transit/pathfinding.md](documentation/game-design/transit/pathfinding.md) - Pathfinding philosophy\n\n**Key sections:**\n- calculate_connectivity(): milestone-3-connectivity.md#connectivity-calculation\n- BFS from entrance: milestone-3-connectivity.md\n","created_at":"2026-01-25T22:04:48Z"}]}
{"id":"arcology-itx.3","title":"Add entrance block type","description":"# Add Entrance Block Type\n\n## User Stories (from PRD)\n- **US-015**: As a developer, I need a special entrance block and flood-fill connectivity check.\n\n## Overview\nThe entrance block is the connection point to the outside world. All connectivity calculations start from the entrance - blocks that can't reach an entrance are \"disconnected\" and won't function properly.\n\n## Requirements\n1. Add `entrance` block type to `data/blocks.json`\n2. Entrance can only be placed at Z=0 (ground level)\n3. Grid tracks entrance position(s)\n4. Connectivity flood-fill seeds from entrance\n\n## Block Definition\n```json\n{\n  \"entrance\": {\n    \"name\": \"Entrance\",\n    \"category\": \"transit\",\n    \"traversability\": \"public\",\n    \"size\": [1, 1, 1],\n    \"cost\": 500,\n    \"sprite\": \"res://assets/sprites/blocks/entrance.png\",\n    \"connects_horizontal\": true,\n    \"connects_vertical\": false,\n    \"ground_only\": true,\n    \"description\": \"Main entrance to the arcology. All paths must connect here.\"\n  }\n}\n```\n\n## Implementation Details\n1. Add `ground_only: true` property to block definition\n2. Placement validation rejects entrance blocks at Z \u003e 0\n3. Grid maintains `entrance_positions: Array[Vector3i]`\n4. When entrance placed: add to list, recalculate connectivity\n5. When entrance removed: remove from list, recalculate connectivity\n\n## ðŸ“š Required Reading\n- `documentation/architecture/milestones/milestone-3-connectivity.md`\n- `documentation/game-design/blocks/README.md`\n- `documentation/game-design/core-concepts.md#connectivity`\n\n## Acceptance Criteria\n- [ ] `entrance` block type exists in blocks.json\n- [ ] Entrance has `ground_only: true` property\n- [ ] Can only place entrance at Z=0\n- [ ] Placement at Z\u003e0 is rejected with feedback\n- [ ] Grid tracks entrance positions\n- [ ] Connectivity calculated from entrance position\n- [ ] Removing entrance updates connectivity","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:43.59914-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:40:56.270916-06:00","closed_at":"2026-01-25T19:40:56.270916-06:00","close_reason":"Entrance tracking implemented with 10 unit tests","dependencies":[{"issue_id":"arcology-itx.3","depends_on_id":"arcology-itx","type":"parent-child","created_at":"2026-01-25T14:57:43.603069-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-itx.3","depends_on_id":"arcology-x0d.4","type":"blocks","created_at":"2026-01-25T17:43:12.332761-06:00","created_by":"danielbarrett"}],"comments":[{"id":7,"issue_id":"arcology-itx.3","author":"danielbarrett","text":"## Requirements Questions (from PRD Section 6)\n\n**Entrance is critical - it's where the outside world connects:**\n\n1. **PRD says Grand Terminal is the main entrance:**\n   - Must be at Z=0 (ground level)\n   - Must touch exterior (edge of map or exterior face)\n   - All connectivity flows from here\n\n2. **Multiple entrances?**\n   - Can there be multiple entrances?\n   - Do they all count as \"connected to outside\"?\n   - Or is there ONE primary entrance?\n\n3. **Entrance capacity:**\n   - PRD mentions \"transit capacity\" for immigration\n   - Does entrance have a throughput limit?\n\n**Questions:**\n1. For M3, is entrance just a marker for \"start BFS here\"?\n2. Can entrance be demolished? What happens to connectivity?\n3. Do we need entrance on all 4 sides of map, or just one?\n4. Is entrance a corridor subtype or distinct block type?\n\n## Proposed scope for M3:\n- Single entrance block type\n- Must be Z=0 (enforce in placement)\n- One entrance required for connectivity to work\n- If no entrance exists, all blocks are \"unconnected\"\n- Entrance acts as BFS seed point","created_at":"2026-01-25T21:21:24Z"},{"id":10,"issue_id":"arcology-itx.3","author":"danielbarrett","text":"# Entrance Block Type\n\n## User Stories (from PRD Section 6, Appendix A.2)\n- US-6.1: As a player, I need an entrance block that connects my arcology to the outside world.\n- PRD: \"Grand Terminal is the main entrance... must be at Z=0 (ground level)\"\n\n## Requirements\n\n### Block Definition in blocks.json\n```json\n{\n  \"entrance\": {\n    \"id\": \"entrance\",\n    \"name\": \"Entrance\",\n    \"category\": \"transit\",\n    \"size\": [1, 1, 1],\n    \"traversability\": \"PUBLIC\",\n    \"sprites\": {\n      \"base\": \"entrance.svg\"\n    },\n    \"placement_rules\": {\n      \"z_level\": 0,\n      \"requires_edge\": false\n    },\n    \"description\": \"Main entry point connecting arcology to outside world\"\n  }\n}\n```\n\n### Placement Rules\n1. **Z-Level Constraint:** Must be placed at Z=0 (ground level)\n2. **Single Entrance (M3):** Only one entrance allowed per arcology\n3. **Connectivity Seed:** Grid stores `entrance_position` for BFS\n\n### Grid Integration\n```gdscript\n# In Grid class:\nvar entrance_position: Vector3i = Vector3i(-1, -1, -1)  # invalid until placed\n\nfunc place_entrance(pos: Vector3i) -\u003e bool:\n    if pos.z != 0:\n        return false  # Must be ground level\n    if entrance_position != Vector3i(-1, -1, -1):\n        return false  # Already have entrance\n    # Place and update\n    entrance_position = pos\n    recalculate_connectivity()\n    return true\n```\n\n### Removal Behavior\n- If entrance is removed: ALL blocks become unconnected\n- Show prominent warning before allowing demolition\n- Connectivity recalculates to all false\n\n## Acceptance Criteria\n- [ ] Entrance block defined in blocks.json\n- [ ] Can only place at Z=0\n- [ ] Only one entrance allowed\n- [ ] Grid stores entrance position\n- [ ] Connectivity BFS seeds from entrance\n- [ ] Removing entrance marks all blocks unconnected\n- [ ] Entrance sprite created (64x32 isometric)\n\n## Out of Scope (Later Milestones)\n- Multiple entrances\n- Entrance capacity/throughput\n- Grand Terminal (mega entrance for Pop 10K+)","created_at":"2026-01-25T21:32:58Z"},{"id":27,"issue_id":"arcology-itx.3","author":"danielbarrett","text":"## ðŸ“š Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-3-connectivity.md](documentation/architecture/milestones/milestone-3-connectivity.md) - Entrance as seed\n2. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit block catalog\n3. [core-concepts.md#grid-architecture](documentation/game-design/core-concepts.md#grid-architecture) - Z=0 ground level\n\n**Key sections:**\n- Entrance placement: Z=0 only\n- Connectivity seed: milestone-3-connectivity.md#connectivity-calculation\n","created_at":"2026-01-25T22:04:48Z"}]}
{"id":"arcology-itx.4","title":"Show connectivity warning on disconnected blocks","description":"# Show Connectivity Warning on Disconnected Blocks\n\n## User Stories (from PRD)\n- **US-016**: As a player, I want to see which blocks are not connected to the entrance.\n\n## Overview\nBlocks that are not connected to an entrance cannot function - residents can't reach them, services can't be delivered. Players need clear visual feedback to identify and fix connectivity issues.\n\n## Requirements\n1. Disconnected blocks (`connected = false`) show warning indicator\n2. Connected blocks render normally\n3. Warning updates when connectivity changes\n4. Optional: Toggle connectivity overlay on/off\n\n## Visual Indicators (choose one or combine)\n- **Red tint**: `sprite.modulate = Color(1, 0.5, 0.5)` for disconnected\n- **Warning icon**: Overlay sprite showing âš ï¸ or broken link icon\n- **Pulsing effect**: Disconnected blocks pulse subtly\n\n## Implementation\n```gdscript\nfunc _update_connectivity_visuals(block: Block) -\u003e void:\n    var sprite = get_sprite_for_block(block)\n    if block.connected:\n        sprite.modulate = Color.WHITE\n        # Hide warning icon if using overlay\n    else:\n        sprite.modulate = Color(1, 0.5, 0.5)  # Red tint\n        # Show warning icon if using overlay\n```\n\n## Overlay Toggle (Optional for M3)\n- Press 'C' to toggle connectivity overlay\n- When on: all blocks show connected (green) or disconnected (red)\n- When off: only disconnected blocks show warning\n\n## ðŸ“š Required Reading\n- `documentation/architecture/milestones/milestone-3-connectivity.md`\n- `documentation/ui/overlays.md` (if exists)\n\n## Acceptance Criteria\n- [ ] Disconnected blocks visually distinct from connected\n- [ ] Red tint OR warning icon shows on disconnected blocks\n- [ ] Connected blocks render normally (no tint/icon)\n- [ ] Visual updates when blocks added/removed\n- [ ] Visual updates when connectivity recalculated\n- [ ] (Optional) 'C' key toggles connectivity overlay","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:48.063764-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:58:14.306921-06:00","closed_at":"2026-01-25T19:58:14.306921-06:00","close_reason":"Implemented red tint visual feedback for disconnected blocks with 10 unit tests","dependencies":[{"issue_id":"arcology-itx.4","depends_on_id":"arcology-itx","type":"parent-child","created_at":"2026-01-25T14:57:48.083321-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-itx.4","depends_on_id":"arcology-itx.2","type":"blocks","created_at":"2026-01-25T17:43:12.652671-06:00","created_by":"danielbarrett"}],"comments":[{"id":11,"issue_id":"arcology-itx.4","author":"danielbarrett","text":"# Connectivity Warning Visual\n\n## User Stories (from PRD Section 17)\n- US-17.9: As a player, I want to see if a block placement will succeed before I commit.\n- US-11.8: As a player, I want warnings/alerts when systems are failing or approaching limits.\n\n## Requirements\n\n### Visual Indicator\n1. **Disconnected blocks show warning overlay:**\n   - Red/orange exclamation icon\n   - Positioned top-right of block sprite\n   - Semi-transparent, doesn't obscure block\n\n2. **Icon Sprite:**\n   - 16x16 pixel warning icon\n   - Path: `assets/sprites/ui/warning_disconnected.svg`\n\n### Implementation\n```gdscript\n# In block rendering:\nfunc update_visual() -\u003e void:\n    var warning_sprite = $WarningIcon\n    warning_sprite.visible = not block.connected\n```\n\n### Placement Preview\n- When hovering to place a block:\n- Show ghost preview of block\n- If block would be disconnected, show warning in preview\n- \"This block will not be connected to the entrance\"\n\n### Overlay Toggle\n- Part of accessibility overlay system (M later)\n- For M3: always visible on disconnected blocks\n\n## Acceptance Criteria\n- [ ] Disconnected blocks show warning icon\n- [ ] Warning icon is 16x16 SVG\n- [ ] Warning only shows when `block.connected == false`\n- [ ] Warning visible but not obstructive\n- [ ] Placement preview indicates if block will be disconnected\n\n## Visual Design\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   Block      â”‚ âš ï¸  \u003c- warning icon (red/orange)\nâ”‚   Sprite     â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Out of Scope\n- Detailed tooltip explaining why disconnected\n- Auto-fix suggestions\n- Path visualization to show what's missing","created_at":"2026-01-25T21:33:55Z"},{"id":28,"issue_id":"arcology-itx.4","author":"danielbarrett","text":"## ðŸ“š Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-3-connectivity.md#visual-feedback](documentation/architecture/milestones/milestone-3-connectivity.md) - Warning icons\n2. [ui/overlays.md](documentation/ui/overlays.md) - Overlay system\n\n**Key sections:**\n- update_connection_visual(): milestone-3-connectivity.md#unconnected-warning\n- Connectivity overlay: milestone-3-connectivity.md#connectivity-overlay-optional\n","created_at":"2026-01-25T22:04:48Z"}]}
{"id":"arcology-itx.5","title":"Add stairs block type","description":"# Add Stairs Block Type\n\n## Overview\nStairs are vertical connectors that bridge adjacent floors (Z and Z+1). They enable the connectivity flood-fill to traverse between floors, making upper levels reachable from the entrance.\n\n## Requirements\n1. Add `stairs` block type to `data/blocks.json`\n2. Stairs connect current floor to floor above (Z to Z+1)\n3. Update connectivity algorithm to traverse through stairs\n4. Visual sprite distinguishes stairs from other blocks\n\n## Block Definition\n```json\n{\n  \"stairs\": {\n    \"name\": \"Stairs\",\n    \"size\": [1, 1, 1],\n    \"cost\": 200,\n    \"category\": \"transit\",\n    \"traversable\": true,\n    \"connects_vertical\": true,\n    \"vertical_range\": 1,\n    \"sprite\": \"res://assets/sprites/blocks/stairs.png\"\n  }\n}\n```\n\n## Connection Logic\nFrom `milestone-3-connectivity.md`:\n```gdscript\nfunc connects_vertical(direction: int) -\u003e bool:\n    match block_type:\n        \"stairs\":\n            return true  # Connects up and down\n        _:\n            return false\n```\n\n## How It Works\n1. Stairs at position (x, y, z) connects to:\n   - Block at (x, y, z+1) above\n   - Block at (x, y, z-1) below\n2. Connectivity flood-fill follows these vertical connections\n3. Upper floor blocks become reachable via stairs\n\n## ðŸ“š Required Reading\n- `documentation/architecture/milestones/milestone-3-connectivity.md` - Connection rules, code samples\n- `documentation/game-design/blocks/README.md` - Block catalog\n\n## Acceptance Criteria\nFrom milestone-3-connectivity.md:\n- [ ] `stairs` block type exists in blocks.json\n- [ ] Stairs connect to floor above and below\n- [ ] Connectivity flood-fill traverses through stairs vertically\n- [ ] Upper floor blocks reachable via stairs are marked connected\n- [ ] Stair sprite visually distinct from other blocks","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:52.656196-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T20:00:15.98282-06:00","closed_at":"2026-01-25T20:00:15.98282-06:00","close_reason":"Already implemented: stairs block type exists in blocks.json with sprite and vertical connectivity is tested in test_connectivity_integration.gd","dependencies":[{"issue_id":"arcology-itx.5","depends_on_id":"arcology-itx","type":"parent-child","created_at":"2026-01-25T14:57:52.663462-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-itx.5","depends_on_id":"arcology-itx.2","type":"blocks","created_at":"2026-01-25T17:43:12.756991-06:00","created_by":"danielbarrett"}],"comments":[{"id":8,"issue_id":"arcology-itx.5","author":"danielbarrett","text":"## Requirements Questions (from PRD Appendix A)\n\n**PRD defines stairs:**\n- Range: Â±3 floors\n- Speed: 0.5x (slow)\n- Capacity: Low\n- Power: 0\n\n**Key design questions:**\n\n1. **Does a stair block occupy 1 cell or 2?**\n   - Option A: 1 cell at Z, connects to Z+1 (stair is \"magic portal\")\n   - Option B: 2 cells (Z and Z+1), physically spans floors\n   - Option C: 1 cell at Z, but the cell above must be empty/stair-compatible\n\n2. **Stair orientation:**\n   - Does a stair face a direction (N/S/E/W)?\n   - Can you enter from any side, or specific sides?\n\n3. **Stair placement rules:**\n   - Can stairs be built in mid-air? (Probably not)\n   - Must stairs have a corridor/block adjacent at both levels?\n\n4. **Bidirectional?**\n   - Stairs connect Zâ†”Z+1, not just Zâ†’Z+1?\n\n## Proposed implementation:\n- Stairs occupy 1 cell\n- Connect Z to Z+1 bidirectionally\n- Entry from horizontal neighbors at both levels\n- Placement requires floor below (support) or adjacent block","created_at":"2026-01-25T21:24:50Z"},{"id":12,"issue_id":"arcology-itx.5","author":"danielbarrett","text":"# Stairs Block Type\n\n## User Stories (from PRD Section 6.5, Appendix A.2)\n- US-6.5: As a player, I want stairs as vertical transit for basic floor-to-floor movement.\n- PRD: \"Stairs: Range Â±3 floors, Speed 0.5x, Capacity Low, Power 0\"\n\n## Requirements\n\n### Block Definition in blocks.json\n```json\n{\n  \"stairs\": {\n    \"id\": \"stairs\",\n    \"name\": \"Stairs\",\n    \"category\": \"transit\",\n    \"size\": [1, 1, 1],\n    \"traversability\": \"PUBLIC\",\n    \"vertical_connection\": {\n      \"type\": \"stairs\",\n      \"range\": [-1, 1],\n      \"speed_multiplier\": 0.5,\n      \"power\": 0\n    },\n    \"sprites\": {\n      \"base\": \"stairs.svg\"\n    },\n    \"description\": \"Basic vertical transit connecting adjacent floors\"\n  }\n}\n```\n\n### Vertical Connection Model (M3 Scope)\n1. **Single-cell block** at position (x, y, z)\n2. **Connects to Z+1 and Z-1** if:\n   - There's a traversable block at that level\n   - OR there's another stairs block creating a chain\n\n3. **Bidirectional:** Can go up or down\n\n### Connectivity Integration\n```gdscript\n# In Grid.get_connected_neighbors():\nfunc get_vertical_neighbors(pos: Vector3i) -\u003e Array[Vector3i]:\n    var neighbors = []\n    var block = get_block_at(pos)\n    \n    if block and block.type == \"stairs\":\n        # Check above\n        var above = pos + Vector3i(0, 0, 1)\n        if get_block_at(above):\n            neighbors.append(above)\n        # Check below  \n        var below = pos + Vector3i(0, 0, -1)\n        if get_block_at(below):\n            neighbors.append(below)\n    \n    return neighbors\n```\n\n### Placement Rules\n1. Must have adjacent corridor/block on at least one horizontal side\n2. Floor above or below should exist (warning if floating)\n3. No placement restrictions on Z level\n\n## Acceptance Criteria\n- [ ] Stairs defined in blocks.json with vertical_connection\n- [ ] Connectivity BFS traverses through stairs to ZÂ±1\n- [ ] Stairs sprite created (64x32 isometric showing steps)\n- [ ] Can chain multiple stairs (Z to Z+1 to Z+2)\n- [ ] Bidirectional: up and down both work\n\n## Sprite Notes\n- Show ascending stairs going \"into\" the screen (isometric depth)\n- Visual should suggest vertical movement\n- Gray/neutral color to match placeholder aesthetic\n\n## Out of Scope (Later Milestones)\n- Â±3 floor range (full PRD spec)\n- Speed multiplier (weighted pathfinding - M6)\n- Escalators (Tech Level 2)","created_at":"2026-01-25T21:34:13Z"},{"id":29,"issue_id":"arcology-itx.5","author":"danielbarrett","text":"## ðŸ“š Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-3-connectivity.md#new-block-definitions](documentation/architecture/milestones/milestone-3-connectivity.md) - Stairs JSON\n2. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Stairs specs\n3. [transit/elevators.md](documentation/game-design/transit/elevators.md) - Vertical transit\n\n**Key sections:**\n- Stairs JSON: milestone-3-connectivity.md#datablocksjson-additions\n- connects_vertical(): milestone-3-connectivity.md#block-types-for-vertical-connection\n- Speed 0.5x, Range Â±3: blocks/transit.md\n","created_at":"2026-01-25T22:04:48Z"}]}
{"id":"arcology-itx.6","title":"Add elevator shaft block type","description":"# Add Elevator Shaft Block Type\n\n## Overview\nElevator shafts are vertical connectors that span multiple floors. Unlike stairs (which connect only Â±1 floor), elevator shafts connect ALL floors they occupy, enabling fast vertical transit across the entire structure.\n\n## Requirements\n1. Add `elevator_shaft` block type to `data/blocks.json`\n2. Vertical stack of elevator shafts connects all floors it spans\n3. Update connectivity algorithm to traverse through elevator shafts\n4. Visual sprite distinguishes elevators from other blocks\n\n## Block Definition\n```json\n{\n  \"elevator_shaft\": {\n    \"name\": \"Elevator Shaft\",\n    \"size\": [1, 1, 1],\n    \"cost\": 500,\n    \"category\": \"transit\",\n    \"traversable\": true,\n    \"connects_vertical\": true,\n    \"vertical_range\": 10,\n    \"sprite\": \"res://assets/sprites/blocks/elevator.png\"\n  }\n}\n```\n\n## Connection Logic\nFrom `milestone-3-connectivity.md`:\n```gdscript\nfunc connects_vertical(direction: int) -\u003e bool:\n    match block_type:\n        \"elevator_shaft\":\n            return true  # Connects up and down\n        _:\n            return false\n```\n\n## How It Works\n1. Elevator shaft at (x, y, z) connects to elevator shaft at (x, y, zÂ±1)\n2. A vertical stack of elevator shafts creates a continuous connection\n3. All floors spanned by the elevator stack are connected\n4. Must stack elevator shafts vertically to create working elevator\n\n## Building Pattern\n```\nFloor 5: [elevator_shaft] â† connected\nFloor 4: [elevator_shaft] â† connected\nFloor 3: [elevator_shaft] â† connected\nFloor 2: (empty)          â† NOT connected (gap breaks elevator)\nFloor 1: [elevator_shaft] â† connected only to floor 0\nFloor 0: [entrance]       â† start\n```\n\n## ðŸ“š Required Reading\n- `documentation/architecture/milestones/milestone-3-connectivity.md` - Connection rules, code samples\n- `documentation/game-design/blocks/README.md` - Block catalog\n\n## Acceptance Criteria\nFrom milestone-3-connectivity.md:\n- [ ] `elevator_shaft` block type exists in blocks.json\n- [ ] Elevator shafts connect all floors they span\n- [ ] Connectivity flood-fill traverses through elevator shaft stack\n- [ ] Gap in elevator stack breaks vertical connection\n- [ ] Elevator sprite visually distinct from stairs","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:56.997959-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T20:00:24.461734-06:00","closed_at":"2026-01-25T20:00:24.461734-06:00","close_reason":"Already implemented: elevator_shaft block type exists in blocks.json with sprite and vertical connectivity is tested in test_connectivity_integration.gd","dependencies":[{"issue_id":"arcology-itx.6","depends_on_id":"arcology-itx","type":"parent-child","created_at":"2026-01-25T14:57:57.002436-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-itx.6","depends_on_id":"arcology-itx.2","type":"blocks","created_at":"2026-01-25T17:43:12.867468-06:00","created_by":"danielbarrett"}],"comments":[{"id":13,"issue_id":"arcology-itx.6","author":"danielbarrett","text":"# Elevator Shaft Block Type\n\n## User Stories (from PRD Section 6.5, 19.8, Appendix A.2)\n- US-6.5: As a player, I want elevators for efficient vertical transit.\n- PRD: \"Elevator (Local): Range Â±10 floors, Speed 3.0x, Capacity Medium, Power 10 units/floor\"\n\n## Requirements\n\n### Block Definition in blocks.json\n```json\n{\n  \"elevator_shaft\": {\n    \"id\": \"elevator_shaft\",\n    \"name\": \"Elevator Shaft\",\n    \"category\": \"transit\",\n    \"size\": [1, 1, 1],\n    \"traversability\": \"PUBLIC\",\n    \"vertical_connection\": {\n      \"type\": \"elevator\",\n      \"connects_all_in_stack\": true,\n      \"speed_multiplier\": 3.0,\n      \"power_per_floor\": 10\n    },\n    \"sprites\": {\n      \"base\": \"elevator_shaft.svg\"\n    },\n    \"placement_rules\": {\n      \"must_stack_vertically\": true\n    },\n    \"description\": \"Vertical transit shaft - stack multiple to connect floors\"\n  }\n}\n```\n\n### Elevator Stack Model (M3 Scope)\n1. **Vertical stack:** Multiple elevator_shaft blocks stacked on same (x, y)\n2. **All connected:** Every floor in the stack connects to every other floor\n3. **No cars/wait time yet:** Abstract as \"teleport within stack\"\n\n### Connectivity Integration\n```gdscript\n# Elevator shaft creates connections to ALL blocks in its vertical stack\nfunc get_elevator_stack(pos: Vector3i) -\u003e Array[Vector3i]:\n    var stack = []\n    var x = pos.x\n    var y = pos.y\n    \n    # Scan up and down for continuous elevator_shaft blocks\n    # Up\n    var z = pos.z\n    while true:\n        var check = Vector3i(x, y, z)\n        var block = get_block_at(check)\n        if block and block.type == \"elevator_shaft\":\n            stack.append(check)\n            z += 1\n        else:\n            break\n    # Down\n    z = pos.z - 1\n    while z \u003e= min_z:\n        var check = Vector3i(x, y, z)\n        var block = get_block_at(check)\n        if block and block.type == \"elevator_shaft\":\n            stack.append(check)\n            z -= 1\n        else:\n            break\n    \n    return stack\n```\n\n### Connectivity Rules\n- All positions in elevator stack are mutually connected\n- Must have horizontal neighbor (corridor) at entry/exit floors\n- BFS treats elevator stack as fully connected subgraph\n\n### Placement Rules\n1. **Stack requirement:** Should stack with existing elevator_shaft OR start new stack\n2. **Horizontal access:** At least top or bottom needs adjacent corridor\n\n## Acceptance Criteria\n- [ ] Elevator shaft defined in blocks.json\n- [ ] Stacked shafts connect all floors they span\n- [ ] Connectivity BFS can traverse elevator stacks\n- [ ] Sprite created (64x32 isometric elevator doors)\n- [ ] Can place elevator and reach upper floors\n\n## Sprite Notes\n- Show elevator doors (closed)\n- Metallic/industrial look\n- Should visually differ from stairs\n\n## Out of Scope (Later Milestones)\n- Elevator cars and wait time simulation\n- Capacity limits\n- Express elevators (Â±30 floors)\n- Power consumption\n- Sky Lobbies","created_at":"2026-01-25T21:34:25Z"},{"id":30,"issue_id":"arcology-itx.6","author":"danielbarrett","text":"## ðŸ“š Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-3-connectivity.md#new-block-definitions](documentation/architecture/milestones/milestone-3-connectivity.md) - Elevator JSON\n2. [transit/elevators.md](documentation/game-design/transit/elevators.md) - Full elevator spec\n3. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit block catalog\n\n**Key sections:**\n- Elevator JSON: milestone-3-connectivity.md#datablocksjson-additions\n- Stack connects all floors: milestone-3-connectivity.md\n- Speed 3.0x, Range Â±10: transit/elevators.md\n","created_at":"2026-01-25T22:04:49Z"}]}
{"id":"arcology-j61","title":"UX: Build mode needs better floor level feedback or auto-stacking","description":"**UX: Build mode floor feedback + auto-stacking**\n\nImplement BOTH visual feedback AND smart placement for faster building.\n\n## Part 1: Visual Floor Indicator\n- Grid overlay or subtle highlight showing active build floor\n- Ghost preview clearly shows target Z level\n- Floor number visible near cursor or in HUD\n\n## Part 2: Auto-Stacking (Shift+Click)\n- Normal click: place at current floor (existing behavior)\n- Shift+click: auto-stack on top of existing blocks\n- Finds highest Z at that X,Y position, places at Z+1\n- Still respect floor selector for underground building\n\n## Current behavior:\n- Must use PageUp/PageDown to change floors\n- No visual indication of which floor is active\n- Easy to accidentally click on occupied cells\n\n## Acceptance Criteria:\n- [ ] Visual indicator shows current build floor\n- [ ] Ghost preview shows Z level\n- [ ] Shift+click auto-stacks on top of blocks\n- [ ] Fast building workflow without constant floor switching\n\nRequired Reading:\n- src/ui/input_handler.gd\n- src/core/block_renderer.gd\n- documentation/architecture/milestones/milestone-2-floor-navigation.md","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T20:09:11.039987-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T20:25:45.591389-06:00","closed_at":"2026-01-25T20:25:45.591389-06:00","close_reason":"Implemented floor feedback and auto-stacking"}
{"id":"arcology-jin","title":"Milestone 1 - Grid \u0026 Blocks","description":"Core grid system and block placement","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-25T15:05:33.133072-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:13:47.743899-06:00","closed_at":"2026-01-25T15:13:47.743899-06:00","close_reason":"Duplicate epic","comments":[{"id":54,"issue_id":"arcology-jin","author":"danielbarrett","text":"## ðŸ“š Milestone Documentation\n\n**Primary doc:** [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md)\n\n**Supporting docs:**\n- [core-concepts.md](documentation/game-design/core-concepts.md) - Block fundamentals\n- [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n- [blocks/](documentation/game-design/blocks/) - Block catalog\n\nAll tasks in this epic MUST reference the milestone doc before starting work.\n","created_at":"2026-01-25T22:05:56Z"}]}
{"id":"arcology-n2e","title":"Block registry with JSON loading","description":"\nCreate BlockRegistry singleton (src/core/block_registry.gd):\n- Loads data/blocks.json at startup\n- get_block_data(type_id) -\u003e Dictionary\n- Create data/blocks.json with 4 types: corridor, residential, commercial, industrial\nAcceptance: Can query block properties by type ID.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T15:05:34.047324-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:47.59713-06:00","closed_at":"2026-01-25T15:16:47.59713-06:00","close_reason":"Duplicate of arcology-x0d.3","dependencies":[{"issue_id":"arcology-n2e","depends_on_id":"arcology-x0d.2","type":"blocks","created_at":"2026-01-25T15:05:36.858058-06:00","created_by":"danielbarrett"}],"comments":[{"id":38,"issue_id":"arcology-n2e","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid \u0026 Blocks\n2. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n3. [core-concepts.md](documentation/game-design/core-concepts.md) - Block types\n","created_at":"2026-01-25T22:05:22Z"}]}
{"id":"arcology-s8v","title":"Click to place blocks","description":"\nImplement block placement:\n- screen_to_grid() conversion (inverse of grid_to_screen)\n- Left-click places current block type at mouse position\n- Uses current floor level for Z\n- Ghost preview before placement\nAcceptance: Can click to place blocks on the grid.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T15:05:34.530793-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:47.921531-06:00","closed_at":"2026-01-25T15:16:47.921531-06:00","close_reason":"Duplicate of arcology-x0d.6","dependencies":[{"issue_id":"arcology-s8v","depends_on_id":"arcology-1ql","type":"blocks","created_at":"2026-01-25T15:05:37.412824-06:00","created_by":"danielbarrett"}],"comments":[{"id":40,"issue_id":"arcology-s8v","author":"danielbarrett","text":"## ðŸ“š Documentation Reference\n\n**Relevant docs:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid \u0026 Blocks\n2. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n3. [core-concepts.md](documentation/game-design/core-concepts.md) - Block types\n","created_at":"2026-01-25T22:05:22Z"}]}
{"id":"arcology-x0d","title":"M1: Grid \u0026 Blocks","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-25T14:55:14.454482-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T21:33:09.94182-06:00","closed_at":"2026-01-25T21:33:09.94182-06:00","close_reason":"All tasks completed","comments":[{"id":53,"issue_id":"arcology-x0d","author":"danielbarrett","text":"## ðŸ“š Milestone Documentation\n\n**Primary doc:** [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md)\n\n**Supporting docs:**\n- [core-concepts.md](documentation/game-design/core-concepts.md) - Block fundamentals\n- [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n- [blocks/](documentation/game-design/blocks/) - Block catalog\n\nAll tasks in this epic MUST reference the milestone doc before starting work.\n","created_at":"2026-01-25T22:05:56Z"}]}
{"id":"arcology-x0d.1","title":"Implement Grid class","description":"# Grid Data Structure\n\n## Overview\nThe Grid is the core data structure storing all blocks in a sparse 3D dictionary. It provides coordinate conversion between grid space (Vector3i) and screen space (Vector2) for isometric rendering.\n\n## Requirements\n1. Sparse 3D dictionary storing Block references by Vector3i position\n2. Constants: TILE_WIDTH=64, TILE_HEIGHT=32, FLOOR_HEIGHT=24\n3. Methods:\n   - set_block(pos: Vector3i, block: Block) -\u003e void\n   - get_block(pos: Vector3i) -\u003e Block or null\n   - remove_block(pos: Vector3i) -\u003e void\n   - has_block(pos: Vector3i) -\u003e bool\n   - get_all_blocks() -\u003e Array[Block]\n4. Coordinate conversion:\n   - grid_to_screen(pos: Vector3i) -\u003e Vector2\n   - screen_to_grid(screen_pos: Vector2, z_level: int) -\u003e Vector3i\n5. Signals:\n   - block_added(pos: Vector3i, block: Block)\n   - block_removed(pos: Vector3i)\n\n## Isometric Math\nFrom `milestone-1-grid-blocks.md`:\n```gdscript\nfunc grid_to_screen(pos: Vector3i) -\u003e Vector2:\n    var x = (pos.x - pos.y) * (TILE_WIDTH / 2)\n    var y = (pos.x + pos.y) * (TILE_HEIGHT / 2) - pos.z * FLOOR_HEIGHT\n    return Vector2(x, y)\n```\n\n## ðŸ“š Required Reading\n- `documentation/architecture/milestones/milestone-1-grid-blocks.md` - Grid code samples\n- `documentation/quick-reference/isometric-math.md` - Full conversion formulas\n- `documentation/game-design/core-concepts.md#grid-architecture` - Grid design\n\n## Acceptance Criteria\nFrom milestone-1-grid-blocks.md:\n- [ ] Grid stores blocks by Vector3i position\n- [ ] Can store and retrieve blocks by Vector3i position\n- [ ] grid_to_screen returns correct isometric coordinates\n- [ ] screen_to_grid inverts correctly for given Z level\n- [ ] Signals emit on add/remove\n- [ ] Unit test: round-trip grid_to_screen â†’ screen_to_grid = identity\n\n## Out of Scope (M1)\n- Multi-cell blocks (defer to M4)\n- Environment caching (defer to M5)\n- Vertical bounds enforcement (defer)","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T14:56:17.402719-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T17:51:38.684427-06:00","closed_at":"2026-01-25T17:51:38.684427-06:00","close_reason":"Implemented Grid class with sparse 3D storage, isometric conversion, signals, and unit tests","dependencies":[{"issue_id":"arcology-x0d.1","depends_on_id":"arcology-x0d","type":"parent-child","created_at":"2026-01-25T14:56:17.409922-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.1","depends_on_id":"arcology-4ct.1","type":"blocks","created_at":"2026-01-25T14:58:28.158597-06:00","created_by":"danielbarrett"}],"comments":[{"id":1,"issue_id":"arcology-x0d.1","author":"danielbarrett","text":"## Requirements Questions (from PRD review)\n\n**1. Multi-cell blocks:** PRD Section 3.1 says blocks can be 1x1, 2x2, 3x3, or mega (5x5). Does Grid need to handle multi-cell footprints now, or defer to M4+?\n\n**2. Environment storage:** PRD says blocks have computed values (sunlight, air_quality, safety, vibes, noise). Should Grid store these per-cell, or is that a separate EnvironmentCache system?\n\n**3. Pathfinding graph:** PRD Section 6 says pathfinding uses a node graph separate from the voxel grid. Should Grid expose neighbor connectivity, or is that a separate PathGraph class?\n\n**4. Vertical bounds:** PRD Section 2.2 says maps have max_height and max_depth. Should Grid enforce these limits?\n\n**5. screen_to_grid ambiguity:** The inverse isometric transform is not unique - a screen point maps to a ray through 3D space. How do we resolve Z? Use current viewing floor? Raycast to find topmost block?\n\n## Proposed scope for M1:\n- 1x1 blocks only (defer multi-cell to M4)\n- No environment storage (defer to M5)\n- Basic neighbor queries (6 directions)\n- No vertical bounds enforcement (defer)\n- screen_to_grid uses current_floor for Z","created_at":"2026-01-25T21:17:40Z"},{"id":14,"issue_id":"arcology-x0d.1","author":"danielbarrett","text":"## ðŸ“š Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid class spec\n2. [core-concepts.md#grid-architecture](documentation/game-design/core-concepts.md#grid-architecture) - Grid design philosophy\n3. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate conversion formulas\n\n**Key sections:**\n- Grid class code template: `milestone-1-grid-blocks.md#gridgd`\n- Sparse Dictionary pattern: `core-concepts.md#grid-architecture`\n- `grid_to_screen()` and `screen_to_grid()`: `isometric-math.md`\n\n**After completing, verify against:**\n- Acceptance criteria in `milestone-1-grid-blocks.md#acceptance-criteria`\n","created_at":"2026-01-25T22:03:00Z"}]}
{"id":"arcology-x0d.2","title":"Implement Block base class","description":"# Block Base Class\n\n## Overview\nBlock is a lightweight data holder for individual placed blocks. All static properties (cost, size, traversability) come from BlockRegistry lookup by block_type, keeping Block instances small.\n\n## Requirements\n1. Simple RefCounted class (not Node) for data storage\n2. Properties:\n   - grid_position: Vector3i (where in the grid)\n   - block_type: String (key into BlockRegistry)\n   - connected: bool (reachable from entrance, default false)\n3. Computed properties (lookup from BlockRegistry):\n   - get_definition() -\u003e Dictionary (full block data)\n   - get_traversability() -\u003e String (\"public\" or \"private\")\n   - get_sprite_path() -\u003e String\n4. Signals:\n   - property_changed(property_name: String)\n\n## Key Code\nFrom `milestone-1-grid-blocks.md`:\n```gdscript\nclass_name Block\nextends RefCounted\n\nvar grid_position: Vector3i\nvar block_type: String\nvar sprite: Sprite2D\n\nfunc _init(type: String, pos: Vector3i):\n    block_type = type\n    grid_position = pos\n```\n\n## Design Decision\nBlock is a data holder, not a Node. All static properties come from BlockRegistry. This enables:\n- Small memory footprint per block\n- Hot-reloading block definitions\n- Easy serialization\n\n## ðŸ“š Required Reading\n- `documentation/architecture/milestones/milestone-1-grid-blocks.md` - Block code sample\n- `documentation/game-design/core-concepts.md#block-types` - Block types overview\n- `documentation/game-design/blocks/README.md` - Block catalog\n\n## Acceptance Criteria\n- [ ] Can instantiate Block with position and type\n- [ ] Can query block_type and grid_position\n- [ ] get_definition() returns data from BlockRegistry\n- [ ] connected property is readable/writable\n- [ ] Signals fire when properties change\n\n## Out of Scope (M1)\n- Environment values (sunlight, air, etc.) - M5\n- Occupancy/rent - M7\n- Upgrade levels - M8","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T14:56:24.376617-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T18:04:00.514338-06:00","closed_at":"2026-01-25T18:04:00.514338-06:00","close_reason":"Implemented Block class with properties, signals, and BlockRegistry integration","dependencies":[{"issue_id":"arcology-x0d.2","depends_on_id":"arcology-x0d","type":"parent-child","created_at":"2026-01-25T14:56:24.401231-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.2","depends_on_id":"arcology-4ct.1","type":"blocks","created_at":"2026-01-25T14:58:32.530531-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.2","depends_on_id":"arcology-7s2","type":"blocks","created_at":"2026-01-25T15:05:00.481924-06:00","created_by":"danielbarrett"}],"comments":[{"id":2,"issue_id":"arcology-x0d.2","author":"danielbarrett","text":"## Requirements Questions (from PRD Section 3.6)\n\n**PRD says Block needs:**\n- id, type, tags[], size, level, allocation\n- traversability (public/private)\n- entry_points (which sides can be entered)\n- traversal_speed, traversal_cost_modifier\n- build constraints (can_build_above, requires_below, clearance, etc.)\n- panels (wall materials per face)\n- environment values (sunlight, air_quality, safety, vibes, accessibility, noise)\n- economic (occupancy, rent, maintenance_cost)\n\n**Current ticket only has:**\n- grid_position, block_type, sprite reference, signals\n\n**Questions:**\n1. How much of the PRD Block model do we implement in M1? Full model or minimal?\n2. Should Block be a Resource (data) or Node (scene instance)?\n3. Do we need block_id or just use grid_position as key?\n\n## Proposed scope for M1:\n- grid_position: Vector3i\n- block_type: String (lookup in registry for full data)\n- All other properties come from BlockRegistry lookup\n- Block is a simple RefCounted class, not a Node","created_at":"2026-01-25T21:18:07Z"},{"id":15,"issue_id":"arcology-x0d.2","author":"danielbarrett","text":"## ðŸ“š Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-1-grid-blocks.md#blockgd](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Block class spec\n2. [core-concepts.md#block-types](documentation/game-design/core-concepts.md#block-types) - Block type philosophy\n3. [core-concepts.md#public-vs-private-blocks](documentation/game-design/core-concepts.md#public-vs-private-blocks) - Traversability\n\n**Key sections:**\n- Block class code template: milestone-1-grid-blocks.md#blockgd\n- PUBLIC vs PRIVATE: core-concepts.md#public-vs-private-blocks\n","created_at":"2026-01-25T22:03:41Z"}]}
{"id":"arcology-x0d.3","title":"Implement BlockRegistry","description":"# BlockRegistry - Load Block Definitions from JSON\n\n## Overview\nBlockRegistry is an autoload singleton that loads block definitions from `data/blocks.json` and provides lookup methods for block properties.\n\n## Requirements\n1. Autoload singleton (Project Settings \u003e AutoLoad)\n2. Loads data/blocks.json on _ready()\n3. Methods:\n   - get_block_data(type_id: String) -\u003e Dictionary\n   - get_all_types() -\u003e Array[String]\n   - has_type(type_id: String) -\u003e bool\n4. Block data schema (minimum for M1-M3):\n   ```json\n   {\n     \"type_id\": \"corridor\",\n     \"name\": \"Corridor\",\n     \"category\": \"transit\",\n     \"traversability\": \"public\",\n     \"size\": [1, 1, 1],\n     \"cost\": 50,\n     \"sprite\": \"res://assets/sprites/blocks/corridor.png\",\n     \"connects_horizontal\": true,\n     \"connects_vertical\": false\n   }\n   ```\n\n## Why Traversability Matters (M3)\nConnectivity flood-fill needs to know:\n- **public** blocks: can route THROUGH\n- **private** blocks: can route TO but not through\n\n## ðŸ“š Required Reading\n- `documentation/architecture/milestones/milestone-1-grid-blocks.md` - JSON schema, code sample\n- `documentation/game-design/blocks/README.md` - Block properties\n- `documentation/game-design/core-concepts.md#public-vs-private-blocks` - Traversability\n\n## Acceptance Criteria\nFrom milestone-1-grid-blocks.md:\n- [ ] Singleton accessible as BlockRegistry\n- [ ] Loads blocks.json without errors\n- [ ] get_block_data returns correct dictionary\n- [ ] Returns null/empty for unknown types\n- [ ] Block definitions load from JSON\n\n## Out of Scope (M1)\n- needs/produces arrays - M5\n- preconditions/unlocks - M7\n- upgrade levels - M8","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T14:56:29.572241-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T18:06:49.812053-06:00","closed_at":"2026-01-25T18:06:49.812053-06:00","close_reason":"Implemented BlockRegistry autoload with JSON loading and helper methods","dependencies":[{"issue_id":"arcology-x0d.3","depends_on_id":"arcology-x0d","type":"parent-child","created_at":"2026-01-25T14:56:29.579608-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.3","depends_on_id":"arcology-x0d.4","type":"blocks","created_at":"2026-01-25T14:58:36.765571-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.3","depends_on_id":"arcology-x0d.2","type":"blocks","created_at":"2026-01-25T14:58:40.803191-06:00","created_by":"danielbarrett"}],"comments":[{"id":3,"issue_id":"arcology-x0d.3","author":"danielbarrett","text":"## Requirements Questions (from PRD Appendix A)\n\n**PRD Block Catalog has 100+ block types with:**\n- Size, Needs (power/water/air/light/path), Preconditions\n- Produces (jobs, services, radius effects)\n- Unlocks, Tags, Traversability\n- Cost, maintenance\n\n**Current ticket only has:**\n- name, cost, category, sprite path\n\n**Questions:**\n1. What's the minimal schema for M1? Just enough for placement?\n2. Should we include traversability (public/private) now? It affects pathfinding design.\n3. Should blocks have \"needs\" array even if we don't check them yet?\n\n## Proposed M1 schema:\n```json\n{\n  \"corridor\": {\n    \"name\": \"Corridor\",\n    \"category\": \"transit\",\n    \"traversability\": \"public\",\n    \"size\": [1, 1, 1],\n    \"cost\": 50,\n    \"sprite\": \"corridor.png\"\n  }\n}\n```\n\n## Defer to later:\n- needs/produces (M5: environment)\n- preconditions/unlocks (M7: progression)\n- levels/upgrades (M8)","created_at":"2026-01-25T21:19:33Z"},{"id":16,"issue_id":"arcology-x0d.3","author":"danielbarrett","text":"## ðŸ“š Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - JSON structure\n2. [blocks/README.md](documentation/game-design/blocks/README.md) - Block catalog overview\n\n**Key sections:**\n- JSON schema: milestone-1-grid-blocks.md#datablocksjson\n- Block categories: blocks/README.md\n","created_at":"2026-01-25T22:03:41Z"}]}
{"id":"arcology-x0d.4","title":"Create blocks.json data file","description":"# Create blocks.json Data File\n\n## Overview\nThe blocks.json file defines all block types available in the game. Each block type specifies its properties: name, category, cost, traversability, and sprite path.\n\n## Requirements\nDefine 6 block types needed for M1-M3:\n\n### 1. corridor\n- category: transit\n- traversability: public\n- cost: 50\n- connects_horizontal: true\n- connects_vertical: false\n\n### 2. entrance  \n- category: transit\n- traversability: public\n- cost: 500\n- connects_horizontal: true\n- ground_only: true\n\n### 3. stairs\n- category: transit\n- traversability: public\n- cost: 200\n- connects_horizontal: true\n- connects_vertical: true (Z to Z+1)\n\n### 4. elevator_shaft\n- category: transit\n- traversability: public\n- cost: 500\n- connects_horizontal: false\n- connects_vertical: true (all Z in shaft)\n\n### 5. residential_basic\n- category: residential\n- traversability: private\n- cost: 500\n\n### 6. commercial_basic\n- category: commercial\n- traversability: private\n- cost: 800\n\n## JSON Schema\nFrom `milestone-1-grid-blocks.md`:\n```json\n{\n  \"corridor\": {\n    \"name\": \"Corridor\",\n    \"size\": [1, 1, 1],\n    \"cost\": 50,\n    \"category\": \"transit\",\n    \"traversable\": true,\n    \"sprite\": \"res://assets/sprites/blocks/corridor.png\"\n  }\n}\n```\n\n## ðŸ“š Required Reading\n- `documentation/architecture/milestones/milestone-1-grid-blocks.md` - JSON schema example\n- `documentation/architecture/milestones/milestone-3-connectivity.md` - Vertical connection properties\n- `documentation/game-design/blocks/README.md` - Block catalog\n\n## Acceptance Criteria\nFrom milestone-1-grid-blocks.md:\n- [ ] Valid JSON, no syntax errors\n- [ ] At least 6 block types defined\n- [ ] Each has: name, category, traversable, cost, sprite path\n- [ ] Entrance has ground_only: true\n- [ ] Stairs/elevator have connects_vertical: true\n- [ ] File at data/blocks.json","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T14:56:34.571553-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T17:56:24.944277-06:00","closed_at":"2026-01-25T17:56:24.944277-06:00","close_reason":"Created 6 block types with full schema for M1-M3","dependencies":[{"issue_id":"arcology-x0d.4","depends_on_id":"arcology-x0d","type":"parent-child","created_at":"2026-01-25T14:56:34.57969-06:00","created_by":"danielbarrett"}],"comments":[{"id":4,"issue_id":"arcology-x0d.4","author":"danielbarrett","text":"## Requirements Questions (from PRD Appendix A)\n\n**PRD has detailed block definitions. For M1, which blocks do we actually need?**\n\nLooking at M1-M3 features:\n- M1: Place/remove blocks, basic types\n- M2: Floor navigation  \n- M3: Connectivity (entrance, corridors, stairs, elevator)\n\n**Minimum viable blocks for M1-M3:**\n1. `corridor` - transit, connects horizontally\n2. `entrance` - connection to outside, must be Z=0\n3. `stairs` - vertical connector (Z to Z+1)\n4. `elevator_shaft` - vertical connector (multi-floor)\n5. `residential_basic` - destination block\n6. `commercial_basic` - destination block\n\n**Questions:**\n1. Do we need \"empty\" block type, or just absence of block = empty?\n2. Should entrance be a special corridor or distinct type?\n3. Do stairs span 2 cells vertically, or is it 1 cell that \"connects\" to Z+1?\n\n## Proposed blocks.json structure:\nInclude traversability now (affects M3 connectivity):\n- corridor: public, connects NSEW\n- stairs: public, connects Z to Z+1\n- elevator_shaft: public, connects vertically\n- entrance: public, must be Z=0\n- residential_basic: private, destination\n- commercial_basic: private, destination","created_at":"2026-01-25T21:20:02Z"},{"id":17,"issue_id":"arcology-x0d.4","author":"danielbarrett","text":"## ðŸ“š Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - JSON format\n2. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Corridor specs\n3. [blocks/residential.md](documentation/game-design/blocks/residential.md) - Housing specs\n4. [blocks/commercial.md](documentation/game-design/blocks/commercial.md) - Commercial specs\n","created_at":"2026-01-25T22:03:41Z"}]}
{"id":"arcology-x0d.5","title":"Setup isometric rendering with Y-sort","description":"# Setup Isometric Rendering with Y-Sort\n\n## Overview\nBlocks must render at correct isometric screen positions with proper depth sorting. Higher grid Y values render behind (further from camera), and higher Z values (floors) render above.\n\n## Requirements\n1. Block container node with y_sort_enabled = true\n2. Sprite positioning uses Grid.grid_to_screen()\n3. Z-ordering rules:\n   - Higher grid Y = renders behind (further from camera)\n   - Higher grid Z = renders above (stacked floors)\n   - Formula: sprite.z_index = pos.x + pos.y + pos.z * 100\n4. When blocks added/removed, sprites update positions\n\n## Implementation\n```gdscript\n# In BlockRenderer or similar\nfunc _update_sprite_position(block: Block, sprite: Sprite2D) -\u003e void:\n    sprite.position = Grid.grid_to_screen(block.grid_position)\n    sprite.z_index = _calculate_z_index(block.grid_position)\n\nfunc _calculate_z_index(pos: Vector3i) -\u003e int:\n    return pos.x + pos.y + pos.z * 100\n```\n\n## ðŸ“š Required Reading\n- `documentation/architecture/milestones/milestone-1-grid-blocks.md` - Rendering requirements\n- `documentation/quick-reference/isometric-math.md` - Coordinate conversions\n- `documentation/game-design/core-concepts.md#grid-architecture` - Grid system\n\n## Acceptance Criteria\nFrom milestone-1-grid-blocks.md:\n- [ ] Blocks appear at correct isometric positions\n- [ ] Blocks at (0,0,0) and (1,1,0) render with correct overlap\n- [ ] Block at (0,0,1) renders above block at (0,0,0)\n- [ ] Y-sorting works for blocks at same Z level\n- [ ] Blocks stack visually (higher Z appears in front of lower Y)\n- [ ] No z-fighting between adjacent blocks","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T14:56:39.267482-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T18:12:59.451755-06:00","closed_at":"2026-01-25T18:12:59.451755-06:00","close_reason":"Implemented BlockRenderer with isometric positioning and depth sorting","dependencies":[{"issue_id":"arcology-x0d.5","depends_on_id":"arcology-x0d","type":"parent-child","created_at":"2026-01-25T14:56:39.273958-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.5","depends_on_id":"arcology-x0d.1","type":"blocks","created_at":"2026-01-25T14:58:44.869975-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.5","depends_on_id":"arcology-x0d.8","type":"blocks","created_at":"2026-01-25T14:58:49.190768-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.5","depends_on_id":"arcology-x0d.2","type":"blocks","created_at":"2026-01-25T17:42:12.562493-06:00","created_by":"danielbarrett"}],"comments":[{"id":18,"issue_id":"arcology-x0d.5","author":"danielbarrett","text":"## ðŸ“š Required Reading\n\n**Before starting this task, you MUST read:**\n1. [isometric-math.md#depth-sorting](documentation/quick-reference/isometric-math.md) - Depth sorting formulas\n2. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Rendering section\n\n**Key sections:**\n- get_sort_key(): isometric-math.md#depth-sorting\n- Godot Y-sort: isometric-math.md#depth-sorting\n","created_at":"2026-01-25T22:03:41Z"}]}
{"id":"arcology-x0d.6","title":"Implement block placement on click","description":"# Block Placement and Removal on Click\n\n## Overview\nPlayers place blocks by left-clicking on the grid and remove them by right-clicking. A ghost preview shows where the block will be placed before committing.\n\n## Requirements\n1. Left-click places currently selected block type\n2. Right-click removes block at cursor position\n3. Ghost preview shows where block will be placed\n4. Placement uses current viewing floor for Z coordinate\n5. Signals emitted for game state updates\n\n## Implementation Details\n1. screen_to_grid(mouse_pos, current_floor) -\u003e Vector3i\n2. Ghost sprite follows cursor, shows valid/invalid placement\n3. On click:\n   - Check if position is empty (for placement)\n   - Check if position has block (for removal)\n   - Create/remove Block, update Grid, refresh renderer\n\n## Placement Validation (M1 - basic)\n- Can't place on occupied cell\n- Can't remove empty cell\n- (Future M3+: connectivity checks, adjacency rules)\n\n## Signals\n- block_placement_attempted(pos, type, success)\n- block_removal_attempted(pos, success)\n\n## ðŸ“š Required Reading\n- `documentation/architecture/milestones/milestone-1-grid-blocks.md` - Place/remove requirements\n- `documentation/quick-reference/isometric-math.md` - screen_to_grid conversion\n\n## Acceptance Criteria\nFrom milestone-1-grid-blocks.md:\n- [ ] Click places selected block type\n- [ ] Right-click removes block\n- [ ] Block appears immediately at clicked position\n- [ ] Block is added to Grid data structure\n- [ ] Ghost preview visible before placement\n- [ ] Ghost turns red when placement invalid (occupied)\n- [ ] Placement uses current_floor for Z\n- [ ] Grid and renderer stay in sync\n- [ ] Signals emit on place/remove","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T14:56:45.066581-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:11:14.968052-06:00","closed_at":"2026-01-25T19:11:14.968052-06:00","close_reason":"Implemented and tested","dependencies":[{"issue_id":"arcology-x0d.6","depends_on_id":"arcology-x0d","type":"parent-child","created_at":"2026-01-25T14:56:45.086504-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.6","depends_on_id":"arcology-x0d.5","type":"blocks","created_at":"2026-01-25T14:58:53.768277-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.6","depends_on_id":"arcology-x0d.3","type":"blocks","created_at":"2026-01-25T14:58:58.536607-06:00","created_by":"danielbarrett"}],"comments":[{"id":19,"issue_id":"arcology-x0d.6","author":"danielbarrett","text":"## ðŸ“š Required Reading\n\n**Before starting this task, you MUST read:**\n1. [isometric-math.md#mouse-picking](documentation/quick-reference/isometric-math.md) - Mouse to grid conversion\n2. [isometric-math.md#screen-to-grid-conversion](documentation/quick-reference/isometric-math.md) - Coordinate conversion\n3. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Input handling\n\n**Key sections:**\n- pick_tile(): isometric-math.md#mouse-picking\n- screen_to_grid(): isometric-math.md#screen-to-grid-conversion\n","created_at":"2026-01-25T22:03:41Z"}]}
{"id":"arcology-x0d.7","title":"Create simple block picker UI","description":"# Simple Block Picker UI\n\n## Overview\nA horizontal row of buttons at the bottom of the screen allowing players to select which block type to place. Includes keyboard shortcuts for quick selection.\n\n## Requirements\n1. HBoxContainer at bottom of screen\n2. Button for each block type from BlockRegistry\n3. Visual feedback for selected type (highlight/pressed)\n4. Keyboard shortcuts: 1-6 for quick selection\n5. Selected type used by placement system\n\n## Block Types to Show (M1-M3)\n1. Corridor (1)\n2. Entrance (2)\n3. Stairs (3)\n4. Elevator (4)\n5. Residential (5)\n6. Commercial (6)\n\n## UI Layout\n```\n[Corridor][Entrance][Stairs][Elevator][Residential][Commercial]\n    1         2         3        4          5            6\n```\n\n## Implementation\n- Load block types from BlockRegistry.get_all_types()\n- Create button per type with icon/name\n- Connect button.pressed to selection change\n- Store selected_block_type: String in GameState\n\n## ðŸ“š Required Reading\n- `documentation/architecture/milestones/milestone-1-grid-blocks.md` - UI requirements\n- `documentation/game-design/blocks/README.md` - Available block types\n\n## Acceptance Criteria\nFrom milestone-1-grid-blocks.md:\n- [ ] At least 4 buttons for block types (M1), 6 for M3\n- [ ] All block types visible in picker\n- [ ] Clicking button selects that type\n- [ ] Selected button shows visual highlight\n- [ ] Keys 1-6 select corresponding type\n- [ ] Placement uses currently selected type\n- [ ] Selected block type is used when clicking to place","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T14:56:50.150764-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:15:33.953497-06:00","closed_at":"2026-01-25T19:15:33.953497-06:00","close_reason":"Implemented and tested","dependencies":[{"issue_id":"arcology-x0d.7","depends_on_id":"arcology-x0d","type":"parent-child","created_at":"2026-01-25T14:56:50.159226-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.7","depends_on_id":"arcology-x0d.6","type":"blocks","created_at":"2026-01-25T14:59:02.584394-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.7","depends_on_id":"arcology-s8v","type":"blocks","created_at":"2026-01-25T15:05:37.939125-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.7","depends_on_id":"arcology-x0d.3","type":"blocks","created_at":"2026-01-25T17:42:25.334347-06:00","created_by":"danielbarrett"}],"comments":[{"id":20,"issue_id":"arcology-x0d.7","author":"danielbarrett","text":"## ðŸ“š Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Input section\n2. [blocks/README.md](documentation/game-design/blocks/README.md) - Block categories\n3. [ui/README.md](documentation/ui/README.md) - UI patterns\n\n**Key sections:**\n- Block selector UI: milestone-1-grid-blocks.md#input\n","created_at":"2026-01-25T22:03:41Z"}]}
{"id":"arcology-x0d.8","title":"Create basic block sprites","description":"# Create Basic Block Sprites\n\n## Overview\nCreate placeholder isometric sprites for block types needed in Milestones 1-3. These are 3D cutaway room sprites rendered as hexagonal shapes.\n\n## Isometric Geometry\n\nBlocks are cubes viewed isometrically with front faces removed (cutaway style):\n\n```\nSingle 1x1x1 block sprite (64w Ã— 64h):\n\n          ____32____\n         /          \\\n        /    TOP     \\      â† Diamond floor (64w Ã— 32h)\n       / (floor face) \\\n      /________________\\\n      \\       |       /\n       \\  L   |   R  /      â† Two visible walls (32h each)  \n        \\     |     /\n         \\____|____/\n\n      |______64_____|\n```\n\n**Perimeter: HEXAGON** (6 vertices)\n**3 visible faces:** TOP (floor), LEFT wall, RIGHT wall\n\n## Sprite Specifications\n- **Width**: 64 pixels\n- **Height**: 64 pixels (32px diamond + 32px walls)\n- **Format**: PNG with transparency\n- **Style**: Flat color with distinct faces (darker walls, lighter floor)\n- **Location**: `assets/sprites/blocks/{type}.png`\n\n## Block Types and Colors\n| Block | Floor Color | Wall Color | Hex (floor) |\n|-------|-------------|------------|-------------|\n| corridor | Light Gray | Dark Gray | #9ca3af / #6b7280 |\n| entrance | Gold | Dark Gold | #fbbf24 / #f59e0b |\n| stairs | Light Teal | Dark Teal | #5eead4 / #14b8a6 |\n| elevator | Light Purple | Dark Purple | #a78bfa / #8b5cf6 |\n| residential | Light Blue | Dark Blue | #93c5fd / #3b82f6 |\n| commercial | Light Green | Dark Green | #86efac / #22c55e |\n\n## ðŸ“š Required Reading\n- `documentation/quick-reference/isometric-math.md` - Sprite geometry, constants\n- `documentation/architecture/milestones/milestone-1-grid-blocks.md` - Block types\n\n## Acceptance Criteria\n- [ ] 6 PNG files exist in assets/sprites/blocks/\n- [ ] Each sprite is 64x64 pixels with transparency\n- [ ] Each shows hexagonal 3D cutaway shape\n- [ ] Floor face (top diamond) is lighter color\n- [ ] Wall faces (left/right) are darker color\n- [ ] Each block type has distinct color scheme\n- [ ] Godot can import and display them","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T14:56:54.711938-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T18:09:22.773381-06:00","closed_at":"2026-01-25T18:09:22.773381-06:00","close_reason":"Created 6 isometric block sprites with Python generator","dependencies":[{"issue_id":"arcology-x0d.8","depends_on_id":"arcology-x0d","type":"parent-child","created_at":"2026-01-25T14:56:54.717071-06:00","created_by":"danielbarrett"}],"comments":[{"id":21,"issue_id":"arcology-x0d.8","author":"danielbarrett","text":"## ðŸ“š Required Reading\n\n**Before starting this task, you MUST read:**\n1. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Tile dimensions (64x32)\n2. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit block visuals\n3. [blocks/residential.md](documentation/game-design/blocks/residential.md) - Residential visuals\n\n**Key sections:**\n- TILE_WIDTH=64, TILE_HEIGHT=32: isometric-math.md#constants\n- Sprite paths: milestone-1-grid-blocks.md#datablocksjson\n","created_at":"2026-01-25T22:03:42Z"}]}
{"id":"arcology-y6e","title":"M2: Floor Navigation","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-25T14:55:20.287898-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T21:33:10.073935-06:00","closed_at":"2026-01-25T21:33:10.073935-06:00","close_reason":"All tasks completed","comments":[{"id":55,"issue_id":"arcology-y6e","author":"danielbarrett","text":"## ðŸ“š Milestone Documentation\n\n**Primary doc:** [milestone-2-floor-navigation.md](documentation/architecture/milestones/milestone-2-floor-navigation.md)\n\n**Supporting docs:**\n- [ui/views.md](documentation/ui/views.md) - View modes\n- [isometric-math.md](documentation/quick-reference/isometric-math.md) - Z-level handling\n\nAll tasks in this epic MUST reference the milestone doc before starting work.\n","created_at":"2026-01-25T22:05:56Z"}]}
{"id":"arcology-y6e.1","title":"Add floor selector UI","description":"# Floor Selector UI and Controls\n\n## Overview\nUI panel and keyboard controls for switching between floor levels. The current floor determines which Z level blocks are placed on and which floor is fully visible.\n\n## Requirements\n1. GameState singleton with current_floor: int\n2. UI panel showing current floor number\n3. Up/Down buttons to change floor\n4. Keyboard: PageUp/PageDown to change floor\n5. Floor range: 0 to 10 (initial limits)\n\n## UI Layout\nFrom `milestone-2-floor-navigation.md`:\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Floor: 3                [â–²][â–¼]  â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                 â”‚\nâ”‚         (game view)             â”‚\nâ”‚                                 â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Implementation\n1. GameState autoload with:\n   - current_floor: int = 0\n   - MIN_FLOOR: int = 0\n   - MAX_FLOOR: int = 10\n   - signal floor_changed(new_floor: int)\n\n2. FloorSelector scene (scenes/ui/floor_selector.tscn)\n   - Label showing floor number\n   - Up/Down buttons\n   - Connect to GameState.floor_changed\n\n3. Input handling in main scene:\n   - PageUp: increment floor\n   - PageDown: decrement floor\n\n## ðŸ“š Required Reading\n- `documentation/architecture/milestones/milestone-2-floor-navigation.md` - Floor system spec\n- `documentation/ui/README.md` - UI guidelines (if exists)\n\n## Acceptance Criteria\nFrom milestone-2-floor-navigation.md:\n- [ ] Floor indicator shows current floor number\n- [ ] Up/down buttons change current floor\n- [ ] Floor has min (0) and max (10) limits\n- [ ] PageUp/PageDown keyboard shortcuts work\n- [ ] UI updates to show new floor number\n- [ ] signal floor_changed emits on change\n- [ ] Block placement uses current_floor for Z","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:07.921034-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:22:26.370724-06:00","closed_at":"2026-01-25T19:22:26.370724-06:00","close_reason":"Implemented floor selector UI with GameState autoload, PageUp/PageDown shortcuts, and integration with InputHandler","dependencies":[{"issue_id":"arcology-y6e.1","depends_on_id":"arcology-y6e","type":"parent-child","created_at":"2026-01-25T14:57:07.928072-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-y6e.1","depends_on_id":"arcology-x0d.7","type":"blocks","created_at":"2026-01-25T14:59:12.484614-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-y6e.1","depends_on_id":"arcology-x0d.1","type":"blocks","created_at":"2026-01-25T17:43:11.756553-06:00","created_by":"danielbarrett"}],"comments":[{"id":22,"issue_id":"arcology-y6e.1","author":"danielbarrett","text":"## ðŸ“š Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-2-floor-navigation.md](documentation/architecture/milestones/milestone-2-floor-navigation.md) - Floor UI spec\n2. [ui/README.md](documentation/ui/README.md) - UI patterns\n\n**Key sections:**\n- Floor UI layout: milestone-2-floor-navigation.md#ui-layout\n- Floor selector code: milestone-2-floor-navigation.md#floor-ui\n","created_at":"2026-01-25T22:04:26Z"}]}
{"id":"arcology-y6e.2","title":"Implement floor visibility system","description":"# Floor Visibility System\n\n## Overview\nControls block visibility based on floor level. Current floor is fully visible, floors below fade with depth, and floors above are hidden. This creates a \"cutaway\" view into the structure.\n\n## Requirements\n1. Current floor: 100% opacity (fully visible)\n2. Floor below (Z-1): 70% opacity\n3. Two floors below (Z-2): 40% opacity\n4. Floors above current: hidden (0% opacity)\n5. Updates when current_floor changes\n\n## Implementation\nFrom `milestone-2-floor-navigation.md`:\n```gdscript\nfunc update_visibility() -\u003e void:\n    for pos in Grid.blocks:\n        var block = Grid.get_block(pos)\n        if pos.z \u003e current_floor:\n            # Above current floor - hide\n            block.sprite.visible = false\n        elif pos.z == current_floor:\n            # Current floor - full opacity\n            block.sprite.visible = true\n            block.sprite.modulate.a = 1.0\n        elif pos.z \u003e= current_floor - floors_below_visible:\n            # Below but within visible range - fade\n            block.sprite.visible = true\n            var depth = current_floor - pos.z\n            block.sprite.modulate.a = 1.0 - (depth * 0.3)\n        else:\n            # Too far below - hide\n            block.sprite.visible = false\n```\n\n## Connect to GameState\n- Listen to GameState.floor_changed signal\n- Call update_visibility() on change\n\n## ðŸ“š Required Reading\n- `documentation/architecture/milestones/milestone-2-floor-navigation.md` - Visibility code sample\n- `documentation/game-design/core-concepts.md#grid-architecture` - Z-level meaning\n\n## Acceptance Criteria\nFrom milestone-2-floor-navigation.md:\n- [ ] Floors above current are hidden\n- [ ] Current floor renders at full opacity\n- [ ] 1 floor below is visible with transparency (70%)\n- [ ] 2 floors below are visible with transparency (40%)\n- [ ] Visibility updates when floor changes\n- [ ] Can see \"down\" into the structure like a cutaway","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:12.198152-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:27:56.032371-06:00","closed_at":"2026-01-25T19:27:56.032371-06:00","close_reason":"Implemented floor visibility with cutaway view and tests","dependencies":[{"issue_id":"arcology-y6e.2","depends_on_id":"arcology-y6e","type":"parent-child","created_at":"2026-01-25T14:57:12.201377-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-y6e.2","depends_on_id":"arcology-y6e.1","type":"blocks","created_at":"2026-01-25T17:43:11.879769-06:00","created_by":"danielbarrett"}],"comments":[{"id":23,"issue_id":"arcology-y6e.2","author":"danielbarrett","text":"## ðŸ“š Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-2-floor-navigation.md#floor-visibility](documentation/architecture/milestones/milestone-2-floor-navigation.md) - Visibility algorithm\n2. [ui/views.md](documentation/ui/views.md) - View modes\n\n**Key sections:**\n- FloorManager class: milestone-2-floor-navigation.md#floor-visibility\n- Transparency fade: milestone-2-floor-navigation.md#floor-visibility\n","created_at":"2026-01-25T22:04:26Z"}]}
{"id":"arcology-y6e.3","title":"Enable block placement on any floor","description":"# Multi-Floor Block Placement\n\n## Overview\nBlock placement must use the current floor (from FloorManager) as the Z coordinate. This enables building vertically by switching floors and placing blocks.\n\n## Requirements\n1. Block placement uses current_floor as Z coordinate\n2. Can place blocks on any floor 0-10\n3. Visual feedback shows which floor you're building on\n4. Ghost preview appears at correct Z level\n\n## Implementation\nFrom `milestone-2-floor-navigation.md`:\n```gdscript\nfunc _on_click(screen_pos: Vector2) -\u003e void:\n    var grid_pos = Grid.screen_to_grid(screen_pos, FloorManager.current_floor)\n    place_block(grid_pos)\n```\n\n## Building Pattern\nTo build a 5-story tower:\n1. Floor 0: place block\n2. Change to floor 1: place block\n3. Change to floor 2: place block\n4. (continue...)\n\n## ðŸ“š Required Reading\n- `documentation/architecture/milestones/milestone-2-floor-navigation.md` - Placement on current floor\n- `documentation/quick-reference/isometric-math.md` - screen_to_grid with Z\n\n## Acceptance Criteria\nFrom milestone-2-floor-navigation.md:\n- [ ] Block placement uses current floor for Z\n- [ ] Changing floor changes where blocks are placed\n- [ ] Can build a 5-story tower by: floor 0, place, floor 1, place, etc.\n- [ ] Ghost preview shows at current floor Z level\n- [ ] Blocks on different floors sort correctly (upper floors behind)\n- [ ] Can build 5+ story structure","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:17.621827-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T19:31:21.037162-06:00","closed_at":"2026-01-25T19:31:21.037162-06:00","close_reason":"Verified implementation with integration tests","dependencies":[{"issue_id":"arcology-y6e.3","depends_on_id":"arcology-y6e","type":"parent-child","created_at":"2026-01-25T14:57:17.632901-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-y6e.3","depends_on_id":"arcology-y6e.1","type":"blocks","created_at":"2026-01-25T17:43:11.98301-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-y6e.3","depends_on_id":"arcology-x0d.6","type":"blocks","created_at":"2026-01-25T17:43:12.087501-06:00","created_by":"danielbarrett"}],"comments":[{"id":24,"issue_id":"arcology-y6e.3","author":"danielbarrett","text":"## ðŸ“š Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-2-floor-navigation.md#placement-on-current-floor](documentation/architecture/milestones/milestone-2-floor-navigation.md) - Z-level placement\n2. [isometric-math.md#screen-to-grid-conversion](documentation/quick-reference/isometric-math.md) - Uses current_floor\n\n**Key sections:**\n- Placement code: milestone-2-floor-navigation.md#placement-on-current-floor\n- FloorManager.current_floor: milestone-2-floor-navigation.md\n","created_at":"2026-01-25T22:04:26Z"}]}
