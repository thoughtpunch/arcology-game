{"id":"arcology-03c","title":"Right-click to remove blocks","description":"\nImplement block removal:\n- Right-click removes block at cursor position\n- Emits block_removed signal\n- Updates renderer\nAcceptance: Can right-click to remove placed blocks.","acceptance_criteria":"I TYPED IN HERE!","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T15:05:34.647775-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:42:12.368378-06:00","closed_at":"2026-01-25T15:16:48.027196-06:00","close_reason":"Duplicate of arcology-x0d.6 (includes removal)","comments":[{"id":42,"issue_id":"arcology-03c","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid \u0026 Blocks\n2. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n3. [core-concepts.md](documentation/game-design/core-concepts.md) - Block types\n","created_at":"2026-01-25T22:05:22Z"}]}
{"id":"arcology-072","title":"Create Godot project structure","description":"\nCreate project.godot with proper settings.\nCreate folder structure: src/, scenes/, assets/, data/.\nCreate main.tscn as entry scene.\nAcceptance: Project opens in Godot 4 without errors.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T15:04:56.511479-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:13:47.308756-06:00","closed_at":"2026-01-25T15:13:47.308756-06:00","close_reason":"Duplicate - completed as arcology-4ct.1","comments":[{"id":34,"issue_id":"arcology-072","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-0-skeleton.md](documentation/architecture/milestones/milestone-0-skeleton.md) - Project setup\n2. [tech-stack.md](documentation/quick-reference/tech-stack.md) - Godot 4.x setup\n","created_at":"2026-01-25T22:05:21Z"}]}
{"id":"arcology-1ql","title":"Render blocks isometrically","description":"\nCreate BlockRenderer (src/core/block_renderer.gd):\n- Iterates Grid, creates Sprite2D for each block\n- Uses grid_to_screen() for positioning\n- Y-sorting for proper depth\n- Z-level offset for floors\nAcceptance: Blocks render at correct isometric positions.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T15:05:34.387082-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:47.814707-06:00","closed_at":"2026-01-25T15:16:47.814707-06:00","close_reason":"Duplicate of arcology-x0d.5","comments":[{"id":39,"issue_id":"arcology-1ql","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid \u0026 Blocks\n2. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n3. [core-concepts.md](documentation/game-design/core-concepts.md) - Block types\n","created_at":"2026-01-25T22:05:22Z"}]}
{"id":"arcology-242","title":"Stairs block for vertical connectivity","description":"\nAdd stairs block type:\n- Connects Z to Z+1 (spans two floors)\n- Flood-fill traverses stairs vertically\n- Visual shows connection between floors\nAcceptance: Stairs allow vertical connectivity in flood-fill.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T15:04:59.04017-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:48.916954-06:00","closed_at":"2026-01-25T15:16:48.916954-06:00","close_reason":"Duplicate of arcology-itx.5","dependencies":[{"issue_id":"arcology-242","depends_on_id":"arcology-gmu","type":"blocks","created_at":"2026-01-25T15:05:04.074656-06:00","created_by":"danielbarrett"}],"comments":[{"id":49,"issue_id":"arcology-242","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-3-connectivity.md](documentation/architecture/milestones/milestone-3-connectivity.md) - Connectivity\n2. [transit/pathfinding.md](documentation/game-design/transit/pathfinding.md) - Pathfinding\n3. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit blocks\n","created_at":"2026-01-25T22:05:23Z"}]}
{"id":"arcology-31o","title":"Basic camera with pan/zoom","description":"\nImplement Camera2D with:\n- WASD/arrow keys for panning\n- Mouse wheel for zoom (0.5x to 3x)\n- Smooth movement with lerp\n- Camera bounds to prevent infinite scroll\nAcceptance: Camera pans and zooms smoothly with limits.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T15:05:33.684069-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:13:47.429324-06:00","closed_at":"2026-01-25T15:13:47.429324-06:00","close_reason":"Duplicate - completed as arcology-4ct.3","comments":[{"id":35,"issue_id":"arcology-31o","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-0-skeleton.md](documentation/architecture/milestones/milestone-0-skeleton.md) - Project setup\n2. [tech-stack.md](documentation/quick-reference/tech-stack.md) - Godot 4.x setup\n","created_at":"2026-01-25T22:05:21Z"}]}
{"id":"arcology-48z","title":"Simple block picker UI","description":"\nCreate UI for block selection:\n- HBoxContainer with 4 buttons (one per block type)\n- Visual feedback for selected type\n- Keyboard shortcuts 1-4\nAcceptance: Can select block type via UI or keyboard.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T15:05:34.764742-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:48.14335-06:00","closed_at":"2026-01-25T15:16:48.14335-06:00","close_reason":"Duplicate of arcology-x0d.7","comments":[{"id":43,"issue_id":"arcology-48z","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid \u0026 Blocks\n2. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n3. [core-concepts.md](documentation/game-design/core-concepts.md) - Block types\n","created_at":"2026-01-25T22:05:22Z"}]}
{"id":"arcology-4ct","title":"M0: Project Skeleton","status":"open","priority":0,"issue_type":"epic","created_at":"2026-01-25T14:55:08.230945-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T14:55:08.230945-06:00","comments":[{"id":51,"issue_id":"arcology-4ct","author":"danielbarrett","text":"## üìö Milestone Documentation\n\n**Primary doc:** [milestone-0-skeleton.md](documentation/architecture/milestones/milestone-0-skeleton.md)\n\nAll tasks in this epic MUST reference the milestone doc before starting work.\n","created_at":"2026-01-25T22:05:55Z"}]}
{"id":"arcology-4ct.1","title":"Create Godot 4 project structure","description":"Create project.godot, folder structure (src/core/, src/blocks/, src/environment/, src/agents/, src/transit/, src/economy/, src/ui/, scenes/, assets/sprites/blocks/, data/), and main.tscn entry scene. Acceptance: Opens in Godot 4 without errors.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T14:55:42.722208-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:09:37.763992-06:00","closed_at":"2026-01-25T15:09:37.763992-06:00","close_reason":"Implemented and committed","dependencies":[{"issue_id":"arcology-4ct.1","depends_on_id":"arcology-4ct","type":"parent-child","created_at":"2026-01-25T14:55:42.733056-06:00","created_by":"danielbarrett"}],"comments":[{"id":31,"issue_id":"arcology-4ct.1","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-0-skeleton.md](documentation/architecture/milestones/milestone-0-skeleton.md) - Project setup\n2. [tech-stack.md](documentation/quick-reference/tech-stack.md) - Godot 4.x setup\n","created_at":"2026-01-25T22:05:20Z"}]}
{"id":"arcology-4ct.2","title":"Add placeholder sprite","description":"Create a simple 64x32 isometric placeholder sprite and display it in main scene. Acceptance: Sprite visible when running game.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T14:55:48.548436-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:11:25.883487-06:00","closed_at":"2026-01-25T15:11:25.883487-06:00","close_reason":"Implemented and committed","dependencies":[{"issue_id":"arcology-4ct.2","depends_on_id":"arcology-4ct","type":"parent-child","created_at":"2026-01-25T14:55:48.557681-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-4ct.2","depends_on_id":"arcology-4ct.1","type":"blocks","created_at":"2026-01-25T14:58:19.63757-06:00","created_by":"danielbarrett"}],"comments":[{"id":32,"issue_id":"arcology-4ct.2","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-0-skeleton.md](documentation/architecture/milestones/milestone-0-skeleton.md) - Project setup\n2. [tech-stack.md](documentation/quick-reference/tech-stack.md) - Godot 4.x setup\n","created_at":"2026-01-25T22:05:20Z"}]}
{"id":"arcology-4ct.3","title":"Implement camera pan and zoom","description":"Camera2D with WASD/arrow pan and mouse wheel zoom. Acceptance: Can navigate around the game world smoothly.","status":"closed","priority":0,"issue_type":"task","created_at":"2026-01-25T14:55:54.580917-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:10:24.410211-06:00","closed_at":"2026-01-25T15:10:24.410211-06:00","close_reason":"Already implemented in arcology-4ct.1","dependencies":[{"issue_id":"arcology-4ct.3","depends_on_id":"arcology-4ct","type":"parent-child","created_at":"2026-01-25T14:55:54.589241-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-4ct.3","depends_on_id":"arcology-4ct.1","type":"blocks","created_at":"2026-01-25T14:58:23.907839-06:00","created_by":"danielbarrett"}],"comments":[{"id":33,"issue_id":"arcology-4ct.3","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-0-skeleton.md](documentation/architecture/milestones/milestone-0-skeleton.md) - Project setup\n2. [tech-stack.md](documentation/quick-reference/tech-stack.md) - Godot 4.x setup\n","created_at":"2026-01-25T22:05:21Z"}]}
{"id":"arcology-4cz","title":"Floor visibility system","description":"\nImplement floor rendering rules:\n- Current floor: 100% opacity\n- Floor below (Z-1): 50% opacity\n- Two below (Z-2): 25% opacity\n- Floors above current: hidden\n- Update when floor changes\nAcceptance: Floors fade by depth, above floors hidden.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:58.502174-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:48.460434-06:00","closed_at":"2026-01-25T15:16:48.460434-06:00","close_reason":"Duplicate of arcology-y6e.2","comments":[{"id":46,"issue_id":"arcology-4cz","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-2-floor-navigation.md](documentation/architecture/milestones/milestone-2-floor-navigation.md) - Floor nav\n2. [ui/views.md](documentation/ui/views.md) - View modes\n","created_at":"2026-01-25T22:05:23Z"}]}
{"id":"arcology-4lj","title":"Milestone 3 - Connectivity","description":"Block adjacency and path connectivity","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-25T15:04:56.347699-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:04:56.347699-06:00","comments":[{"id":58,"issue_id":"arcology-4lj","author":"danielbarrett","text":"## üìö Milestone Documentation\n\n**Primary doc:** [milestone-3-connectivity.md](documentation/architecture/milestones/milestone-3-connectivity.md)\n\n**Supporting docs:**\n- [transit/pathfinding.md](documentation/game-design/transit/pathfinding.md) - Pathfinding graph\n- [transit/elevators.md](documentation/game-design/transit/elevators.md) - Vertical transit\n- [transit/corridors.md](documentation/game-design/transit/corridors.md) - Horizontal transit\n- [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit block catalog\n\nAll tasks in this epic MUST reference the milestone doc before starting work.\n","created_at":"2026-01-25T22:05:57Z"}]}
{"id":"arcology-534","title":"Placeholder block sprites","description":"\nCreate 64x64 isometric placeholder sprites:\n- corridor: gray\n- residential: blue\n- commercial: green  \n- industrial: orange\nSave to assets/sprites/blocks/{type}.png\nAcceptance: 4 colored placeholder sprites exist.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:57.191437-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:47.709244-06:00","closed_at":"2026-01-25T15:16:47.709244-06:00","close_reason":"Duplicate of arcology-x0d.8","comments":[{"id":41,"issue_id":"arcology-534","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid \u0026 Blocks\n2. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n3. [core-concepts.md](documentation/game-design/core-concepts.md) - Block types\n","created_at":"2026-01-25T22:05:22Z"}]}
{"id":"arcology-5ea","title":"Adjacency detection","description":"\nAdd Grid.get_neighbors(pos: Vector3i) -\u003e Array[Vector3i]:\n- Returns 6 directions: +X, -X, +Y, -Y, +Z, -Z\n- Only returns positions that have blocks\nAcceptance: Can query adjacent blocks in 6 directions.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T15:05:35.293013-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:48.25214-06:00","closed_at":"2026-01-25T15:16:48.25214-06:00","close_reason":"Duplicate of arcology-itx.1","comments":[{"id":47,"issue_id":"arcology-5ea","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-3-connectivity.md](documentation/architecture/milestones/milestone-3-connectivity.md) - Connectivity\n2. [transit/pathfinding.md](documentation/game-design/transit/pathfinding.md) - Pathfinding\n3. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit blocks\n","created_at":"2026-01-25T22:05:23Z"}]}
{"id":"arcology-7ns","title":"Block base class","description":"\nCreate Block class (src/core/block.gd) with:\n- grid_position: Vector3i\n- block_type: String\n- Signals: block_placed, block_removed\nAcceptance: Block instances can be created with position and type.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T15:05:33.926385-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:47.461076-06:00","closed_at":"2026-01-25T15:16:47.461076-06:00","close_reason":"Duplicate of arcology-x0d.2","comments":[{"id":37,"issue_id":"arcology-7ns","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid \u0026 Blocks\n2. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n3. [core-concepts.md](documentation/game-design/core-concepts.md) - Block types\n","created_at":"2026-01-25T22:05:21Z"}]}
{"id":"arcology-7oj","title":"Visual indicator for unconnected blocks","description":"\nShow disconnected blocks visually:\n- Red tint or warning icon on unconnected blocks\n- Toggle overlay on/off with key (C for connectivity)\nAcceptance: Can see which blocks are not connected.","status":"closed","priority":3,"issue_type":"task","created_at":"2026-01-25T15:05:35.558302-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:49.043451-06:00","closed_at":"2026-01-25T15:16:49.043451-06:00","close_reason":"Duplicate of arcology-itx.4","comments":[{"id":50,"issue_id":"arcology-7oj","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-3-connectivity.md](documentation/architecture/milestones/milestone-3-connectivity.md) - Connectivity\n2. [transit/pathfinding.md](documentation/game-design/transit/pathfinding.md) - Pathfinding\n3. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit blocks\n","created_at":"2026-01-25T22:05:23Z"}]}
{"id":"arcology-7s2","title":"Grid data structure","description":"\nCreate Grid class (src/core/grid.gd) with:\n- Sparse Dictionary[Vector3i, Block]\n- get_block(pos), set_block(pos, block), remove_block(pos)\n- grid_to_screen(Vector3i) -\u003e Vector2 conversion\n- TILE_WIDTH=64, TILE_HEIGHT=32, FLOOR_HEIGHT=24\nAcceptance: Can store/retrieve blocks by 3D position.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T15:04:56.789296-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:47.340162-06:00","closed_at":"2026-01-25T15:16:47.340162-06:00","close_reason":"Duplicate of arcology-x0d.1","comments":[{"id":36,"issue_id":"arcology-7s2","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid \u0026 Blocks\n2. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n3. [core-concepts.md](documentation/game-design/core-concepts.md) - Block types\n","created_at":"2026-01-25T22:05:21Z"}]}
{"id":"arcology-9gm","title":"Milestone 2 - Floor Navigation","description":"Vertical floor switching and visibility","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-25T15:04:56.009816-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:04:56.009816-06:00","comments":[{"id":56,"issue_id":"arcology-9gm","author":"danielbarrett","text":"## üìö Milestone Documentation\n\n**Primary doc:** [milestone-2-floor-navigation.md](documentation/architecture/milestones/milestone-2-floor-navigation.md)\n\n**Supporting docs:**\n- [ui/views.md](documentation/ui/views.md) - View modes\n- [isometric-math.md](documentation/quick-reference/isometric-math.md) - Z-level handling\n\nAll tasks in this epic MUST reference the milestone doc before starting work.\n","created_at":"2026-01-25T22:05:56Z"}]}
{"id":"arcology-dao","title":"Floor level tracking","description":"\nAdd current_floor state:\n- Global or GameState singleton with current_floor: int\n- UI label showing current floor\n- Min floor 0, max floor 10 initially\nAcceptance: Game tracks and displays current floor.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T15:05:34.893607-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:48.643408-06:00","closed_at":"2026-01-25T15:16:48.643408-06:00","close_reason":"Duplicate of arcology-y6e.1","comments":[{"id":44,"issue_id":"arcology-dao","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-2-floor-navigation.md](documentation/architecture/milestones/milestone-2-floor-navigation.md) - Floor nav\n2. [ui/views.md](documentation/ui/views.md) - View modes\n","created_at":"2026-01-25T22:05:23Z"}]}
{"id":"arcology-eip","title":"Milestone 0 - Project Skeleton","description":"Basic Godot project setup with camera controls","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-25T15:04:55.693492-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:13:47.637647-06:00","closed_at":"2026-01-25T15:13:47.637647-06:00","close_reason":"Duplicate epic","comments":[{"id":52,"issue_id":"arcology-eip","author":"danielbarrett","text":"## üìö Milestone Documentation\n\n**Primary doc:** [milestone-0-skeleton.md](documentation/architecture/milestones/milestone-0-skeleton.md)\n\nAll tasks in this epic MUST reference the milestone doc before starting work.\n","created_at":"2026-01-25T22:05:56Z"}]}
{"id":"arcology-gmu","title":"Entrance block and connectivity","description":"\nAdd entrance block type and connectivity:\n- New block type 'entrance' at Z=0 only\n- Add 'connected' boolean to Block class\n- Flood-fill from entrance marks reachable blocks\n- Recalculate on block add/remove\nAcceptance: Blocks reachable from entrance marked connected.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T15:04:58.762235-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:48.359979-06:00","closed_at":"2026-01-25T15:16:48.359979-06:00","close_reason":"Duplicate of arcology-itx.2 + arcology-itx.3","comments":[{"id":48,"issue_id":"arcology-gmu","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-3-connectivity.md](documentation/architecture/milestones/milestone-3-connectivity.md) - Connectivity\n2. [transit/pathfinding.md](documentation/game-design/transit/pathfinding.md) - Pathfinding\n3. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit blocks\n","created_at":"2026-01-25T22:05:23Z"}]}
{"id":"arcology-h49","title":"Floor navigation controls","description":"\nAdd floor switching:\n- Up/Down buttons in UI\n- Page Up/Page Down keyboard shortcuts\n- Clamp to valid range\nAcceptance: Can switch floors with UI and keyboard.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-25T15:05:35.022288-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:48.760722-06:00","closed_at":"2026-01-25T15:16:48.760722-06:00","close_reason":"Duplicate of arcology-y6e.1 (includes controls)","comments":[{"id":45,"issue_id":"arcology-h49","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-2-floor-navigation.md](documentation/architecture/milestones/milestone-2-floor-navigation.md) - Floor nav\n2. [ui/views.md](documentation/ui/views.md) - View modes\n","created_at":"2026-01-25T22:05:23Z"}]}
{"id":"arcology-itx","title":"M3: Connectivity \u0026 Paths","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-25T14:55:25.321388-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T14:55:25.321388-06:00","comments":[{"id":57,"issue_id":"arcology-itx","author":"danielbarrett","text":"## üìö Milestone Documentation\n\n**Primary doc:** [milestone-3-connectivity.md](documentation/architecture/milestones/milestone-3-connectivity.md)\n\n**Supporting docs:**\n- [transit/pathfinding.md](documentation/game-design/transit/pathfinding.md) - Pathfinding graph\n- [transit/elevators.md](documentation/game-design/transit/elevators.md) - Vertical transit\n- [transit/corridors.md](documentation/game-design/transit/corridors.md) - Horizontal transit\n- [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit block catalog\n\nAll tasks in this epic MUST reference the milestone doc before starting work.\n","created_at":"2026-01-25T22:05:57Z"}]}
{"id":"arcology-itx.1","title":"Implement adjacency detection","description":"# Adjacency Detection\n\n## Overview\nBlocks need to know their neighbors in 6 directions (¬±X, ¬±Y, ¬±Z) to calculate connectivity. This is the foundation for the connectivity flood-fill system.\n\n## Requirements\n1. Grid.get_neighbors(pos) returns 6 orthogonal neighbor positions\n2. Grid.get_walkable_neighbors(pos) returns connected neighbors only\n3. Consider block traversability (public vs private)\n\n## The 6 Orthogonal Directions\n```\n+X = East  (1, 0, 0)\n-X = West  (-1, 0, 0)\n+Y = South (0, 1, 0)\n-Y = North (0, -1, 0)\n+Z = Up    (0, 0, 1)\n-Z = Down  (0, 0, -1)\n```\n\n## Implementation\nFrom `milestone-3-connectivity.md`:\n```gdscript\nfunc get_neighbors(pos: Vector3i) -\u003e Array[Vector3i]:\n    return [\n        pos + Vector3i(1, 0, 0),   # East\n        pos + Vector3i(-1, 0, 0),  # West\n        pos + Vector3i(0, 1, 0),   # South\n        pos + Vector3i(0, -1, 0),  # North\n        pos + Vector3i(0, 0, 1),   # Up\n        pos + Vector3i(0, 0, -1),  # Down\n    ]\n```\n\n## Connectivity Rules\nFrom `milestone-3-connectivity.md`:\n1. **Horizontal** (X/Y): Two blocks connect if both exist and at least one is traversable\n2. **Vertical** (Z): Only connects via stairs/elevator (see itx.5/6)\n3. Private blocks are destinations, not through-routes\n\n## üìö Required Reading\n- `documentation/architecture/milestones/milestone-3-connectivity.md` - Neighbor finding code\n- `documentation/game-design/core-concepts.md#public-vs-private-blocks` - Traversability rules\n\n## Acceptance Criteria\nFrom milestone-3-connectivity.md:\n- [ ] get_neighbors returns 6 adjacent positions\n- [ ] Can query which neighbors have blocks vs empty\n- [ ] Corridors connect horizontally to adjacent corridors\n- [ ] Corridor-to-residential connects (can reach destination)\n- [ ] Residential-to-residential does NOT connect through (private)","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:34.736905-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T17:19:13.548732-06:00","dependencies":[{"issue_id":"arcology-itx.1","depends_on_id":"arcology-itx","type":"parent-child","created_at":"2026-01-25T14:57:34.743955-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-itx.1","depends_on_id":"arcology-x0d.1","type":"blocks","created_at":"2026-01-25T14:59:16.491495-06:00","created_by":"danielbarrett"}],"comments":[{"id":5,"issue_id":"arcology-itx.1","author":"danielbarrett","text":"## Requirements Questions (from PRD Section 6)\n\n**PRD says adjacency is more complex than 6-direction grid neighbors:**\n\n1. **Corridors connect through faces:** A corridor at (0,0,0) facing East connects to a block at (1,0,0) facing West. Blocks have entry_points per face.\n\n2. **Diagonal connections:** Some blocks (like plazas) might allow diagonal movement. Current ticket assumes only 6 orthogonal directions.\n\n3. **Vertical connections are special:**\n   - Stairs: connect Z to Z+1 but require specific orientation\n   - Elevators: connect any floors in the shaft, but not horizontally\n   - Standard blocks: no vertical connection\n\n**Questions:**\n1. Should get_neighbors() return all 6 directions, or only directions where the block has an entry_point?\n2. How do we model stairs connecting Z to Z+1? Is it two calls (up and down) or a single \"vertical_neighbors\" concept?\n3. Should adjacency consider block traversability? (A private block can be reached FROM a corridor, but you can't pass THROUGH it)\n\n## Proposed implementation:\n```gdscript\n# Basic grid neighbors (6 directions)\nfunc get_grid_neighbors(pos: Vector3i) -\u003e Array[Vector3i]\n\n# Walkable connections (checks traversability + entry points)\nfunc get_connected_neighbors(pos: Vector3i) -\u003e Array[Vector3i]\n\n# Vertical connections (stairs/elevators)\nfunc get_vertical_neighbors(pos: Vector3i) -\u003e Array[Vector3i]\n```","created_at":"2026-01-25T21:20:45Z"},{"id":25,"issue_id":"arcology-itx.1","author":"danielbarrett","text":"## üìö Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-3-connectivity.md#neighbor-finding](documentation/architecture/milestones/milestone-3-connectivity.md) - Neighbor detection\n2. [isometric-math.md#neighbor-finding](documentation/quick-reference/isometric-math.md) - 6 neighbors in 3D\n3. [core-concepts.md#public-vs-private-blocks](documentation/game-design/core-concepts.md#public-vs-private-blocks) - Traversability\n\n**Key sections:**\n- get_neighbors(): milestone-3-connectivity.md#neighbor-finding\n- can_connect(): milestone-3-connectivity.md#connection-rules\n","created_at":"2026-01-25T22:04:47Z"}]}
{"id":"arcology-itx.2","title":"Implement connectivity flood-fill","description":"# Implement Connectivity Flood-Fill\n\n## User Stories (from PRD)\n- **US-015**: As a developer, I need a special entrance block and flood-fill connectivity check.\n\n## Overview\nConnectivity determines which blocks are reachable from the entrance. This is calculated using a breadth-first flood-fill algorithm starting from the entrance block.\n\n## Requirements\n1. `Grid.calculate_connectivity(entrance_pos: Vector3i)` method\n2. BFS flood-fill from entrance position\n3. Sets `block.connected = true` for reachable blocks\n4. Sets `block.connected = false` for isolated blocks\n5. Recalculates when blocks are added or removed\n\n## Algorithm\n```gdscript\nfunc calculate_connectivity(entrance_pos: Vector3i) -\u003e void:\n    # Reset all blocks to disconnected\n    for block in get_all_blocks():\n        block.connected = false\n    \n    # BFS from entrance\n    var queue: Array[Vector3i] = [entrance_pos]\n    var visited: Dictionary = {entrance_pos: true}\n    \n    while not queue.is_empty():\n        var pos = queue.pop_front()\n        var block = get_block(pos)\n        if block:\n            block.connected = true\n            \n            # Add walkable neighbors to queue\n            for neighbor_pos in get_walkable_neighbors(pos):\n                if not visited.has(neighbor_pos):\n                    visited[neighbor_pos] = true\n                    queue.append(neighbor_pos)\n```\n\n## Traversability Rules\n- **PUBLIC** blocks (corridor, stairs, elevator): Can route THROUGH\n- **PRIVATE** blocks (residential, commercial): Can route TO but not through\n- Horizontal connections: Both blocks exist, at least one is PUBLIC\n- Vertical connections: Only via stairs/elevator (see itx.5/itx.6)\n\n## Signals\n- Connect to `block_added` and `block_removed` signals\n- Recalculate connectivity on each change\n\n## üìö Required Reading\n- `documentation/architecture/milestones/milestone-3-connectivity.md`\n- `documentation/game-design/core-concepts.md#public-vs-private-blocks`\n\n## Acceptance Criteria\n- [ ] `calculate_connectivity()` exists on Grid\n- [ ] BFS visits all reachable blocks from entrance\n- [ ] Blocks have `connected` property (bool)\n- [ ] Connected blocks marked `connected = true`\n- [ ] Isolated blocks marked `connected = false`\n- [ ] Connectivity recalculates on block add/remove","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:39.516284-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T16:28:38.926589-06:00","dependencies":[{"issue_id":"arcology-itx.2","depends_on_id":"arcology-itx","type":"parent-child","created_at":"2026-01-25T14:57:39.530857-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-itx.2","depends_on_id":"arcology-itx.1","type":"blocks","created_at":"2026-01-25T17:43:12.451441-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-itx.2","depends_on_id":"arcology-itx.3","type":"blocks","created_at":"2026-01-25T17:43:12.549048-06:00","created_by":"danielbarrett"}],"comments":[{"id":6,"issue_id":"arcology-itx.2","author":"danielbarrett","text":"## Requirements Questions (from PRD Section 6)\n\n**PRD has sophisticated pathfinding beyond boolean connectivity:**\n\n1. **Edge costs matter:** PRD defines traversal_speed and cost_modifier per block type. A Food Hall has cost 0.95 (preferred), a crowded corridor might have cost 1.5 (avoided).\n\n2. **Travel time calculation:**\n   ```\n   edge_cost = (distance / traversal_speed) √ó cost_modifier\n   ```\n   This affects resident happiness, not just \"can I get there?\"\n\n3. **Pathfinding graph vs connectivity:**\n   - Connectivity = \"can I reach this block?\" (boolean)\n   - Pathfinding = \"what's the best route?\" (weighted)\n\n**Questions:**\n1. Is M3 just boolean connectivity (BFS flood-fill), or do we need weighted paths?\n2. When do we calculate connectivity? On every block change? Lazy on query?\n3. Should unconnected blocks be unbuildable, or just show warning?\n4. What happens when entrance is removed? All blocks become unconnected?\n\n## Proposed scope for M3:\n- Boolean connectivity only (BFS from entrance)\n- Recalculate on block add/remove (debounced)\n- Store `connected: bool` per block\n- Defer weighted pathfinding to M6 (when residents move)\n\n## Critical insight:\nConnectivity drives emergent gameplay: \"Why won't anyone move into my apartments?\" ‚Üí \"Because they're not connected to the entrance!\"","created_at":"2026-01-25T21:21:04Z"},{"id":9,"issue_id":"arcology-itx.2","author":"danielbarrett","text":"# Connectivity Flood-Fill\n\n## User Stories (from PRD Section 6.9, 19)\n- US-6.1: As a player, I want blocks to know if they're reachable from the entrance.\n- US-19.2: As a developer, I want the pathfinding graph to be separate from the voxel grid for performance.\n\n## Requirements\n\n### Core Algorithm\n1. `Grid.calculate_connectivity(entrance_pos: Vector3i) -\u003e void`\n   - BFS from entrance position\n   - Marks each reachable block with `connected = true`\n   - Unreachable blocks get `connected = false`\n\n2. **Traversability Rules:**\n   - PUBLIC blocks (corridor, entrance, atrium, lobby): can route THROUGH\n   - PRIVATE blocks (residential, office, restaurant): can route TO but not THROUGH\n   - Two adjacent PRIVATE blocks do NOT connect through each other\n\n3. **When to Recalculate:**\n   - On block placed\n   - On block removed\n   - Debounce: 100ms delay to batch rapid changes\n\n### Data Structure\n```gdscript\n# Each block stores:\nvar connected: bool = false\n\n# Grid maintains:\nvar entrance_position: Vector3i  # seed for BFS\n```\n\n### Neighbor Connectivity\n```\nFor BFS, a block connects to neighbor if:\n- Neighbor exists (not empty)\n- Current block is PUBLIC (can route through)\n  OR current block is entrance (always traversable)\n- Neighbor block is not VOID type\n```\n\n## Implementation Notes\n- Use Dictionary for visited set (Vector3i keys)\n- Queue-based BFS, not recursive\n- Store result on block.connected property\n- Emit signal `connectivity_changed` when recalculated\n\n## Acceptance Criteria\n- [ ] BFS correctly identifies all reachable blocks from entrance\n- [ ] Private blocks can be destinations but not waypoints\n- [ ] Recalculates on block add/remove with debounce\n- [ ] Performance: \u003c50ms for 1000 blocks\n\n## Out of Scope (M6)\n- Weighted pathfinding (edge costs, travel time)\n- Multiple path options\n- Congestion-aware routing","created_at":"2026-01-25T21:32:37Z"},{"id":26,"issue_id":"arcology-itx.2","author":"danielbarrett","text":"## üìö Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-3-connectivity.md#connectivity-calculation](documentation/architecture/milestones/milestone-3-connectivity.md) - BFS algorithm\n2. [transit/pathfinding.md](documentation/game-design/transit/pathfinding.md) - Pathfinding philosophy\n\n**Key sections:**\n- calculate_connectivity(): milestone-3-connectivity.md#connectivity-calculation\n- BFS from entrance: milestone-3-connectivity.md\n","created_at":"2026-01-25T22:04:48Z"}]}
{"id":"arcology-itx.3","title":"Add entrance block type","description":"# Add Entrance Block Type\n\n## User Stories (from PRD)\n- **US-015**: As a developer, I need a special entrance block and flood-fill connectivity check.\n\n## Overview\nThe entrance block is the connection point to the outside world. All connectivity calculations start from the entrance - blocks that can't reach an entrance are \"disconnected\" and won't function properly.\n\n## Requirements\n1. Add `entrance` block type to `data/blocks.json`\n2. Entrance can only be placed at Z=0 (ground level)\n3. Grid tracks entrance position(s)\n4. Connectivity flood-fill seeds from entrance\n\n## Block Definition\n```json\n{\n  \"entrance\": {\n    \"name\": \"Entrance\",\n    \"category\": \"transit\",\n    \"traversability\": \"public\",\n    \"size\": [1, 1, 1],\n    \"cost\": 500,\n    \"sprite\": \"res://assets/sprites/blocks/entrance.png\",\n    \"connects_horizontal\": true,\n    \"connects_vertical\": false,\n    \"ground_only\": true,\n    \"description\": \"Main entrance to the arcology. All paths must connect here.\"\n  }\n}\n```\n\n## Implementation Details\n1. Add `ground_only: true` property to block definition\n2. Placement validation rejects entrance blocks at Z \u003e 0\n3. Grid maintains `entrance_positions: Array[Vector3i]`\n4. When entrance placed: add to list, recalculate connectivity\n5. When entrance removed: remove from list, recalculate connectivity\n\n## üìö Required Reading\n- `documentation/architecture/milestones/milestone-3-connectivity.md`\n- `documentation/game-design/blocks/README.md`\n- `documentation/game-design/core-concepts.md#connectivity`\n\n## Acceptance Criteria\n- [ ] `entrance` block type exists in blocks.json\n- [ ] Entrance has `ground_only: true` property\n- [ ] Can only place entrance at Z=0\n- [ ] Placement at Z\u003e0 is rejected with feedback\n- [ ] Grid tracks entrance positions\n- [ ] Connectivity calculated from entrance position\n- [ ] Removing entrance updates connectivity","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:43.59914-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T16:29:18.235599-06:00","dependencies":[{"issue_id":"arcology-itx.3","depends_on_id":"arcology-itx","type":"parent-child","created_at":"2026-01-25T14:57:43.603069-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-itx.3","depends_on_id":"arcology-x0d.4","type":"blocks","created_at":"2026-01-25T17:43:12.332761-06:00","created_by":"danielbarrett"}],"comments":[{"id":7,"issue_id":"arcology-itx.3","author":"danielbarrett","text":"## Requirements Questions (from PRD Section 6)\n\n**Entrance is critical - it's where the outside world connects:**\n\n1. **PRD says Grand Terminal is the main entrance:**\n   - Must be at Z=0 (ground level)\n   - Must touch exterior (edge of map or exterior face)\n   - All connectivity flows from here\n\n2. **Multiple entrances?**\n   - Can there be multiple entrances?\n   - Do they all count as \"connected to outside\"?\n   - Or is there ONE primary entrance?\n\n3. **Entrance capacity:**\n   - PRD mentions \"transit capacity\" for immigration\n   - Does entrance have a throughput limit?\n\n**Questions:**\n1. For M3, is entrance just a marker for \"start BFS here\"?\n2. Can entrance be demolished? What happens to connectivity?\n3. Do we need entrance on all 4 sides of map, or just one?\n4. Is entrance a corridor subtype or distinct block type?\n\n## Proposed scope for M3:\n- Single entrance block type\n- Must be Z=0 (enforce in placement)\n- One entrance required for connectivity to work\n- If no entrance exists, all blocks are \"unconnected\"\n- Entrance acts as BFS seed point","created_at":"2026-01-25T21:21:24Z"},{"id":10,"issue_id":"arcology-itx.3","author":"danielbarrett","text":"# Entrance Block Type\n\n## User Stories (from PRD Section 6, Appendix A.2)\n- US-6.1: As a player, I need an entrance block that connects my arcology to the outside world.\n- PRD: \"Grand Terminal is the main entrance... must be at Z=0 (ground level)\"\n\n## Requirements\n\n### Block Definition in blocks.json\n```json\n{\n  \"entrance\": {\n    \"id\": \"entrance\",\n    \"name\": \"Entrance\",\n    \"category\": \"transit\",\n    \"size\": [1, 1, 1],\n    \"traversability\": \"PUBLIC\",\n    \"sprites\": {\n      \"base\": \"entrance.svg\"\n    },\n    \"placement_rules\": {\n      \"z_level\": 0,\n      \"requires_edge\": false\n    },\n    \"description\": \"Main entry point connecting arcology to outside world\"\n  }\n}\n```\n\n### Placement Rules\n1. **Z-Level Constraint:** Must be placed at Z=0 (ground level)\n2. **Single Entrance (M3):** Only one entrance allowed per arcology\n3. **Connectivity Seed:** Grid stores `entrance_position` for BFS\n\n### Grid Integration\n```gdscript\n# In Grid class:\nvar entrance_position: Vector3i = Vector3i(-1, -1, -1)  # invalid until placed\n\nfunc place_entrance(pos: Vector3i) -\u003e bool:\n    if pos.z != 0:\n        return false  # Must be ground level\n    if entrance_position != Vector3i(-1, -1, -1):\n        return false  # Already have entrance\n    # Place and update\n    entrance_position = pos\n    recalculate_connectivity()\n    return true\n```\n\n### Removal Behavior\n- If entrance is removed: ALL blocks become unconnected\n- Show prominent warning before allowing demolition\n- Connectivity recalculates to all false\n\n## Acceptance Criteria\n- [ ] Entrance block defined in blocks.json\n- [ ] Can only place at Z=0\n- [ ] Only one entrance allowed\n- [ ] Grid stores entrance position\n- [ ] Connectivity BFS seeds from entrance\n- [ ] Removing entrance marks all blocks unconnected\n- [ ] Entrance sprite created (64x32 isometric)\n\n## Out of Scope (Later Milestones)\n- Multiple entrances\n- Entrance capacity/throughput\n- Grand Terminal (mega entrance for Pop 10K+)","created_at":"2026-01-25T21:32:58Z"},{"id":27,"issue_id":"arcology-itx.3","author":"danielbarrett","text":"## üìö Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-3-connectivity.md](documentation/architecture/milestones/milestone-3-connectivity.md) - Entrance as seed\n2. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit block catalog\n3. [core-concepts.md#grid-architecture](documentation/game-design/core-concepts.md#grid-architecture) - Z=0 ground level\n\n**Key sections:**\n- Entrance placement: Z=0 only\n- Connectivity seed: milestone-3-connectivity.md#connectivity-calculation\n","created_at":"2026-01-25T22:04:48Z"}]}
{"id":"arcology-itx.4","title":"Show connectivity warning on disconnected blocks","description":"# Show Connectivity Warning on Disconnected Blocks\n\n## User Stories (from PRD)\n- **US-016**: As a player, I want to see which blocks are not connected to the entrance.\n\n## Overview\nBlocks that are not connected to an entrance cannot function - residents can't reach them, services can't be delivered. Players need clear visual feedback to identify and fix connectivity issues.\n\n## Requirements\n1. Disconnected blocks (`connected = false`) show warning indicator\n2. Connected blocks render normally\n3. Warning updates when connectivity changes\n4. Optional: Toggle connectivity overlay on/off\n\n## Visual Indicators (choose one or combine)\n- **Red tint**: `sprite.modulate = Color(1, 0.5, 0.5)` for disconnected\n- **Warning icon**: Overlay sprite showing ‚ö†Ô∏è or broken link icon\n- **Pulsing effect**: Disconnected blocks pulse subtly\n\n## Implementation\n```gdscript\nfunc _update_connectivity_visuals(block: Block) -\u003e void:\n    var sprite = get_sprite_for_block(block)\n    if block.connected:\n        sprite.modulate = Color.WHITE\n        # Hide warning icon if using overlay\n    else:\n        sprite.modulate = Color(1, 0.5, 0.5)  # Red tint\n        # Show warning icon if using overlay\n```\n\n## Overlay Toggle (Optional for M3)\n- Press 'C' to toggle connectivity overlay\n- When on: all blocks show connected (green) or disconnected (red)\n- When off: only disconnected blocks show warning\n\n## üìö Required Reading\n- `documentation/architecture/milestones/milestone-3-connectivity.md`\n- `documentation/ui/overlays.md` (if exists)\n\n## Acceptance Criteria\n- [ ] Disconnected blocks visually distinct from connected\n- [ ] Red tint OR warning icon shows on disconnected blocks\n- [ ] Connected blocks render normally (no tint/icon)\n- [ ] Visual updates when blocks added/removed\n- [ ] Visual updates when connectivity recalculated\n- [ ] (Optional) 'C' key toggles connectivity overlay","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:48.063764-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T16:29:27.99938-06:00","dependencies":[{"issue_id":"arcology-itx.4","depends_on_id":"arcology-itx","type":"parent-child","created_at":"2026-01-25T14:57:48.083321-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-itx.4","depends_on_id":"arcology-itx.2","type":"blocks","created_at":"2026-01-25T17:43:12.652671-06:00","created_by":"danielbarrett"}],"comments":[{"id":11,"issue_id":"arcology-itx.4","author":"danielbarrett","text":"# Connectivity Warning Visual\n\n## User Stories (from PRD Section 17)\n- US-17.9: As a player, I want to see if a block placement will succeed before I commit.\n- US-11.8: As a player, I want warnings/alerts when systems are failing or approaching limits.\n\n## Requirements\n\n### Visual Indicator\n1. **Disconnected blocks show warning overlay:**\n   - Red/orange exclamation icon\n   - Positioned top-right of block sprite\n   - Semi-transparent, doesn't obscure block\n\n2. **Icon Sprite:**\n   - 16x16 pixel warning icon\n   - Path: `assets/sprites/ui/warning_disconnected.svg`\n\n### Implementation\n```gdscript\n# In block rendering:\nfunc update_visual() -\u003e void:\n    var warning_sprite = $WarningIcon\n    warning_sprite.visible = not block.connected\n```\n\n### Placement Preview\n- When hovering to place a block:\n- Show ghost preview of block\n- If block would be disconnected, show warning in preview\n- \"This block will not be connected to the entrance\"\n\n### Overlay Toggle\n- Part of accessibility overlay system (M later)\n- For M3: always visible on disconnected blocks\n\n## Acceptance Criteria\n- [ ] Disconnected blocks show warning icon\n- [ ] Warning icon is 16x16 SVG\n- [ ] Warning only shows when `block.connected == false`\n- [ ] Warning visible but not obstructive\n- [ ] Placement preview indicates if block will be disconnected\n\n## Visual Design\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ   Block      ‚îÇ ‚ö†Ô∏è  \u003c- warning icon (red/orange)\n‚îÇ   Sprite     ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n## Out of Scope\n- Detailed tooltip explaining why disconnected\n- Auto-fix suggestions\n- Path visualization to show what's missing","created_at":"2026-01-25T21:33:55Z"},{"id":28,"issue_id":"arcology-itx.4","author":"danielbarrett","text":"## üìö Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-3-connectivity.md#visual-feedback](documentation/architecture/milestones/milestone-3-connectivity.md) - Warning icons\n2. [ui/overlays.md](documentation/ui/overlays.md) - Overlay system\n\n**Key sections:**\n- update_connection_visual(): milestone-3-connectivity.md#unconnected-warning\n- Connectivity overlay: milestone-3-connectivity.md#connectivity-overlay-optional\n","created_at":"2026-01-25T22:04:48Z"}]}
{"id":"arcology-itx.5","title":"Add stairs block type","description":"# Add Stairs Block Type\n\n## Overview\nStairs are vertical connectors that bridge adjacent floors (Z and Z+1). They enable the connectivity flood-fill to traverse between floors, making upper levels reachable from the entrance.\n\n## Requirements\n1. Add `stairs` block type to `data/blocks.json`\n2. Stairs connect current floor to floor above (Z to Z+1)\n3. Update connectivity algorithm to traverse through stairs\n4. Visual sprite distinguishes stairs from other blocks\n\n## Block Definition\n```json\n{\n  \"stairs\": {\n    \"name\": \"Stairs\",\n    \"size\": [1, 1, 1],\n    \"cost\": 200,\n    \"category\": \"transit\",\n    \"traversable\": true,\n    \"connects_vertical\": true,\n    \"vertical_range\": 1,\n    \"sprite\": \"res://assets/sprites/blocks/stairs.png\"\n  }\n}\n```\n\n## Connection Logic\nFrom `milestone-3-connectivity.md`:\n```gdscript\nfunc connects_vertical(direction: int) -\u003e bool:\n    match block_type:\n        \"stairs\":\n            return true  # Connects up and down\n        _:\n            return false\n```\n\n## How It Works\n1. Stairs at position (x, y, z) connects to:\n   - Block at (x, y, z+1) above\n   - Block at (x, y, z-1) below\n2. Connectivity flood-fill follows these vertical connections\n3. Upper floor blocks become reachable via stairs\n\n## üìö Required Reading\n- `documentation/architecture/milestones/milestone-3-connectivity.md` - Connection rules, code samples\n- `documentation/game-design/blocks/README.md` - Block catalog\n\n## Acceptance Criteria\nFrom milestone-3-connectivity.md:\n- [ ] `stairs` block type exists in blocks.json\n- [ ] Stairs connect to floor above and below\n- [ ] Connectivity flood-fill traverses through stairs vertically\n- [ ] Upper floor blocks reachable via stairs are marked connected\n- [ ] Stair sprite visually distinct from other blocks","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:52.656196-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T16:30:34.684945-06:00","dependencies":[{"issue_id":"arcology-itx.5","depends_on_id":"arcology-itx","type":"parent-child","created_at":"2026-01-25T14:57:52.663462-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-itx.5","depends_on_id":"arcology-itx.2","type":"blocks","created_at":"2026-01-25T17:43:12.756991-06:00","created_by":"danielbarrett"}],"comments":[{"id":8,"issue_id":"arcology-itx.5","author":"danielbarrett","text":"## Requirements Questions (from PRD Appendix A)\n\n**PRD defines stairs:**\n- Range: ¬±3 floors\n- Speed: 0.5x (slow)\n- Capacity: Low\n- Power: 0\n\n**Key design questions:**\n\n1. **Does a stair block occupy 1 cell or 2?**\n   - Option A: 1 cell at Z, connects to Z+1 (stair is \"magic portal\")\n   - Option B: 2 cells (Z and Z+1), physically spans floors\n   - Option C: 1 cell at Z, but the cell above must be empty/stair-compatible\n\n2. **Stair orientation:**\n   - Does a stair face a direction (N/S/E/W)?\n   - Can you enter from any side, or specific sides?\n\n3. **Stair placement rules:**\n   - Can stairs be built in mid-air? (Probably not)\n   - Must stairs have a corridor/block adjacent at both levels?\n\n4. **Bidirectional?**\n   - Stairs connect Z‚ÜîZ+1, not just Z‚ÜíZ+1?\n\n## Proposed implementation:\n- Stairs occupy 1 cell\n- Connect Z to Z+1 bidirectionally\n- Entry from horizontal neighbors at both levels\n- Placement requires floor below (support) or adjacent block","created_at":"2026-01-25T21:24:50Z"},{"id":12,"issue_id":"arcology-itx.5","author":"danielbarrett","text":"# Stairs Block Type\n\n## User Stories (from PRD Section 6.5, Appendix A.2)\n- US-6.5: As a player, I want stairs as vertical transit for basic floor-to-floor movement.\n- PRD: \"Stairs: Range ¬±3 floors, Speed 0.5x, Capacity Low, Power 0\"\n\n## Requirements\n\n### Block Definition in blocks.json\n```json\n{\n  \"stairs\": {\n    \"id\": \"stairs\",\n    \"name\": \"Stairs\",\n    \"category\": \"transit\",\n    \"size\": [1, 1, 1],\n    \"traversability\": \"PUBLIC\",\n    \"vertical_connection\": {\n      \"type\": \"stairs\",\n      \"range\": [-1, 1],\n      \"speed_multiplier\": 0.5,\n      \"power\": 0\n    },\n    \"sprites\": {\n      \"base\": \"stairs.svg\"\n    },\n    \"description\": \"Basic vertical transit connecting adjacent floors\"\n  }\n}\n```\n\n### Vertical Connection Model (M3 Scope)\n1. **Single-cell block** at position (x, y, z)\n2. **Connects to Z+1 and Z-1** if:\n   - There's a traversable block at that level\n   - OR there's another stairs block creating a chain\n\n3. **Bidirectional:** Can go up or down\n\n### Connectivity Integration\n```gdscript\n# In Grid.get_connected_neighbors():\nfunc get_vertical_neighbors(pos: Vector3i) -\u003e Array[Vector3i]:\n    var neighbors = []\n    var block = get_block_at(pos)\n    \n    if block and block.type == \"stairs\":\n        # Check above\n        var above = pos + Vector3i(0, 0, 1)\n        if get_block_at(above):\n            neighbors.append(above)\n        # Check below  \n        var below = pos + Vector3i(0, 0, -1)\n        if get_block_at(below):\n            neighbors.append(below)\n    \n    return neighbors\n```\n\n### Placement Rules\n1. Must have adjacent corridor/block on at least one horizontal side\n2. Floor above or below should exist (warning if floating)\n3. No placement restrictions on Z level\n\n## Acceptance Criteria\n- [ ] Stairs defined in blocks.json with vertical_connection\n- [ ] Connectivity BFS traverses through stairs to Z¬±1\n- [ ] Stairs sprite created (64x32 isometric showing steps)\n- [ ] Can chain multiple stairs (Z to Z+1 to Z+2)\n- [ ] Bidirectional: up and down both work\n\n## Sprite Notes\n- Show ascending stairs going \"into\" the screen (isometric depth)\n- Visual should suggest vertical movement\n- Gray/neutral color to match placeholder aesthetic\n\n## Out of Scope (Later Milestones)\n- ¬±3 floor range (full PRD spec)\n- Speed multiplier (weighted pathfinding - M6)\n- Escalators (Tech Level 2)","created_at":"2026-01-25T21:34:13Z"},{"id":29,"issue_id":"arcology-itx.5","author":"danielbarrett","text":"## üìö Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-3-connectivity.md#new-block-definitions](documentation/architecture/milestones/milestone-3-connectivity.md) - Stairs JSON\n2. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Stairs specs\n3. [transit/elevators.md](documentation/game-design/transit/elevators.md) - Vertical transit\n\n**Key sections:**\n- Stairs JSON: milestone-3-connectivity.md#datablocksjson-additions\n- connects_vertical(): milestone-3-connectivity.md#block-types-for-vertical-connection\n- Speed 0.5x, Range ¬±3: blocks/transit.md\n","created_at":"2026-01-25T22:04:48Z"}]}
{"id":"arcology-itx.6","title":"Add elevator shaft block type","description":"# Add Elevator Shaft Block Type\n\n## Overview\nElevator shafts are vertical connectors that span multiple floors. Unlike stairs (which connect only ¬±1 floor), elevator shafts connect ALL floors they occupy, enabling fast vertical transit across the entire structure.\n\n## Requirements\n1. Add `elevator_shaft` block type to `data/blocks.json`\n2. Vertical stack of elevator shafts connects all floors it spans\n3. Update connectivity algorithm to traverse through elevator shafts\n4. Visual sprite distinguishes elevators from other blocks\n\n## Block Definition\n```json\n{\n  \"elevator_shaft\": {\n    \"name\": \"Elevator Shaft\",\n    \"size\": [1, 1, 1],\n    \"cost\": 500,\n    \"category\": \"transit\",\n    \"traversable\": true,\n    \"connects_vertical\": true,\n    \"vertical_range\": 10,\n    \"sprite\": \"res://assets/sprites/blocks/elevator.png\"\n  }\n}\n```\n\n## Connection Logic\nFrom `milestone-3-connectivity.md`:\n```gdscript\nfunc connects_vertical(direction: int) -\u003e bool:\n    match block_type:\n        \"elevator_shaft\":\n            return true  # Connects up and down\n        _:\n            return false\n```\n\n## How It Works\n1. Elevator shaft at (x, y, z) connects to elevator shaft at (x, y, z¬±1)\n2. A vertical stack of elevator shafts creates a continuous connection\n3. All floors spanned by the elevator stack are connected\n4. Must stack elevator shafts vertically to create working elevator\n\n## Building Pattern\n```\nFloor 5: [elevator_shaft] ‚Üê connected\nFloor 4: [elevator_shaft] ‚Üê connected\nFloor 3: [elevator_shaft] ‚Üê connected\nFloor 2: (empty)          ‚Üê NOT connected (gap breaks elevator)\nFloor 1: [elevator_shaft] ‚Üê connected only to floor 0\nFloor 0: [entrance]       ‚Üê start\n```\n\n## üìö Required Reading\n- `documentation/architecture/milestones/milestone-3-connectivity.md` - Connection rules, code samples\n- `documentation/game-design/blocks/README.md` - Block catalog\n\n## Acceptance Criteria\nFrom milestone-3-connectivity.md:\n- [ ] `elevator_shaft` block type exists in blocks.json\n- [ ] Elevator shafts connect all floors they span\n- [ ] Connectivity flood-fill traverses through elevator shaft stack\n- [ ] Gap in elevator stack breaks vertical connection\n- [ ] Elevator sprite visually distinct from stairs","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:56.997959-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T16:32:01.043964-06:00","dependencies":[{"issue_id":"arcology-itx.6","depends_on_id":"arcology-itx","type":"parent-child","created_at":"2026-01-25T14:57:57.002436-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-itx.6","depends_on_id":"arcology-itx.2","type":"blocks","created_at":"2026-01-25T17:43:12.867468-06:00","created_by":"danielbarrett"}],"comments":[{"id":13,"issue_id":"arcology-itx.6","author":"danielbarrett","text":"# Elevator Shaft Block Type\n\n## User Stories (from PRD Section 6.5, 19.8, Appendix A.2)\n- US-6.5: As a player, I want elevators for efficient vertical transit.\n- PRD: \"Elevator (Local): Range ¬±10 floors, Speed 3.0x, Capacity Medium, Power 10 units/floor\"\n\n## Requirements\n\n### Block Definition in blocks.json\n```json\n{\n  \"elevator_shaft\": {\n    \"id\": \"elevator_shaft\",\n    \"name\": \"Elevator Shaft\",\n    \"category\": \"transit\",\n    \"size\": [1, 1, 1],\n    \"traversability\": \"PUBLIC\",\n    \"vertical_connection\": {\n      \"type\": \"elevator\",\n      \"connects_all_in_stack\": true,\n      \"speed_multiplier\": 3.0,\n      \"power_per_floor\": 10\n    },\n    \"sprites\": {\n      \"base\": \"elevator_shaft.svg\"\n    },\n    \"placement_rules\": {\n      \"must_stack_vertically\": true\n    },\n    \"description\": \"Vertical transit shaft - stack multiple to connect floors\"\n  }\n}\n```\n\n### Elevator Stack Model (M3 Scope)\n1. **Vertical stack:** Multiple elevator_shaft blocks stacked on same (x, y)\n2. **All connected:** Every floor in the stack connects to every other floor\n3. **No cars/wait time yet:** Abstract as \"teleport within stack\"\n\n### Connectivity Integration\n```gdscript\n# Elevator shaft creates connections to ALL blocks in its vertical stack\nfunc get_elevator_stack(pos: Vector3i) -\u003e Array[Vector3i]:\n    var stack = []\n    var x = pos.x\n    var y = pos.y\n    \n    # Scan up and down for continuous elevator_shaft blocks\n    # Up\n    var z = pos.z\n    while true:\n        var check = Vector3i(x, y, z)\n        var block = get_block_at(check)\n        if block and block.type == \"elevator_shaft\":\n            stack.append(check)\n            z += 1\n        else:\n            break\n    # Down\n    z = pos.z - 1\n    while z \u003e= min_z:\n        var check = Vector3i(x, y, z)\n        var block = get_block_at(check)\n        if block and block.type == \"elevator_shaft\":\n            stack.append(check)\n            z -= 1\n        else:\n            break\n    \n    return stack\n```\n\n### Connectivity Rules\n- All positions in elevator stack are mutually connected\n- Must have horizontal neighbor (corridor) at entry/exit floors\n- BFS treats elevator stack as fully connected subgraph\n\n### Placement Rules\n1. **Stack requirement:** Should stack with existing elevator_shaft OR start new stack\n2. **Horizontal access:** At least top or bottom needs adjacent corridor\n\n## Acceptance Criteria\n- [ ] Elevator shaft defined in blocks.json\n- [ ] Stacked shafts connect all floors they span\n- [ ] Connectivity BFS can traverse elevator stacks\n- [ ] Sprite created (64x32 isometric elevator doors)\n- [ ] Can place elevator and reach upper floors\n\n## Sprite Notes\n- Show elevator doors (closed)\n- Metallic/industrial look\n- Should visually differ from stairs\n\n## Out of Scope (Later Milestones)\n- Elevator cars and wait time simulation\n- Capacity limits\n- Express elevators (¬±30 floors)\n- Power consumption\n- Sky Lobbies","created_at":"2026-01-25T21:34:25Z"},{"id":30,"issue_id":"arcology-itx.6","author":"danielbarrett","text":"## üìö Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-3-connectivity.md#new-block-definitions](documentation/architecture/milestones/milestone-3-connectivity.md) - Elevator JSON\n2. [transit/elevators.md](documentation/game-design/transit/elevators.md) - Full elevator spec\n3. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit block catalog\n\n**Key sections:**\n- Elevator JSON: milestone-3-connectivity.md#datablocksjson-additions\n- Stack connects all floors: milestone-3-connectivity.md\n- Speed 3.0x, Range ¬±10: transit/elevators.md\n","created_at":"2026-01-25T22:04:49Z"}]}
{"id":"arcology-jin","title":"Milestone 1 - Grid \u0026 Blocks","description":"Core grid system and block placement","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-01-25T15:05:33.133072-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:13:47.743899-06:00","closed_at":"2026-01-25T15:13:47.743899-06:00","close_reason":"Duplicate epic","comments":[{"id":54,"issue_id":"arcology-jin","author":"danielbarrett","text":"## üìö Milestone Documentation\n\n**Primary doc:** [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md)\n\n**Supporting docs:**\n- [core-concepts.md](documentation/game-design/core-concepts.md) - Block fundamentals\n- [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n- [blocks/](documentation/game-design/blocks/) - Block catalog\n\nAll tasks in this epic MUST reference the milestone doc before starting work.\n","created_at":"2026-01-25T22:05:56Z"}]}
{"id":"arcology-n2e","title":"Block registry with JSON loading","description":"\nCreate BlockRegistry singleton (src/core/block_registry.gd):\n- Loads data/blocks.json at startup\n- get_block_data(type_id) -\u003e Dictionary\n- Create data/blocks.json with 4 types: corridor, residential, commercial, industrial\nAcceptance: Can query block properties by type ID.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T15:05:34.047324-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:47.59713-06:00","closed_at":"2026-01-25T15:16:47.59713-06:00","close_reason":"Duplicate of arcology-x0d.3","dependencies":[{"issue_id":"arcology-n2e","depends_on_id":"arcology-x0d.2","type":"blocks","created_at":"2026-01-25T15:05:36.858058-06:00","created_by":"danielbarrett"}],"comments":[{"id":38,"issue_id":"arcology-n2e","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid \u0026 Blocks\n2. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n3. [core-concepts.md](documentation/game-design/core-concepts.md) - Block types\n","created_at":"2026-01-25T22:05:22Z"}]}
{"id":"arcology-s8v","title":"Click to place blocks","description":"\nImplement block placement:\n- screen_to_grid() conversion (inverse of grid_to_screen)\n- Left-click places current block type at mouse position\n- Uses current floor level for Z\n- Ghost preview before placement\nAcceptance: Can click to place blocks on the grid.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-25T15:05:34.530793-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T15:16:47.921531-06:00","closed_at":"2026-01-25T15:16:47.921531-06:00","close_reason":"Duplicate of arcology-x0d.6","dependencies":[{"issue_id":"arcology-s8v","depends_on_id":"arcology-1ql","type":"blocks","created_at":"2026-01-25T15:05:37.412824-06:00","created_by":"danielbarrett"}],"comments":[{"id":40,"issue_id":"arcology-s8v","author":"danielbarrett","text":"## üìö Documentation Reference\n\n**Relevant docs:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid \u0026 Blocks\n2. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n3. [core-concepts.md](documentation/game-design/core-concepts.md) - Block types\n","created_at":"2026-01-25T22:05:22Z"}]}
{"id":"arcology-x0d","title":"M1: Grid \u0026 Blocks","status":"open","priority":0,"issue_type":"epic","created_at":"2026-01-25T14:55:14.454482-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T14:55:14.454482-06:00","comments":[{"id":53,"issue_id":"arcology-x0d","author":"danielbarrett","text":"## üìö Milestone Documentation\n\n**Primary doc:** [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md)\n\n**Supporting docs:**\n- [core-concepts.md](documentation/game-design/core-concepts.md) - Block fundamentals\n- [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate math\n- [blocks/](documentation/game-design/blocks/) - Block catalog\n\nAll tasks in this epic MUST reference the milestone doc before starting work.\n","created_at":"2026-01-25T22:05:56Z"}]}
{"id":"arcology-x0d.1","title":"Implement Grid class","description":"# Grid Data Structure\n\n## Overview\nThe Grid is the core data structure storing all blocks in a sparse 3D dictionary. It provides coordinate conversion between grid space (Vector3i) and screen space (Vector2) for isometric rendering.\n\n## Requirements\n1. Sparse 3D dictionary storing Block references by Vector3i position\n2. Constants: TILE_WIDTH=64, TILE_HEIGHT=32, FLOOR_HEIGHT=24\n3. Methods:\n   - set_block(pos: Vector3i, block: Block) -\u003e void\n   - get_block(pos: Vector3i) -\u003e Block or null\n   - remove_block(pos: Vector3i) -\u003e void\n   - has_block(pos: Vector3i) -\u003e bool\n   - get_all_blocks() -\u003e Array[Block]\n4. Coordinate conversion:\n   - grid_to_screen(pos: Vector3i) -\u003e Vector2\n   - screen_to_grid(screen_pos: Vector2, z_level: int) -\u003e Vector3i\n5. Signals:\n   - block_added(pos: Vector3i, block: Block)\n   - block_removed(pos: Vector3i)\n\n## Isometric Math\nFrom `milestone-1-grid-blocks.md`:\n```gdscript\nfunc grid_to_screen(pos: Vector3i) -\u003e Vector2:\n    var x = (pos.x - pos.y) * (TILE_WIDTH / 2)\n    var y = (pos.x + pos.y) * (TILE_HEIGHT / 2) - pos.z * FLOOR_HEIGHT\n    return Vector2(x, y)\n```\n\n## üìö Required Reading\n- `documentation/architecture/milestones/milestone-1-grid-blocks.md` - Grid code samples\n- `documentation/quick-reference/isometric-math.md` - Full conversion formulas\n- `documentation/game-design/core-concepts.md#grid-architecture` - Grid design\n\n## Acceptance Criteria\nFrom milestone-1-grid-blocks.md:\n- [ ] Grid stores blocks by Vector3i position\n- [ ] Can store and retrieve blocks by Vector3i position\n- [ ] grid_to_screen returns correct isometric coordinates\n- [ ] screen_to_grid inverts correctly for given Z level\n- [ ] Signals emit on add/remove\n- [ ] Unit test: round-trip grid_to_screen ‚Üí screen_to_grid = identity\n\n## Out of Scope (M1)\n- Multi-cell blocks (defer to M4)\n- Environment caching (defer to M5)\n- Vertical bounds enforcement (defer)","status":"in_progress","priority":0,"issue_type":"task","created_at":"2026-01-25T14:56:17.402719-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T17:48:20.247523-06:00","dependencies":[{"issue_id":"arcology-x0d.1","depends_on_id":"arcology-x0d","type":"parent-child","created_at":"2026-01-25T14:56:17.409922-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.1","depends_on_id":"arcology-4ct.1","type":"blocks","created_at":"2026-01-25T14:58:28.158597-06:00","created_by":"danielbarrett"}],"comments":[{"id":1,"issue_id":"arcology-x0d.1","author":"danielbarrett","text":"## Requirements Questions (from PRD review)\n\n**1. Multi-cell blocks:** PRD Section 3.1 says blocks can be 1x1, 2x2, 3x3, or mega (5x5). Does Grid need to handle multi-cell footprints now, or defer to M4+?\n\n**2. Environment storage:** PRD says blocks have computed values (sunlight, air_quality, safety, vibes, noise). Should Grid store these per-cell, or is that a separate EnvironmentCache system?\n\n**3. Pathfinding graph:** PRD Section 6 says pathfinding uses a node graph separate from the voxel grid. Should Grid expose neighbor connectivity, or is that a separate PathGraph class?\n\n**4. Vertical bounds:** PRD Section 2.2 says maps have max_height and max_depth. Should Grid enforce these limits?\n\n**5. screen_to_grid ambiguity:** The inverse isometric transform is not unique - a screen point maps to a ray through 3D space. How do we resolve Z? Use current viewing floor? Raycast to find topmost block?\n\n## Proposed scope for M1:\n- 1x1 blocks only (defer multi-cell to M4)\n- No environment storage (defer to M5)\n- Basic neighbor queries (6 directions)\n- No vertical bounds enforcement (defer)\n- screen_to_grid uses current_floor for Z","created_at":"2026-01-25T21:17:40Z"},{"id":14,"issue_id":"arcology-x0d.1","author":"danielbarrett","text":"## üìö Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Grid class spec\n2. [core-concepts.md#grid-architecture](documentation/game-design/core-concepts.md#grid-architecture) - Grid design philosophy\n3. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Coordinate conversion formulas\n\n**Key sections:**\n- Grid class code template: `milestone-1-grid-blocks.md#gridgd`\n- Sparse Dictionary pattern: `core-concepts.md#grid-architecture`\n- `grid_to_screen()` and `screen_to_grid()`: `isometric-math.md`\n\n**After completing, verify against:**\n- Acceptance criteria in `milestone-1-grid-blocks.md#acceptance-criteria`\n","created_at":"2026-01-25T22:03:00Z"}]}
{"id":"arcology-x0d.2","title":"Implement Block base class","description":"# Block Base Class\n\n## Overview\nBlock is a lightweight data holder for individual placed blocks. All static properties (cost, size, traversability) come from BlockRegistry lookup by block_type, keeping Block instances small.\n\n## Requirements\n1. Simple RefCounted class (not Node) for data storage\n2. Properties:\n   - grid_position: Vector3i (where in the grid)\n   - block_type: String (key into BlockRegistry)\n   - connected: bool (reachable from entrance, default false)\n3. Computed properties (lookup from BlockRegistry):\n   - get_definition() -\u003e Dictionary (full block data)\n   - get_traversability() -\u003e String (\"public\" or \"private\")\n   - get_sprite_path() -\u003e String\n4. Signals:\n   - property_changed(property_name: String)\n\n## Key Code\nFrom `milestone-1-grid-blocks.md`:\n```gdscript\nclass_name Block\nextends RefCounted\n\nvar grid_position: Vector3i\nvar block_type: String\nvar sprite: Sprite2D\n\nfunc _init(type: String, pos: Vector3i):\n    block_type = type\n    grid_position = pos\n```\n\n## Design Decision\nBlock is a data holder, not a Node. All static properties come from BlockRegistry. This enables:\n- Small memory footprint per block\n- Hot-reloading block definitions\n- Easy serialization\n\n## üìö Required Reading\n- `documentation/architecture/milestones/milestone-1-grid-blocks.md` - Block code sample\n- `documentation/game-design/core-concepts.md#block-types` - Block types overview\n- `documentation/game-design/blocks/README.md` - Block catalog\n\n## Acceptance Criteria\n- [ ] Can instantiate Block with position and type\n- [ ] Can query block_type and grid_position\n- [ ] get_definition() returns data from BlockRegistry\n- [ ] connected property is readable/writable\n- [ ] Signals fire when properties change\n\n## Out of Scope (M1)\n- Environment values (sunlight, air, etc.) - M5\n- Occupancy/rent - M7\n- Upgrade levels - M8","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-25T14:56:24.376617-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T16:34:24.520326-06:00","dependencies":[{"issue_id":"arcology-x0d.2","depends_on_id":"arcology-x0d","type":"parent-child","created_at":"2026-01-25T14:56:24.401231-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.2","depends_on_id":"arcology-4ct.1","type":"blocks","created_at":"2026-01-25T14:58:32.530531-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.2","depends_on_id":"arcology-7s2","type":"blocks","created_at":"2026-01-25T15:05:00.481924-06:00","created_by":"danielbarrett"}],"comments":[{"id":2,"issue_id":"arcology-x0d.2","author":"danielbarrett","text":"## Requirements Questions (from PRD Section 3.6)\n\n**PRD says Block needs:**\n- id, type, tags[], size, level, allocation\n- traversability (public/private)\n- entry_points (which sides can be entered)\n- traversal_speed, traversal_cost_modifier\n- build constraints (can_build_above, requires_below, clearance, etc.)\n- panels (wall materials per face)\n- environment values (sunlight, air_quality, safety, vibes, accessibility, noise)\n- economic (occupancy, rent, maintenance_cost)\n\n**Current ticket only has:**\n- grid_position, block_type, sprite reference, signals\n\n**Questions:**\n1. How much of the PRD Block model do we implement in M1? Full model or minimal?\n2. Should Block be a Resource (data) or Node (scene instance)?\n3. Do we need block_id or just use grid_position as key?\n\n## Proposed scope for M1:\n- grid_position: Vector3i\n- block_type: String (lookup in registry for full data)\n- All other properties come from BlockRegistry lookup\n- Block is a simple RefCounted class, not a Node","created_at":"2026-01-25T21:18:07Z"},{"id":15,"issue_id":"arcology-x0d.2","author":"danielbarrett","text":"## üìö Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-1-grid-blocks.md#blockgd](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Block class spec\n2. [core-concepts.md#block-types](documentation/game-design/core-concepts.md#block-types) - Block type philosophy\n3. [core-concepts.md#public-vs-private-blocks](documentation/game-design/core-concepts.md#public-vs-private-blocks) - Traversability\n\n**Key sections:**\n- Block class code template: milestone-1-grid-blocks.md#blockgd\n- PUBLIC vs PRIVATE: core-concepts.md#public-vs-private-blocks\n","created_at":"2026-01-25T22:03:41Z"}]}
{"id":"arcology-x0d.3","title":"Implement BlockRegistry","description":"# BlockRegistry - Load Block Definitions from JSON\n\n## Overview\nBlockRegistry is an autoload singleton that loads block definitions from `data/blocks.json` and provides lookup methods for block properties.\n\n## Requirements\n1. Autoload singleton (Project Settings \u003e AutoLoad)\n2. Loads data/blocks.json on _ready()\n3. Methods:\n   - get_block_data(type_id: String) -\u003e Dictionary\n   - get_all_types() -\u003e Array[String]\n   - has_type(type_id: String) -\u003e bool\n4. Block data schema (minimum for M1-M3):\n   ```json\n   {\n     \"type_id\": \"corridor\",\n     \"name\": \"Corridor\",\n     \"category\": \"transit\",\n     \"traversability\": \"public\",\n     \"size\": [1, 1, 1],\n     \"cost\": 50,\n     \"sprite\": \"res://assets/sprites/blocks/corridor.png\",\n     \"connects_horizontal\": true,\n     \"connects_vertical\": false\n   }\n   ```\n\n## Why Traversability Matters (M3)\nConnectivity flood-fill needs to know:\n- **public** blocks: can route THROUGH\n- **private** blocks: can route TO but not through\n\n## üìö Required Reading\n- `documentation/architecture/milestones/milestone-1-grid-blocks.md` - JSON schema, code sample\n- `documentation/game-design/blocks/README.md` - Block properties\n- `documentation/game-design/core-concepts.md#public-vs-private-blocks` - Traversability\n\n## Acceptance Criteria\nFrom milestone-1-grid-blocks.md:\n- [ ] Singleton accessible as BlockRegistry\n- [ ] Loads blocks.json without errors\n- [ ] get_block_data returns correct dictionary\n- [ ] Returns null/empty for unknown types\n- [ ] Block definitions load from JSON\n\n## Out of Scope (M1)\n- needs/produces arrays - M5\n- preconditions/unlocks - M7\n- upgrade levels - M8","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-25T14:56:29.572241-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T16:34:48.495467-06:00","dependencies":[{"issue_id":"arcology-x0d.3","depends_on_id":"arcology-x0d","type":"parent-child","created_at":"2026-01-25T14:56:29.579608-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.3","depends_on_id":"arcology-x0d.4","type":"blocks","created_at":"2026-01-25T14:58:36.765571-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.3","depends_on_id":"arcology-x0d.2","type":"blocks","created_at":"2026-01-25T14:58:40.803191-06:00","created_by":"danielbarrett"}],"comments":[{"id":3,"issue_id":"arcology-x0d.3","author":"danielbarrett","text":"## Requirements Questions (from PRD Appendix A)\n\n**PRD Block Catalog has 100+ block types with:**\n- Size, Needs (power/water/air/light/path), Preconditions\n- Produces (jobs, services, radius effects)\n- Unlocks, Tags, Traversability\n- Cost, maintenance\n\n**Current ticket only has:**\n- name, cost, category, sprite path\n\n**Questions:**\n1. What's the minimal schema for M1? Just enough for placement?\n2. Should we include traversability (public/private) now? It affects pathfinding design.\n3. Should blocks have \"needs\" array even if we don't check them yet?\n\n## Proposed M1 schema:\n```json\n{\n  \"corridor\": {\n    \"name\": \"Corridor\",\n    \"category\": \"transit\",\n    \"traversability\": \"public\",\n    \"size\": [1, 1, 1],\n    \"cost\": 50,\n    \"sprite\": \"corridor.png\"\n  }\n}\n```\n\n## Defer to later:\n- needs/produces (M5: environment)\n- preconditions/unlocks (M7: progression)\n- levels/upgrades (M8)","created_at":"2026-01-25T21:19:33Z"},{"id":16,"issue_id":"arcology-x0d.3","author":"danielbarrett","text":"## üìö Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - JSON structure\n2. [blocks/README.md](documentation/game-design/blocks/README.md) - Block catalog overview\n\n**Key sections:**\n- JSON schema: milestone-1-grid-blocks.md#datablocksjson\n- Block categories: blocks/README.md\n","created_at":"2026-01-25T22:03:41Z"}]}
{"id":"arcology-x0d.4","title":"Create blocks.json data file","description":"# Create blocks.json Data File\n\n## Overview\nThe blocks.json file defines all block types available in the game. Each block type specifies its properties: name, category, cost, traversability, and sprite path.\n\n## Requirements\nDefine 6 block types needed for M1-M3:\n\n### 1. corridor\n- category: transit\n- traversability: public\n- cost: 50\n- connects_horizontal: true\n- connects_vertical: false\n\n### 2. entrance  \n- category: transit\n- traversability: public\n- cost: 500\n- connects_horizontal: true\n- ground_only: true\n\n### 3. stairs\n- category: transit\n- traversability: public\n- cost: 200\n- connects_horizontal: true\n- connects_vertical: true (Z to Z+1)\n\n### 4. elevator_shaft\n- category: transit\n- traversability: public\n- cost: 500\n- connects_horizontal: false\n- connects_vertical: true (all Z in shaft)\n\n### 5. residential_basic\n- category: residential\n- traversability: private\n- cost: 500\n\n### 6. commercial_basic\n- category: commercial\n- traversability: private\n- cost: 800\n\n## JSON Schema\nFrom `milestone-1-grid-blocks.md`:\n```json\n{\n  \"corridor\": {\n    \"name\": \"Corridor\",\n    \"size\": [1, 1, 1],\n    \"cost\": 50,\n    \"category\": \"transit\",\n    \"traversable\": true,\n    \"sprite\": \"res://assets/sprites/blocks/corridor.png\"\n  }\n}\n```\n\n## üìö Required Reading\n- `documentation/architecture/milestones/milestone-1-grid-blocks.md` - JSON schema example\n- `documentation/architecture/milestones/milestone-3-connectivity.md` - Vertical connection properties\n- `documentation/game-design/blocks/README.md` - Block catalog\n\n## Acceptance Criteria\nFrom milestone-1-grid-blocks.md:\n- [ ] Valid JSON, no syntax errors\n- [ ] At least 6 block types defined\n- [ ] Each has: name, category, traversable, cost, sprite path\n- [ ] Entrance has ground_only: true\n- [ ] Stairs/elevator have connects_vertical: true\n- [ ] File at data/blocks.json","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-25T14:56:34.571553-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T16:35:26.530752-06:00","dependencies":[{"issue_id":"arcology-x0d.4","depends_on_id":"arcology-x0d","type":"parent-child","created_at":"2026-01-25T14:56:34.57969-06:00","created_by":"danielbarrett"}],"comments":[{"id":4,"issue_id":"arcology-x0d.4","author":"danielbarrett","text":"## Requirements Questions (from PRD Appendix A)\n\n**PRD has detailed block definitions. For M1, which blocks do we actually need?**\n\nLooking at M1-M3 features:\n- M1: Place/remove blocks, basic types\n- M2: Floor navigation  \n- M3: Connectivity (entrance, corridors, stairs, elevator)\n\n**Minimum viable blocks for M1-M3:**\n1. `corridor` - transit, connects horizontally\n2. `entrance` - connection to outside, must be Z=0\n3. `stairs` - vertical connector (Z to Z+1)\n4. `elevator_shaft` - vertical connector (multi-floor)\n5. `residential_basic` - destination block\n6. `commercial_basic` - destination block\n\n**Questions:**\n1. Do we need \"empty\" block type, or just absence of block = empty?\n2. Should entrance be a special corridor or distinct type?\n3. Do stairs span 2 cells vertically, or is it 1 cell that \"connects\" to Z+1?\n\n## Proposed blocks.json structure:\nInclude traversability now (affects M3 connectivity):\n- corridor: public, connects NSEW\n- stairs: public, connects Z to Z+1\n- elevator_shaft: public, connects vertically\n- entrance: public, must be Z=0\n- residential_basic: private, destination\n- commercial_basic: private, destination","created_at":"2026-01-25T21:20:02Z"},{"id":17,"issue_id":"arcology-x0d.4","author":"danielbarrett","text":"## üìö Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - JSON format\n2. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Corridor specs\n3. [blocks/residential.md](documentation/game-design/blocks/residential.md) - Housing specs\n4. [blocks/commercial.md](documentation/game-design/blocks/commercial.md) - Commercial specs\n","created_at":"2026-01-25T22:03:41Z"}]}
{"id":"arcology-x0d.5","title":"Setup isometric rendering with Y-sort","description":"# Setup Isometric Rendering with Y-Sort\n\n## Overview\nBlocks must render at correct isometric screen positions with proper depth sorting. Higher grid Y values render behind (further from camera), and higher Z values (floors) render above.\n\n## Requirements\n1. Block container node with y_sort_enabled = true\n2. Sprite positioning uses Grid.grid_to_screen()\n3. Z-ordering rules:\n   - Higher grid Y = renders behind (further from camera)\n   - Higher grid Z = renders above (stacked floors)\n   - Formula: sprite.z_index = pos.x + pos.y + pos.z * 100\n4. When blocks added/removed, sprites update positions\n\n## Implementation\n```gdscript\n# In BlockRenderer or similar\nfunc _update_sprite_position(block: Block, sprite: Sprite2D) -\u003e void:\n    sprite.position = Grid.grid_to_screen(block.grid_position)\n    sprite.z_index = _calculate_z_index(block.grid_position)\n\nfunc _calculate_z_index(pos: Vector3i) -\u003e int:\n    return pos.x + pos.y + pos.z * 100\n```\n\n## üìö Required Reading\n- `documentation/architecture/milestones/milestone-1-grid-blocks.md` - Rendering requirements\n- `documentation/quick-reference/isometric-math.md` - Coordinate conversions\n- `documentation/game-design/core-concepts.md#grid-architecture` - Grid system\n\n## Acceptance Criteria\nFrom milestone-1-grid-blocks.md:\n- [ ] Blocks appear at correct isometric positions\n- [ ] Blocks at (0,0,0) and (1,1,0) render with correct overlap\n- [ ] Block at (0,0,1) renders above block at (0,0,0)\n- [ ] Y-sorting works for blocks at same Z level\n- [ ] Blocks stack visually (higher Z appears in front of lower Y)\n- [ ] No z-fighting between adjacent blocks","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-25T14:56:39.267482-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T16:35:43.378291-06:00","dependencies":[{"issue_id":"arcology-x0d.5","depends_on_id":"arcology-x0d","type":"parent-child","created_at":"2026-01-25T14:56:39.273958-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.5","depends_on_id":"arcology-x0d.1","type":"blocks","created_at":"2026-01-25T14:58:44.869975-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.5","depends_on_id":"arcology-x0d.8","type":"blocks","created_at":"2026-01-25T14:58:49.190768-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.5","depends_on_id":"arcology-x0d.2","type":"blocks","created_at":"2026-01-25T17:42:12.562493-06:00","created_by":"danielbarrett"}],"comments":[{"id":18,"issue_id":"arcology-x0d.5","author":"danielbarrett","text":"## üìö Required Reading\n\n**Before starting this task, you MUST read:**\n1. [isometric-math.md#depth-sorting](documentation/quick-reference/isometric-math.md) - Depth sorting formulas\n2. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Rendering section\n\n**Key sections:**\n- get_sort_key(): isometric-math.md#depth-sorting\n- Godot Y-sort: isometric-math.md#depth-sorting\n","created_at":"2026-01-25T22:03:41Z"}]}
{"id":"arcology-x0d.6","title":"Implement block placement on click","description":"# Block Placement and Removal on Click\n\n## Overview\nPlayers place blocks by left-clicking on the grid and remove them by right-clicking. A ghost preview shows where the block will be placed before committing.\n\n## Requirements\n1. Left-click places currently selected block type\n2. Right-click removes block at cursor position\n3. Ghost preview shows where block will be placed\n4. Placement uses current viewing floor for Z coordinate\n5. Signals emitted for game state updates\n\n## Implementation Details\n1. screen_to_grid(mouse_pos, current_floor) -\u003e Vector3i\n2. Ghost sprite follows cursor, shows valid/invalid placement\n3. On click:\n   - Check if position is empty (for placement)\n   - Check if position has block (for removal)\n   - Create/remove Block, update Grid, refresh renderer\n\n## Placement Validation (M1 - basic)\n- Can't place on occupied cell\n- Can't remove empty cell\n- (Future M3+: connectivity checks, adjacency rules)\n\n## Signals\n- block_placement_attempted(pos, type, success)\n- block_removal_attempted(pos, success)\n\n## üìö Required Reading\n- `documentation/architecture/milestones/milestone-1-grid-blocks.md` - Place/remove requirements\n- `documentation/quick-reference/isometric-math.md` - screen_to_grid conversion\n\n## Acceptance Criteria\nFrom milestone-1-grid-blocks.md:\n- [ ] Click places selected block type\n- [ ] Right-click removes block\n- [ ] Block appears immediately at clicked position\n- [ ] Block is added to Grid data structure\n- [ ] Ghost preview visible before placement\n- [ ] Ghost turns red when placement invalid (occupied)\n- [ ] Placement uses current_floor for Z\n- [ ] Grid and renderer stay in sync\n- [ ] Signals emit on place/remove","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-25T14:56:45.066581-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T16:35:54.506604-06:00","dependencies":[{"issue_id":"arcology-x0d.6","depends_on_id":"arcology-x0d","type":"parent-child","created_at":"2026-01-25T14:56:45.086504-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.6","depends_on_id":"arcology-x0d.5","type":"blocks","created_at":"2026-01-25T14:58:53.768277-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.6","depends_on_id":"arcology-x0d.3","type":"blocks","created_at":"2026-01-25T14:58:58.536607-06:00","created_by":"danielbarrett"}],"comments":[{"id":19,"issue_id":"arcology-x0d.6","author":"danielbarrett","text":"## üìö Required Reading\n\n**Before starting this task, you MUST read:**\n1. [isometric-math.md#mouse-picking](documentation/quick-reference/isometric-math.md) - Mouse to grid conversion\n2. [isometric-math.md#screen-to-grid-conversion](documentation/quick-reference/isometric-math.md) - Coordinate conversion\n3. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Input handling\n\n**Key sections:**\n- pick_tile(): isometric-math.md#mouse-picking\n- screen_to_grid(): isometric-math.md#screen-to-grid-conversion\n","created_at":"2026-01-25T22:03:41Z"}]}
{"id":"arcology-x0d.7","title":"Create simple block picker UI","description":"# Simple Block Picker UI\n\n## Overview\nA horizontal row of buttons at the bottom of the screen allowing players to select which block type to place. Includes keyboard shortcuts for quick selection.\n\n## Requirements\n1. HBoxContainer at bottom of screen\n2. Button for each block type from BlockRegistry\n3. Visual feedback for selected type (highlight/pressed)\n4. Keyboard shortcuts: 1-6 for quick selection\n5. Selected type used by placement system\n\n## Block Types to Show (M1-M3)\n1. Corridor (1)\n2. Entrance (2)\n3. Stairs (3)\n4. Elevator (4)\n5. Residential (5)\n6. Commercial (6)\n\n## UI Layout\n```\n[Corridor][Entrance][Stairs][Elevator][Residential][Commercial]\n    1         2         3        4          5            6\n```\n\n## Implementation\n- Load block types from BlockRegistry.get_all_types()\n- Create button per type with icon/name\n- Connect button.pressed to selection change\n- Store selected_block_type: String in GameState\n\n## üìö Required Reading\n- `documentation/architecture/milestones/milestone-1-grid-blocks.md` - UI requirements\n- `documentation/game-design/blocks/README.md` - Available block types\n\n## Acceptance Criteria\nFrom milestone-1-grid-blocks.md:\n- [ ] At least 4 buttons for block types (M1), 6 for M3\n- [ ] All block types visible in picker\n- [ ] Clicking button selects that type\n- [ ] Selected button shows visual highlight\n- [ ] Keys 1-6 select corresponding type\n- [ ] Placement uses currently selected type\n- [ ] Selected block type is used when clicking to place","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-25T14:56:50.150764-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T16:36:32.277367-06:00","dependencies":[{"issue_id":"arcology-x0d.7","depends_on_id":"arcology-x0d","type":"parent-child","created_at":"2026-01-25T14:56:50.159226-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.7","depends_on_id":"arcology-x0d.6","type":"blocks","created_at":"2026-01-25T14:59:02.584394-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.7","depends_on_id":"arcology-s8v","type":"blocks","created_at":"2026-01-25T15:05:37.939125-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-x0d.7","depends_on_id":"arcology-x0d.3","type":"blocks","created_at":"2026-01-25T17:42:25.334347-06:00","created_by":"danielbarrett"}],"comments":[{"id":20,"issue_id":"arcology-x0d.7","author":"danielbarrett","text":"## üìö Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-1-grid-blocks.md](documentation/architecture/milestones/milestone-1-grid-blocks.md) - Input section\n2. [blocks/README.md](documentation/game-design/blocks/README.md) - Block categories\n3. [ui/README.md](documentation/ui/README.md) - UI patterns\n\n**Key sections:**\n- Block selector UI: milestone-1-grid-blocks.md#input\n","created_at":"2026-01-25T22:03:41Z"}]}
{"id":"arcology-x0d.8","title":"Create basic block sprites","description":"# Create Basic Block Sprites\n\n## Overview\nCreate placeholder isometric sprites for block types needed in Milestones 1-3. These are 3D cutaway room sprites rendered as hexagonal shapes.\n\n## Isometric Geometry\n\nBlocks are cubes viewed isometrically with front faces removed (cutaway style):\n\n```\nSingle 1x1x1 block sprite (64w √ó 64h):\n\n          ____32____\n         /          \\\n        /    TOP     \\      ‚Üê Diamond floor (64w √ó 32h)\n       / (floor face) \\\n      /________________\\\n      \\       |       /\n       \\  L   |   R  /      ‚Üê Two visible walls (32h each)  \n        \\     |     /\n         \\____|____/\n\n      |______64_____|\n```\n\n**Perimeter: HEXAGON** (6 vertices)\n**3 visible faces:** TOP (floor), LEFT wall, RIGHT wall\n\n## Sprite Specifications\n- **Width**: 64 pixels\n- **Height**: 64 pixels (32px diamond + 32px walls)\n- **Format**: PNG with transparency\n- **Style**: Flat color with distinct faces (darker walls, lighter floor)\n- **Location**: `assets/sprites/blocks/{type}.png`\n\n## Block Types and Colors\n| Block | Floor Color | Wall Color | Hex (floor) |\n|-------|-------------|------------|-------------|\n| corridor | Light Gray | Dark Gray | #9ca3af / #6b7280 |\n| entrance | Gold | Dark Gold | #fbbf24 / #f59e0b |\n| stairs | Light Teal | Dark Teal | #5eead4 / #14b8a6 |\n| elevator | Light Purple | Dark Purple | #a78bfa / #8b5cf6 |\n| residential | Light Blue | Dark Blue | #93c5fd / #3b82f6 |\n| commercial | Light Green | Dark Green | #86efac / #22c55e |\n\n## üìö Required Reading\n- `documentation/quick-reference/isometric-math.md` - Sprite geometry, constants\n- `documentation/architecture/milestones/milestone-1-grid-blocks.md` - Block types\n\n## Acceptance Criteria\n- [ ] 6 PNG files exist in assets/sprites/blocks/\n- [ ] Each sprite is 64x64 pixels with transparency\n- [ ] Each shows hexagonal 3D cutaway shape\n- [ ] Floor face (top diamond) is lighter color\n- [ ] Wall faces (left/right) are darker color\n- [ ] Each block type has distinct color scheme\n- [ ] Godot can import and display them","status":"open","priority":0,"issue_type":"task","created_at":"2026-01-25T14:56:54.711938-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T17:38:20.431281-06:00","dependencies":[{"issue_id":"arcology-x0d.8","depends_on_id":"arcology-x0d","type":"parent-child","created_at":"2026-01-25T14:56:54.717071-06:00","created_by":"danielbarrett"}],"comments":[{"id":21,"issue_id":"arcology-x0d.8","author":"danielbarrett","text":"## üìö Required Reading\n\n**Before starting this task, you MUST read:**\n1. [isometric-math.md](documentation/quick-reference/isometric-math.md) - Tile dimensions (64x32)\n2. [blocks/transit.md](documentation/game-design/blocks/transit.md) - Transit block visuals\n3. [blocks/residential.md](documentation/game-design/blocks/residential.md) - Residential visuals\n\n**Key sections:**\n- TILE_WIDTH=64, TILE_HEIGHT=32: isometric-math.md#constants\n- Sprite paths: milestone-1-grid-blocks.md#datablocksjson\n","created_at":"2026-01-25T22:03:42Z"}]}
{"id":"arcology-y6e","title":"M2: Floor Navigation","status":"open","priority":1,"issue_type":"epic","created_at":"2026-01-25T14:55:20.287898-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T14:55:20.287898-06:00","comments":[{"id":55,"issue_id":"arcology-y6e","author":"danielbarrett","text":"## üìö Milestone Documentation\n\n**Primary doc:** [milestone-2-floor-navigation.md](documentation/architecture/milestones/milestone-2-floor-navigation.md)\n\n**Supporting docs:**\n- [ui/views.md](documentation/ui/views.md) - View modes\n- [isometric-math.md](documentation/quick-reference/isometric-math.md) - Z-level handling\n\nAll tasks in this epic MUST reference the milestone doc before starting work.\n","created_at":"2026-01-25T22:05:56Z"}]}
{"id":"arcology-y6e.1","title":"Add floor selector UI","description":"# Floor Selector UI and Controls\n\n## Overview\nUI panel and keyboard controls for switching between floor levels. The current floor determines which Z level blocks are placed on and which floor is fully visible.\n\n## Requirements\n1. GameState singleton with current_floor: int\n2. UI panel showing current floor number\n3. Up/Down buttons to change floor\n4. Keyboard: PageUp/PageDown to change floor\n5. Floor range: 0 to 10 (initial limits)\n\n## UI Layout\nFrom `milestone-2-floor-navigation.md`:\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ Floor: 3                [‚ñ≤][‚ñº]  ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ                                 ‚îÇ\n‚îÇ         (game view)             ‚îÇ\n‚îÇ                                 ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n## Implementation\n1. GameState autoload with:\n   - current_floor: int = 0\n   - MIN_FLOOR: int = 0\n   - MAX_FLOOR: int = 10\n   - signal floor_changed(new_floor: int)\n\n2. FloorSelector scene (scenes/ui/floor_selector.tscn)\n   - Label showing floor number\n   - Up/Down buttons\n   - Connect to GameState.floor_changed\n\n3. Input handling in main scene:\n   - PageUp: increment floor\n   - PageDown: decrement floor\n\n## üìö Required Reading\n- `documentation/architecture/milestones/milestone-2-floor-navigation.md` - Floor system spec\n- `documentation/ui/README.md` - UI guidelines (if exists)\n\n## Acceptance Criteria\nFrom milestone-2-floor-navigation.md:\n- [ ] Floor indicator shows current floor number\n- [ ] Up/down buttons change current floor\n- [ ] Floor has min (0) and max (10) limits\n- [ ] PageUp/PageDown keyboard shortcuts work\n- [ ] UI updates to show new floor number\n- [ ] signal floor_changed emits on change\n- [ ] Block placement uses current_floor for Z","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:07.921034-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T16:39:40.588012-06:00","dependencies":[{"issue_id":"arcology-y6e.1","depends_on_id":"arcology-y6e","type":"parent-child","created_at":"2026-01-25T14:57:07.928072-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-y6e.1","depends_on_id":"arcology-x0d.7","type":"blocks","created_at":"2026-01-25T14:59:12.484614-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-y6e.1","depends_on_id":"arcology-x0d.1","type":"blocks","created_at":"2026-01-25T17:43:11.756553-06:00","created_by":"danielbarrett"}],"comments":[{"id":22,"issue_id":"arcology-y6e.1","author":"danielbarrett","text":"## üìö Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-2-floor-navigation.md](documentation/architecture/milestones/milestone-2-floor-navigation.md) - Floor UI spec\n2. [ui/README.md](documentation/ui/README.md) - UI patterns\n\n**Key sections:**\n- Floor UI layout: milestone-2-floor-navigation.md#ui-layout\n- Floor selector code: milestone-2-floor-navigation.md#floor-ui\n","created_at":"2026-01-25T22:04:26Z"}]}
{"id":"arcology-y6e.2","title":"Implement floor visibility system","description":"# Floor Visibility System\n\n## Overview\nControls block visibility based on floor level. Current floor is fully visible, floors below fade with depth, and floors above are hidden. This creates a \"cutaway\" view into the structure.\n\n## Requirements\n1. Current floor: 100% opacity (fully visible)\n2. Floor below (Z-1): 70% opacity\n3. Two floors below (Z-2): 40% opacity\n4. Floors above current: hidden (0% opacity)\n5. Updates when current_floor changes\n\n## Implementation\nFrom `milestone-2-floor-navigation.md`:\n```gdscript\nfunc update_visibility() -\u003e void:\n    for pos in Grid.blocks:\n        var block = Grid.get_block(pos)\n        if pos.z \u003e current_floor:\n            # Above current floor - hide\n            block.sprite.visible = false\n        elif pos.z == current_floor:\n            # Current floor - full opacity\n            block.sprite.visible = true\n            block.sprite.modulate.a = 1.0\n        elif pos.z \u003e= current_floor - floors_below_visible:\n            # Below but within visible range - fade\n            block.sprite.visible = true\n            var depth = current_floor - pos.z\n            block.sprite.modulate.a = 1.0 - (depth * 0.3)\n        else:\n            # Too far below - hide\n            block.sprite.visible = false\n```\n\n## Connect to GameState\n- Listen to GameState.floor_changed signal\n- Call update_visibility() on change\n\n## üìö Required Reading\n- `documentation/architecture/milestones/milestone-2-floor-navigation.md` - Visibility code sample\n- `documentation/game-design/core-concepts.md#grid-architecture` - Z-level meaning\n\n## Acceptance Criteria\nFrom milestone-2-floor-navigation.md:\n- [ ] Floors above current are hidden\n- [ ] Current floor renders at full opacity\n- [ ] 1 floor below is visible with transparency (70%)\n- [ ] 2 floors below are visible with transparency (40%)\n- [ ] Visibility updates when floor changes\n- [ ] Can see \"down\" into the structure like a cutaway","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:12.198152-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T16:39:49.86339-06:00","dependencies":[{"issue_id":"arcology-y6e.2","depends_on_id":"arcology-y6e","type":"parent-child","created_at":"2026-01-25T14:57:12.201377-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-y6e.2","depends_on_id":"arcology-y6e.1","type":"blocks","created_at":"2026-01-25T17:43:11.879769-06:00","created_by":"danielbarrett"}],"comments":[{"id":23,"issue_id":"arcology-y6e.2","author":"danielbarrett","text":"## üìö Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-2-floor-navigation.md#floor-visibility](documentation/architecture/milestones/milestone-2-floor-navigation.md) - Visibility algorithm\n2. [ui/views.md](documentation/ui/views.md) - View modes\n\n**Key sections:**\n- FloorManager class: milestone-2-floor-navigation.md#floor-visibility\n- Transparency fade: milestone-2-floor-navigation.md#floor-visibility\n","created_at":"2026-01-25T22:04:26Z"}]}
{"id":"arcology-y6e.3","title":"Enable block placement on any floor","description":"# Multi-Floor Block Placement\n\n## Overview\nBlock placement must use the current floor (from FloorManager) as the Z coordinate. This enables building vertically by switching floors and placing blocks.\n\n## Requirements\n1. Block placement uses current_floor as Z coordinate\n2. Can place blocks on any floor 0-10\n3. Visual feedback shows which floor you're building on\n4. Ghost preview appears at correct Z level\n\n## Implementation\nFrom `milestone-2-floor-navigation.md`:\n```gdscript\nfunc _on_click(screen_pos: Vector2) -\u003e void:\n    var grid_pos = Grid.screen_to_grid(screen_pos, FloorManager.current_floor)\n    place_block(grid_pos)\n```\n\n## Building Pattern\nTo build a 5-story tower:\n1. Floor 0: place block\n2. Change to floor 1: place block\n3. Change to floor 2: place block\n4. (continue...)\n\n## üìö Required Reading\n- `documentation/architecture/milestones/milestone-2-floor-navigation.md` - Placement on current floor\n- `documentation/quick-reference/isometric-math.md` - screen_to_grid with Z\n\n## Acceptance Criteria\nFrom milestone-2-floor-navigation.md:\n- [ ] Block placement uses current floor for Z\n- [ ] Changing floor changes where blocks are placed\n- [ ] Can build a 5-story tower by: floor 0, place, floor 1, place, etc.\n- [ ] Ghost preview shows at current floor Z level\n- [ ] Blocks on different floors sort correctly (upper floors behind)\n- [ ] Can build 5+ story structure","status":"open","priority":1,"issue_type":"task","created_at":"2026-01-25T14:57:17.621827-06:00","created_by":"danielbarrett","updated_at":"2026-01-25T16:40:20.937036-06:00","dependencies":[{"issue_id":"arcology-y6e.3","depends_on_id":"arcology-y6e","type":"parent-child","created_at":"2026-01-25T14:57:17.632901-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-y6e.3","depends_on_id":"arcology-y6e.1","type":"blocks","created_at":"2026-01-25T17:43:11.98301-06:00","created_by":"danielbarrett"},{"issue_id":"arcology-y6e.3","depends_on_id":"arcology-x0d.6","type":"blocks","created_at":"2026-01-25T17:43:12.087501-06:00","created_by":"danielbarrett"}],"comments":[{"id":24,"issue_id":"arcology-y6e.3","author":"danielbarrett","text":"## üìö Required Reading\n\n**Before starting this task, you MUST read:**\n1. [milestone-2-floor-navigation.md#placement-on-current-floor](documentation/architecture/milestones/milestone-2-floor-navigation.md) - Z-level placement\n2. [isometric-math.md#screen-to-grid-conversion](documentation/quick-reference/isometric-math.md) - Uses current_floor\n\n**Key sections:**\n- Placement code: milestone-2-floor-navigation.md#placement-on-current-floor\n- FloorManager.current_floor: milestone-2-floor-navigation.md\n","created_at":"2026-01-25T22:04:26Z"}]}
